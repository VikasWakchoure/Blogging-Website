"use strict";(self.webpackChunkblog_website=self.webpackChunkblog_website||[]).push([[179],{58:(Wi,xn,Be)=>{Be.d(xn,{BH:()=>Rt,G6:()=>Ci,L:()=>Je,LL:()=>L,Pz:()=>gt,Sg:()=>pr,UG:()=>Z,ZB:()=>Ce,ZR:()=>Q,aH:()=>Vt,b$:()=>mn,eu:()=>F,hl:()=>k,jU:()=>qt,m9:()=>jo,ne:()=>Ki,pd:()=>Ga,r3:()=>rr,ru:()=>Ft,tV:()=>K,uI:()=>Tn,vZ:()=>Zi,w1:()=>Ti,xO:()=>qa,xb:()=>xr,z$:()=>qe,zd:()=>ai});const Ne=function(D){const T=[];let A=0;for(let q=0;q<D.length;q++){let M=D.charCodeAt(q);M<128?T[A++]=M:M<2048?(T[A++]=M>>6|192,T[A++]=63&M|128):55296==(64512&M)&&q+1<D.length&&56320==(64512&D.charCodeAt(q+1))?(M=65536+((1023&M)<<10)+(1023&D.charCodeAt(++q)),T[A++]=M>>18|240,T[A++]=M>>12&63|128,T[A++]=M>>6&63|128,T[A++]=63&M|128):(T[A++]=M>>12|224,T[A++]=M>>6&63|128,T[A++]=63&M|128)}return T},zt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(D,T){if(!Array.isArray(D))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=T?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let M=0;M<D.length;M+=3){const G=D[M],Oe=M+1<D.length,Ge=Oe?D[M+1]:0,mt=M+2<D.length,Wt=mt?D[M+2]:0;let Fn=(15&Ge)<<2|Wt>>6,Ct=63&Wt;mt||(Ct=64,Oe||(Fn=64)),q.push(A[G>>2],A[(3&G)<<4|Ge>>4],A[Fn],A[Ct])}return q.join("")},encodeString(D,T){return this.HAS_NATIVE_SUPPORT&&!T?btoa(D):this.encodeByteArray(Ne(D),T)},decodeString(D,T){return this.HAS_NATIVE_SUPPORT&&!T?atob(D):function(D){const T=[];let A=0,q=0;for(;A<D.length;){const M=D[A++];if(M<128)T[q++]=String.fromCharCode(M);else if(M>191&&M<224){const G=D[A++];T[q++]=String.fromCharCode((31&M)<<6|63&G)}else if(M>239&&M<365){const mt=((7&M)<<18|(63&D[A++])<<12|(63&D[A++])<<6|63&D[A++])-65536;T[q++]=String.fromCharCode(55296+(mt>>10)),T[q++]=String.fromCharCode(56320+(1023&mt))}else{const G=D[A++],Oe=D[A++];T[q++]=String.fromCharCode((15&M)<<12|(63&G)<<6|63&Oe)}}return T.join("")}(this.decodeStringToByteArray(D,T))},decodeStringToByteArray(D,T){this.init_();const A=T?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let M=0;M<D.length;){const G=A[D.charAt(M++)],Ge=M<D.length?A[D.charAt(M)]:0;++M;const Wt=M<D.length?A[D.charAt(M)]:64;++M;const ve=M<D.length?A[D.charAt(M)]:64;if(++M,null==G||null==Ge||null==Wt||null==ve)throw new Xt;q.push(G<<2|Ge>>4),64!==Wt&&(q.push(Ge<<4&240|Wt>>2),64!==ve&&q.push(Wt<<6&192|ve))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let D=0;D<this.ENCODED_VALS.length;D++)this.byteToCharMap_[D]=this.ENCODED_VALS.charAt(D),this.charToByteMap_[this.byteToCharMap_[D]]=D,this.byteToCharMapWebSafe_[D]=this.ENCODED_VALS_WEBSAFE.charAt(D),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[D]]=D,D>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(D)]=D,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(D)]=D)}}};class Xt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Je=function(D){return function(D){const T=Ne(D);return zt.encodeByteArray(T,!0)}(D).replace(/\./g,"")},K=function(D){try{return zt.decodeString(D,!0)}catch(T){console.error("base64Decode failed: ",T)}return null};function Ce(D,T){if(!(T instanceof Object))return T;switch(T.constructor){case Date:return new Date(T.getTime());case Object:void 0===D&&(D={});break;case Array:D=[];break;default:return T}for(const A in T)!T.hasOwnProperty(A)||!Qe(A)||(D[A]=Ce(D[A],T[A]));return D}function Qe(D){return"__proto__"!==D}const ze=()=>{try{return function lt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const D=process.env.__FIREBASE_DEFAULTS__;return D?JSON.parse(D):void 0})()||(()=>{if(typeof document>"u")return;let D;try{D=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const T=D&&K(D[1]);return T&&JSON.parse(T)})()}catch(D){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${D}`)}},Vt=()=>{var D;return null===(D=ze())||void 0===D?void 0:D.config},gt=D=>{var T;return null===(T=ze())||void 0===T?void 0:T[`_${D}`]};class Rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((T,A)=>{this.resolve=T,this.reject=A})}wrapCallback(T){return(A,q)=>{A?this.reject(A):this.resolve(q),"function"==typeof T&&(this.promise.catch(()=>{}),1===T.length?T(A):T(A,q))}}}function pr(D,T){if(D.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=T||"demo-project",M=D.iat||0,G=D.sub||D.user_id;if(!G)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Oe=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:M,exp:M+3600,auth_time:M,sub:G,user_id:G,firebase:{sign_in_provider:"custom",identities:{}}},D);return[Je(JSON.stringify({alg:"none",type:"JWT"})),Je(JSON.stringify(Oe)),""].join(".")}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Tn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function Z(){var D;const T=null===(D=ze())||void 0===D?void 0:D.forceEnvironment;if("node"===T)return!0;if("browser"===T)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function qt(){return"object"==typeof self&&self.self===self}function Ft(){const D="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof D&&void 0!==D.id}function mn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ti(){const D=qe();return D.indexOf("MSIE ")>=0||D.indexOf("Trident/")>=0}function Ci(){return!Z()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){try{return"object"==typeof indexedDB}catch{return!1}}function F(){return new Promise((D,T)=>{try{let A=!0;const q="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(q);M.onsuccess=()=>{M.result.close(),A||self.indexedDB.deleteDatabase(q),D(!0)},M.onupgradeneeded=()=>{A=!1},M.onerror=()=>{var G;T((null===(G=M.error)||void 0===G?void 0:G.message)||"")}}catch(A){T(A)}})}class Q extends Error{constructor(T,A,q){super(A),this.code=T,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L.prototype.create)}}class L{constructor(T,A,q){this.service=T,this.serviceName=A,this.errors=q}create(T,...A){const q=A[0]||{},M=`${this.service}/${T}`,G=this.errors[T],Oe=G?function pe(D,T){return D.replace(rt,(A,q)=>{const M=T[q];return null!=M?String(M):`<${q}?>`})}(G,q):"Error";return new Q(M,`${this.serviceName}: ${Oe} (${M}).`,q)}}const rt=/\{\$([^}]+)}/g;function rr(D,T){return Object.prototype.hasOwnProperty.call(D,T)}function xr(D){for(const T in D)if(Object.prototype.hasOwnProperty.call(D,T))return!1;return!0}function Zi(D,T){if(D===T)return!0;const A=Object.keys(D),q=Object.keys(T);for(const M of A){if(!q.includes(M))return!1;const G=D[M],Oe=T[M];if(_n(G)&&_n(Oe)){if(!Zi(G,Oe))return!1}else if(G!==Oe)return!1}for(const M of q)if(!A.includes(M))return!1;return!0}function _n(D){return null!==D&&"object"==typeof D}function qa(D){const T=[];for(const[A,q]of Object.entries(D))Array.isArray(q)?q.forEach(M=>{T.push(encodeURIComponent(A)+"="+encodeURIComponent(M))}):T.push(encodeURIComponent(A)+"="+encodeURIComponent(q));return T.length?"&"+T.join("&"):""}function ai(D){const T={};return D.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[M,G]=q.split("=");T[decodeURIComponent(M)]=decodeURIComponent(G)}}),T}function Ga(D){const T=D.indexOf("?");if(!T)return"";const A=D.indexOf("#",T);return D.substring(T,A>0?A:void 0)}function Ki(D,T){const A=new ps(D,T);return A.subscribe.bind(A)}class ps{constructor(T,A){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=A,this.task.then(()=>{T(this)}).catch(q=>{this.error(q)})}next(T){this.forEachObserver(A=>{A.next(T)})}error(T){this.forEachObserver(A=>{A.error(T)}),this.close(T)}complete(){this.forEachObserver(T=>{T.complete()}),this.close()}subscribe(T,A,q){let M;if(void 0===T&&void 0===A&&void 0===q)throw new Error("Missing Observer.");M=function eo(D,T){if("object"!=typeof D||null===D)return!1;for(const A of T)if(A in D&&"function"==typeof D[A])return!0;return!1}(T,["next","error","complete"])?T:{next:T,error:A,complete:q},void 0===M.next&&(M.next=Lt),void 0===M.error&&(M.error=Lt),void 0===M.complete&&(M.complete=Lt);const G=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),G}unsubscribeOne(T){void 0===this.observers||void 0===this.observers[T]||(delete this.observers[T],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(T){if(!this.finalized)for(let A=0;A<this.observers.length;A++)this.sendOne(A,T)}sendOne(T,A){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[T])try{A(this.observers[T])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(T){this.finalized||(this.finalized=!0,void 0!==T&&(this.finalError=T),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lt(){}function jo(D){return D&&D._delegate?D._delegate:D}},32:(Wi,xn,Be)=>{function I(t){return"function"==typeof t}function xe(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const U=xe(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ne(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ct{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(I(r))try{r()}catch(s){e=s instanceof U?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Nn(s)}catch(o){e=e??[],o instanceof U?e=[...e,...o.errors]:e.push(o)}}if(e)throw new U(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Nn(e);else{if(e instanceof ct){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ne(n,e)}remove(e){const{_finalizers:n}=this;n&&Ne(n,e),e instanceof ct&&e._removeParent(this)}}ct.EMPTY=(()=>{const t=new ct;return t.closed=!0,t})();const zt=ct.EMPTY;function Xt(t){return t instanceof ct||t&&"closed"in t&&I(t.remove)&&I(t.add)&&I(t.unsubscribe)}function Nn(t){I(t)?t():t.unsubscribe()}const Je={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},K={setTimeout(t,e,...n){const{delegate:r}=K;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=K;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function re(t){K.setTimeout(()=>{const{onUnhandledError:e}=Je;if(!e)throw t;e(t)})}function Ce(){}const Qe=pt("C",void 0,void 0);function pt(t,e,n){return{kind:t,value:e,error:n}}let Ve=null;function ze(t){if(Je.useDeprecatedSynchronousErrorHandling){const e=!Ve;if(e&&(Ve={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Ve;if(Ve=null,n)throw r}}else t()}class Vn extends ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Xt(e)&&e.add(this)):this.destination=qt}static create(e,n,r){return new pr(e,n,r)}next(e){this.isStopped?Z(function On(t){return pt("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Z(function lt(t){return pt("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Z(Qe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Vt=Function.prototype.bind;function gt(t,e){return Vt.call(t,e)}class Rt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qe(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qe(r)}else qe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qe(n)}}}class pr extends Vn{constructor(e,n,r){let i;if(super(),I(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Je.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&gt(e.next,s),error:e.error&&gt(e.error,s),complete:e.complete&&gt(e.complete,s)}):i=e}this.destination=new Rt(i)}}function qe(t){Je.useDeprecatedSynchronousErrorHandling?function kn(t){Je.useDeprecatedSynchronousErrorHandling&&Ve&&(Ve.errorThrown=!0,Ve.error=t)}(t):re(t)}function Z(t,e){const{onStoppedNotification:n}=Je;n&&K.setTimeout(()=>n(t,e))}const qt={closed:!0,next:Ce,error:function Tn(t){throw t},complete:Ce},Ft="function"==typeof Symbol&&Symbol.observable||"@@observable";function mn(t){return t}function Ti(t){return 0===t.length?mn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let st=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function k(t){return t&&t instanceof Vn||function Ci(t){return t&&I(t.next)&&I(t.error)&&I(t.complete)}(t)&&Xt(t)}(n)?n:new pr(n,r,i);return ze(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Xs(r))((i,s)=>{const o=new pr({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Ft](){return this}pipe(...n){return Ti(n)(this)}toPromise(n){return new(n=Xs(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Xs(t){var e;return null!==(e=t??Je.Promise)&&void 0!==e?e:Promise}const F=xe(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let $=(()=>{class t extends st{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new H(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new F}next(n){ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?zt:(this.currentObservers=null,s.push(n),new ct(()=>{this.currentObservers=null,Ne(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new st;return n.source=this,n}}return t.create=(e,n)=>new H(e,n),t})();class H extends ${constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:zt}}function Q(t){return I(t?.lift)}function L(t){return e=>{if(Q(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(t,e,n,r,i){return new rt(t,e,n,r,i)}class rt extends Vn{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Te(t,e){return L((n,r)=>{let i=0;n.subscribe(pe(r,s=>{r.next(t.call(e,s,i++))}))})}var De=Be(582);const at=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Gt(t){return I(t?.then)}function xt(t){return I(t[Ft])}function Kn(t){return Symbol.asyncIterator&&I(t?.[Symbol.asyncIterator])}function Cn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const gr=function rr(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function xr(t){return I(t?.[gr])}function za(t){return(0,De.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,De.qq)(n.read());if(i)return yield(0,De.qq)(void 0);yield yield(0,De.qq)(r)}}finally{n.releaseLock()}})}function Zi(t){return I(t?.getReader)}function _n(t){if(t instanceof st)return t;if(null!=t){if(xt(t))return function Vo(t){return new st(e=>{const n=t[Ft]();if(I(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(at(t))return function qa(t){return new st(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Gt(t))return function ai(t){return new st(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,re)})}(t);if(Kn(t))return mr(t);if(xr(t))return function Ga(t){return new st(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Zi(t))return function Ki(t){return mr(za(t))}(t)}throw Cn(t)}function mr(t){return new st(e=>{(function ps(t,e){var n,r,i,s;return(0,De.mG)(this,void 0,void 0,function*(){try{for(n=(0,De.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Qn(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Lt(t,e,n=1/0){return I(e)?Lt((r,i)=>Te((s,o)=>e(r,s,i,o))(_n(t(r,i))),n):("number"==typeof e&&(n=e),L((r,i)=>function eo(t,e,n,r,i,s,o,a){const u=[];let d=0,p=0,g=!1;const _=()=>{g&&!u.length&&!d&&e.complete()},v=C=>d<r?E(C):u.push(C),E=C=>{s&&e.next(C),d++;let S=!1;_n(n(C,p++)).subscribe(pe(e,O=>{i?.(O),s?v(O):e.next(O)},()=>{S=!0},void 0,()=>{if(S)try{for(d--;u.length&&d<r;){const O=u.shift();o?Qn(e,o,()=>E(O)):E(O)}_()}catch(O){e.error(O)}}))};return t.subscribe(pe(e,v,()=>{g=!0,_()})),()=>{a?.()}}(r,i,t,n)))}function ui(t=1/0){return Lt(mn,t)}const Dn=new st(t=>t.complete());function gs(t){return t[t.length-1]}function Lo(t){return I(gs(t))?t.pop():void 0}function ms(t){return function Yr(t){return t&&I(t.schedule)}(gs(t))?t.pop():void 0}function ir(t,e=0){return L((n,r)=>{n.subscribe(pe(r,i=>Qn(r,t,()=>r.next(i),e),()=>Qn(r,t,()=>r.complete(),e),i=>Qn(r,t,()=>r.error(i),e)))})}function _r(t,e=0){return L((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function jo(t,e){if(!t)throw new Error("Iterable cannot be null");return new st(n=>{Qn(n,e,()=>{const r=t[Symbol.asyncIterator]();Qn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function A(t,e){return e?function T(t,e){if(null!=t){if(xt(t))return function _s(t,e){return _n(t).pipe(_r(e),ir(e))}(t,e);if(at(t))return function mc(t,e){return new st(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Gt(t))return function Bo(t,e){return _n(t).pipe(_r(e),ir(e))}(t,e);if(Kn(t))return jo(t,e);if(xr(t))return function Wa(t,e){return new st(n=>{let r;return Qn(n,e,()=>{r=t[gr](),Qn(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>I(r?.return)&&r.return()})}(t,e);if(Zi(t))return function D(t,e){return jo(za(t),e)}(t,e)}throw Cn(t)}(t,e):_n(t)}function q(...t){const e=ms(t),n=function Uo(t,e){return"number"==typeof gs(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?_n(r[0]):ui(n)(A(r,e)):Dn}class M extends ${constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function G(...t){return A(t,ms(t))}function Oe(t={}){const{connector:e=(()=>new $),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,d=0,p=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},v=()=>{_(),o=u=void 0,p=g=!1},E=()=>{const C=o;v(),C?.unsubscribe()};return L((C,S)=>{d++,!g&&!p&&_();const O=u=u??e();S.add(()=>{d--,0===d&&!g&&!p&&(a=Ge(E,i))}),O.subscribe(S),!o&&d>0&&(o=new pr({next:R=>O.next(R),error:R=>{g=!0,_(),a=Ge(v,n,R),O.error(R)},complete:()=>{p=!0,_(),a=Ge(v,r),O.complete()}}),_n(C).subscribe(o))})(s)}}function Ge(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new pr({next:()=>{r.unsubscribe(),t()}});return _n(e(...n)).subscribe(r)}function mt(t,e){return L((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(pe(r,u=>{i?.unsubscribe();let d=0;const p=s++;_n(t(u,p)).subscribe(i=pe(r,g=>r.next(e?e(u,g,p,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Wt(t,e=mn){return t=t??An,L((n,r)=>{let i,s=!0;n.subscribe(pe(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function An(t,e){return t===e}function ve(t){for(let e in t)if(t[e]===ve)return e;throw Error("Could not find renamed property on target object.")}function Fn(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ct(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ct).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Di(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const _c=ve({__forward_ref__:ve});function N(t){return t.__forward_ref__=N,t.toString=function(){return Ct(this())},t}function b(t){return X(t)?t():t}function X(t){return"function"==typeof t&&t.hasOwnProperty(_c)&&t.__forward_ref__===N}function Ie(t){return t&&!!t.\u0275providers}const Xe="https://g.co/ng/security#xss";class B extends Error{constructor(e,n){super(function en(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Ee(t){return"string"==typeof t?t:null==t?"":String(t)}function Za(t,e){throw new B(-201,!1)}function yr(t,e){null==t&&function Re(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Se(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function vr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ka(t){return zd(t,Qa)||zd(t,Ig)}function zd(t,e){return t.hasOwnProperty(e)?t[e]:null}function Qi(t){return t&&(t.hasOwnProperty(Ya)||t.hasOwnProperty(qd))?t[Ya]:null}const Qa=ve({\u0275prov:ve}),Ya=ve({\u0275inj:ve}),Ig=ve({ngInjectableDef:ve}),qd=ve({ngInjectorDef:ve});var et=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(et||{});let Ja;function Yn(t){const e=Ja;return Ja=t,e}function wg(t,e,n){const r=Ka(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&et.Optional?null:void 0!==e?e:void Za(Ct(t))}const _t=globalThis;class le{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Se({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Or={},nu="__NG_DI_FLAG__",vc="ngTempTokenPath",pI=/\n/gm,Sg="__source";let vs;function bi(t){const e=vs;return vs=t,e}function mI(t,e=et.Default){if(void 0===vs)throw new B(-203,!1);return null===vs?wg(t,void 0,e):vs.get(t,e&et.Optional?null:void 0,e)}function oe(t,e=et.Default){return(function Eg(){return Ja}()||mI)(b(t),e)}function me(t,e=et.Default){return oe(t,Ec(e))}function Ec(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Zd(t){const e=[];for(let n=0;n<t.length;n++){const r=b(t[n]);if(Array.isArray(r)){if(0===r.length)throw new B(900,!1);let i,s=et.Default;for(let o=0;o<r.length;o++){const a=r[o],u=eb(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(oe(i,s))}else e.push(oe(r))}return e}function Yi(t,e){return t[nu]=e,t.prototype[nu]=e,t}function eb(t){return t[nu]}function Ir(t){return{toString:t}.toString()}var Xi=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Xi||{}),Jr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Jr||{});const ci={},ut=[],wc=ve({\u0275cmp:ve}),Is=ve({\u0275dir:ve}),Qd=ve({\u0275pipe:ve}),ru=ve({\u0275mod:ve}),Si=ve({\u0275fac:ve}),Ho=ve({__NG_ELEMENT_ID__:ve}),Tc=ve({__NG_ENV_ID__:ve});function kr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Cc(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];Dc(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Rg(t){return 3===t||4===t||6===t}function Dc(t){return 64===t.charCodeAt(0)}function Es(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Yd(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Yd(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const Jd="ng-template";function _I(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==kr(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Ac(t){return 4===t.type&&t.value!==Jd}function Xd(t,e,n){return e===(4!==t.type||n?t.value:Jd)}function eh(t,e,n){let r=4;const i=t.attrs||[],s=function Pg(t){for(let e=0;e<t.length;e++)if(Rg(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Xd(t,u,n)||""===u&&1===e.length){if(Er(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!_I(t.attrs,d,n)){if(Er(r))return!1;o=!0}continue}const g=th(8&r?"class":u,i,Ac(t),n);if(-1===g){if(Er(r))return!1;o=!0;continue}if(""!==d){let _;_=g>s?"":i[g+1].toLowerCase();const v=8&r?_:null;if(v&&-1!==kr(v,d,0)||2&r&&d!==_){if(Er(r))return!1;o=!0}}}}else{if(!o&&!Er(r)&&!Er(u))return!1;if(o&&Er(u))continue;o=!1,r=u|1&r}}return Er(r)||o}function Er(t){return 0==(1&t)}function th(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function ih(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function nh(t,e,n=!1){for(let r=0;r<e.length;r++)if(eh(t,e[r],n))return!0;return!1}function Sc(t,e){return t?":not("+e.trim()+")":e}function Mg(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Er(o)&&(e+=Sc(s,i),i=""),r=o,s=s||!Er(r);n++}return""!==i&&(e+=Sc(s,i)),e}function bn(t){return Ir(()=>{const e=Pc(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Xi.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Jr.Emulated,styles:t.styles||ut,_:null,schemas:t.schemas||null,tView:null,id:""};Ng(n);const r=t.dependencies;return n.directiveDefs=zo(r,!1),n.pipeDefs=zo(r,!0),n.id=function ah(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function oh(t){return tt(t)||yn(t)}function vI(t){return null!==t}function wr(t){return Ir(()=>({type:t.type,bootstrap:t.bootstrap||ut,declarations:t.declarations||ut,imports:t.imports||ut,exports:t.exports||ut,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Rc(t,e){if(null==t)return ci;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function Me(t){return Ir(()=>{const e=Pc(t);return Ng(e),e})}function Ln(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function tt(t){return t[wc]||null}function yn(t){return t[Is]||null}function sr(t){return t[Qd]||null}function Vr(t,e){const n=t[ru]||null;if(!n&&!0===e)throw new Error(`Type ${Ct(t)} does not have '\u0275mod' property.`);return n}function Pc(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ci,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ut,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Rc(t.inputs,e),outputs:Rc(t.outputs)}}function Ng(t){t.features?.forEach(e=>e(t))}function zo(t,e){if(!t)return null;const n=e?sr:oh;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(vI)}const tn=0,he=1,je=2,Pt=3,li=4,su=5,Sn=6,qo=7,un=8,Ri=9,Go=10,ke=11,ou=12,Mc=13,Wo=14,Zt=15,au=16,Ts=17,Pi=18,to=19,kg=20,Mi=21,es=22,uu=23,Zo=24,Ke=25,Cs=1,uh=2,xi=7,Ko=9,Un=11;function Fr(t){return Array.isArray(t)&&"object"==typeof t[Cs]}function Tr(t){return Array.isArray(t)&&!0===t[Cs]}function lu(t){return 0!=(4&t.flags)}function no(t){return t.componentOffset>-1}function Nc(t){return 1==(1&t.flags)}function Ni(t){return!!t.template}function Vg(t){return 0!=(512&t[je])}function Oi(t,e){return t.hasOwnProperty(Si)?t[Si]:null}let Bn=null,Ds=!1;function Xr(t){const e=Bn;return Bn=t,e}const cn={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Oc(t){if(!bs(t)||t.dirty){if(!t.producerMustRecompute(t)&&!zg(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Hg(t){t.dirty=!0,function $g(t){if(void 0===t.liveConsumerNode)return;const e=Ds;Ds=!0;try{for(const n of t.liveConsumerNode)n.dirty||Hg(n)}finally{Ds=e}}(t),t.consumerMarkedDirty?.(t)}function hh(t){return t&&(t.nextProducerIndex=0),Xr(t)}function kc(t,e){if(Xr(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(bs(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)As(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function zg(t){Yo(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Oc(n),r!==n.version))return!0}return!1}function hu(t){if(Yo(t),bs(t))for(let e=0;e<t.producerNode.length;e++)As(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function As(t,e){if(function Vc(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Yo(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)As(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Yo(i),i.producerIndexOfThis[r]=e}}function bs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Yo(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Wg=null;const Qg=()=>{},AI=(()=>({...cn,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Qg}))();class bI{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Lr(){return Yg}function Yg(t){return t.type.prototype.ngOnChanges&&(t.setInput=RI),SI}function SI(){const t=Jg(this),e=t?.current;if(e){const n=t.previous;if(n===ci)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function RI(t,e,n,r){const i=this.declaredInputs[n],s=Jg(t)||function mh(t,e){return t[Lc]=e}(t,{previous:ci,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new bI(u&&u.currentValue,e,a===ci),t[r]=e}Lr.ngInherit=!0;const Lc="__ngSimpleChanges__";function Jg(t){return t[Lc]||null}const ki=function(t,e,n){};function Et(t){for(;Array.isArray(t);)t=t[tn];return t}function Xo(t,e){return Et(e[t])}function Rn(t,e){return Et(e[t.index])}function Bc(t,e){return t.data[e]}function ea(t,e){return t[e]}function Ur(t,e){const n=e[t];return Fr(n)?n:n[tn]}function Ss(t,e){return null==e?null:t[e]}function em(t){t[Ts]=0}function Eh(t){1024&t[je]||(t[je]|=1024,jc(t,1))}function tm(t){1024&t[je]&&(t[je]&=-1025,jc(t,-1))}function jc(t,e){let n=t[Pt];if(null===n)return;n[su]+=e;let r=n;for(n=n[Pt];null!==n&&(1===e&&1===r[su]||-1===e&&0===r[su]);)n[su]+=e,r=n,n=n[Pt]}const Pe={lFrame:lm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Hc(){return Pe.bindingsEnabled}function Y(){return Pe.lFrame.lView}function nt(){return Pe.lFrame.tView}function vn(){let t=um();for(;null!==t&&64===t.type;)t=t.parent;return t}function um(){return Pe.lFrame.currentTNode}function ei(t,e){const n=Pe.lFrame;n.currentTNode=t,n.isParent=e}function Dh(){return Pe.lFrame.isParent}function jn(){const t=Pe.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function oo(){return Pe.lFrame.bindingIndex++}function Rh(t,e){const n=Pe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ph(e)}function Ph(t){Pe.lFrame.currentDirectiveIndex=t}function xh(t){Pe.lFrame.currentQueryIndex=t}function FI(t){const e=t[he];return 2===e.type?e.declTNode:1===e.type?t[Sn]:null}function Nh(t,e,n){if(n&et.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&et.Host||(i=FI(s),null===i||(s=s[Wo],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Pe.lFrame=_u();return r.currentTNode=e,r.lView=t,!0}function Oh(t){const e=_u(),n=t[he];Pe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function _u(){const t=Pe.lFrame,e=null===t?null:t.child;return null===e?lm(t):e}function lm(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function dm(){const t=Pe.lFrame;return Pe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const hm=dm;function kh(){const t=dm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function or(){return Pe.lFrame.selectedIndex}function ao(t){Pe.lFrame.selectedIndex=t}function Nt(){const t=Pe.lFrame;return Bc(t.tView,t.selectedIndex)}let Vh=!0;function Gc(){return Vh}function Ps(t){Vh=t}function Wc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:p}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),null!=p&&(t.destroyHooks??=[]).push(n,p)}}function Zc(t,e,n){pm(t,e,3,n)}function ta(t,e,n,r){(3&t[je])===n&&pm(t,e,n,r)}function yu(t,e){let n=t[je];(3&n)===e&&(n&=8191,n+=1,t[je]=n)}function pm(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Ts]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Ts]+=65536),(a<s||-1==s)&&(qI(t,n,e,u),t[Ts]=(4294901760&t[Ts])+u+2),u++}function Kc(t,e){ki(4,t,e);const n=Xr(null);try{e.call(t)}finally{Xr(n),ki(5,t,e)}}function qI(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[je]>>13<t[Ts]>>16&&(3&t[je])===e&&(t[je]+=8192,Kc(a,s)):Kc(a,s)}const uo=-1;class vu{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Lh(t){return t!==uo}function Iu(t){return 32767&t}function Eu(t,e){let n=function ZI(t){return t>>16}(t),r=e;for(;n>0;)r=r[Wo],n--;return r}let Uh=!0;function wu(t){const e=Uh;return Uh=t,e}const KI=255,Ms=5;let QI=0;const Fi={};function Yc(t,e){const n=ym(t,e);if(-1!==n)return n;const r=e[he];r.firstCreatePass&&(t.injectorIndex=e.length,Tu(r.data,t),Tu(e,null),Tu(r.blueprint,null));const i=Jc(t,e),s=t.injectorIndex;if(Lh(i)){const o=Iu(i),a=Eu(i,e),u=a[he].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function Tu(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ym(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Jc(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=Cm(i),null===r)return uo;if(n++,i=i[Wo],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return uo}function Cu(t,e,n){!function Bh(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ho)&&(r=n[Ho]),null==r&&(r=n[Ho]=QI++);const i=r&KI;e.data[t+(i>>Ms)]|=1<<i}(t,e,n)}function vm(t,e,n){if(n&et.Optional||void 0!==t)return t;Za()}function Xc(t,e,n,r){if(n&et.Optional&&void 0===r&&(r=null),!(n&(et.Self|et.Host))){const i=t[Ri],s=Yn(void 0);try{return i?i.get(e,r,n&et.Optional):wg(e,r,n&et.Optional)}finally{Yn(s)}}return vm(r,0,n)}function Im(t,e,n,r=et.Default,i){if(null!==t){if(2048&e[je]&&!(r&et.Self)){const o=function eE(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[je]&&!(512&o[je]);){const a=Em(s,o,n,r|et.Self,Fi);if(a!==Fi)return a;let u=s.parent;if(!u){const d=o[kg];if(d){const p=d.get(n,Fi,r);if(p!==Fi)return p}u=Cm(o),o=o[Wo]}s=u}return i}(t,e,n,r,Fi);if(o!==Fi)return o}const s=Em(t,e,n,r,Fi);if(s!==Fi)return s}return Xc(e,n,r,i)}function Em(t,e,n,r,i){const s=function wm(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ho)?t[Ho]:void 0;return"number"==typeof e?e>=0?e&KI:XI:e}(n);if("function"==typeof s){if(!Nh(e,t,r))return r&et.Host?vm(i,0,r):Xc(e,n,r,i);try{let o;if(o=s(r),null!=o||r&et.Optional)return o;Za()}finally{hm()}}else if("number"==typeof s){let o=null,a=ym(t,e),u=uo,d=r&et.Host?e[Zt][Sn]:null;for((-1===a||r&et.SkipSelf)&&(u=-1===a?Jc(t,e):e[a+8],u!==uo&&Tm(r,!1)?(o=e[he],a=Iu(u),e=Eu(u,e)):a=-1);-1!==a;){const p=e[he];if(tl(s,a,p.data)){const g=JI(a,e,n,o,r,d);if(g!==Fi)return g}u=e[a+8],u!==uo&&Tm(r,e[he].data[a+8]===d)&&tl(s,a,e)?(o=p,a=Iu(u),e=Eu(u,e)):a=-1}}return i}function JI(t,e,n,r,i,s){const o=e[he],a=o.data[t+8],p=function el(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,p=s>>20,_=i?a+p:t.directiveEnd;for(let v=r?a:a+p;v<_;v++){const E=o[v];if(v<u&&n===E||v>=u&&E.type===n)return v}if(i){const v=o[u];if(v&&Ni(v)&&v.type===n)return u}return null}(a,o,n,null==r?no(a)&&Uh:r!=o&&0!=(3&a.type),i&et.Host&&s===a);return null!==p?co(e,o,p,a):Fi}function co(t,e,n,r){let i=t[n];const s=e.data;if(function Fh(t){return t instanceof vu}(i)){const o=i;o.resolving&&function $o(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new B(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Ye(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ee(t)}(s[n]));const a=wu(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Yn(o.injectImpl):null;Nh(t,r,et.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function zI(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Yg(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==d&&Yn(d),wu(a),o.resolving=!1,hm()}}return i}function tl(t,e,n){return!!(n[e+(t>>Ms)]&1<<t)}function Tm(t,e){return!(t&et.Self||t&et.Host&&e)}class $n{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Im(this._tNode,this._lView,e,Ec(r),n)}}function XI(){return new $n(vn(),Y())}function Hn(t){return Ir(()=>{const e=t.prototype.constructor,n=e[Si]||na(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[Si]||na(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function na(t){return X(t)?()=>{const e=na(b(t));return e&&e()}:Oi(t)}function Cm(t){const e=t[he],n=e.type;return 2===n?e.declTNode:1===n?t[Sn]:null}const ra="__parameters__";function Li(t,e,n){return Ir(()=>{const r=function $h(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,p){const g=u.hasOwnProperty(ra)?u[ra]:Object.defineProperty(u,ra,{value:[]})[ra];for(;g.length<=p;)g.push(null);return(g[p]=g[p]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function sa(t,e){t.forEach(n=>Array.isArray(n)?sa(n,e):e(n))}function rl(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function oa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function jr(t,e,n){let r=aa(t,e);return r>=0?t[1|r]=n:(r=~r,function Ns(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Hh(t,e){const n=aa(t,e);if(n>=0)return t[1|n]}function aa(t,e){return function ar(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const Ru=Yi(Li("Optional"),8),ol=Yi(Li("SkipSelf"),4);function Fm(t){return 128==(128&t.flags)}var ca=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ca||{});const hE=new Map;let DU=0;const pE="__ngContext__";function Cr(t,e){Fr(e)?(t[pE]=e[to],function bU(t){hE.set(t[to],t)}(e)):t[pE]=e}let gE;function mE(t,e){return gE(t,e)}function Qh(t){const e=t[Pt];return Tr(e)?e[Pt]:e}function jb(t){return Hb(t[ou])}function $b(t){return Hb(t[li])}function Hb(t){for(;null!==t&&!Tr(t);)t=t[li];return t}function ll(t,e,n,r,i){if(null!=r){let s,o=!1;Tr(r)?s=r:Fr(r)&&(o=!0,r=r[tn]);const a=Et(r);0===t&&null!==n?null==i?Wb(e,n,a):Mu(e,n,a,i||null,!0):1===t&&null!==n?Mu(e,n,a,i||null,!0):2===t?function zm(t,e,n){const r=$m(t,e);r&&function GU(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function KU(t,e,n,r,i){const s=n[xi];s!==Et(n)&&ll(e,t,r,s,i);for(let a=Un;a<n.length;a++){const u=n[a];Jh(u[he],u,t,e,r,s)}}(e,t,s,n,i)}}function Bm(t,e,n){return t.createElement(e,n)}function qb(t,e){const n=t[Ko],r=n.indexOf(e);tm(e),n.splice(r,1)}function jm(t,e){if(t.length<=Un)return;const n=Un+e,r=t[n];if(r){const i=r[au];null!==i&&i!==t&&qb(i,r),e>0&&(t[n-1][li]=r[li]);const s=oa(t,Un+e);!function LU(t,e){Jh(t,e,e[ke],2,null,null),e[tn]=null,e[Sn]=null}(r[he],r);const o=s[Pi];null!==o&&o.detachView(s[he]),r[Pt]=null,r[li]=null,r[je]&=-129}return r}function yE(t,e){if(!(256&e[je])){const n=e[ke];e[uu]&&hu(e[uu]),e[Zo]&&hu(e[Zo]),n.destroyNode&&Jh(t,e,n,3,null,null),function jU(t){let e=t[ou];if(!e)return vE(t[he],t);for(;e;){let n=null;if(Fr(e))n=e[ou];else{const r=e[Un];r&&(n=r)}if(!n){for(;e&&!e[li]&&e!==t;)Fr(e)&&vE(e[he],e),e=e[Pt];null===e&&(e=t),Fr(e)&&vE(e[he],e),n=e&&e[li]}e=n}}(e)}}function vE(t,e){if(!(256&e[je])){e[je]&=-129,e[je]|=256,function qU(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof vu)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];ki(4,a,u);try{u.call(a)}finally{ki(5,a,u)}}else{ki(4,i,s);try{s.call(i)}finally{ki(5,i,s)}}}}}(t,e),function zU(t,e){const n=t.cleanup,r=e[qo];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[qo]=null);const i=e[Mi];if(null!==i){e[Mi]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[he].type&&e[ke].destroy();const n=e[au];if(null!==n&&Tr(e[Pt])){n!==e[Pt]&&qb(n,e);const r=e[Pi];null!==r&&r.detachView(t)}!function SU(t){hE.delete(t[to])}(e)}}function IE(t,e,n){return function Gb(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[tn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Jr.None||s===Jr.Emulated)return null}return Rn(r,n)}}(t,e.parent,n)}function Mu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Wb(t,e,n){t.appendChild(e,n)}function Zb(t,e,n,r,i){null!==r?Mu(t,e,n,r,i):Wb(t,e,n)}function $m(t,e){return t.parentNode(e)}let EE,qm,DE,Gm,Yb=function Qb(t,e,n){return 40&t.type?Rn(t,n):null};function Hm(t,e,n,r){const i=IE(t,r,e),s=e[ke],a=function Kb(t,e,n){return Yb(t,e,n)}(r.parent||e[Sn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)Zb(s,i,n[u],a,!1);else Zb(s,i,n,a,!1);void 0!==EE&&EE(s,r,e,n,i)}function Yh(t,e){if(null!==e){const n=e.type;if(3&n)return Rn(e,t);if(4&n)return wE(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Yh(t,r);{const i=t[e.index];return Tr(i)?wE(-1,i):Et(i)}}if(32&n)return mE(e,t)()||Et(t[e.index]);{const r=Xb(t,e);return null!==r?Array.isArray(r)?r[0]:Yh(Qh(t[Zt]),r):Yh(t,e.next)}}return null}function Xb(t,e){return null!==e?t[Zt][Sn].projection[e.projection]:null}function wE(t,e){const n=Un+t+1;if(n<e.length){const r=e[n],i=r[he].firstChild;if(null!==i)return Yh(r,i)}return e[xi]}function TE(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Cr(Et(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)TE(t,e,n.child,r,i,s,!1),ll(e,t,i,a,s);else if(32&u){const d=mE(n,r);let p;for(;p=d();)ll(e,t,i,p,s);ll(e,t,i,a,s)}else 16&u?tS(t,e,r,n,i,s):ll(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Jh(t,e,n,r,i,s){TE(n,r,t.firstChild,e,i,s,!1)}function tS(t,e,n,r,i,s){const o=n[Zt],u=o[Sn].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)ll(e,t,i,u[d],s);else{let d=u;const p=o[Pt];Fm(r)&&(d.flags|=128),TE(t,e,d,p,i,s,!0)}}function nS(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function rS(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Cc(t,e,r),null!==i&&nS(t,e,i),null!==s&&function YU(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function dl(t){return function CE(){if(void 0===qm&&(qm=null,_t.trustedTypes))try{qm=_t.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return qm}()?.createHTML(t)||t}function hl(){if(void 0!==DE)return DE;if(typeof document<"u")return document;throw new B(210,!1)}function AE(){if(void 0===Gm&&(Gm=null,_t.trustedTypes))try{Gm=_t.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Gm}function iS(t){return AE()?.createHTML(t)||t}function oS(t){return AE()?.createScriptURL(t)||t}class aS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xe})`}}function la(t){return t instanceof aS?t.changingThisBreaksApplicationSecurity:t}function Xh(t,e){const n=function aB(t){return t instanceof aS&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Xe})`)}return n===e}class uB{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(dl(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class cB{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=dl(e),n}}const dB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function bE(t){return(t=String(t)).match(dB)?t:"unsafe:"+t}function ho(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function ef(...t){const e={};for(const n of t)for(const r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}const cS=ho("area,br,col,hr,img,wbr"),lS=ho("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dS=ho("rp,rt"),SE=ef(cS,ef(lS,ho("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ef(dS,ho("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ef(dS,lS)),RE=ho("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hS=ef(RE,ho("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ho("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),hB=ho("script,style,template");class fB{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!SE.hasOwnProperty(n))return this.sanitizedSomething=!0,!hB.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!hS.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;RE[a]&&(u=bE(u)),this.buf.push(" ",o,'="',fS(u),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();SE.hasOwnProperty(n)&&!cS.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(fS(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const pB=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gB=/([^\#-~ |!])/g;function fS(t){return t.replace(/&/g,"&amp;").replace(pB,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(gB,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Wm;function PE(t){return"content"in t&&function _B(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var fl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(fl||{});function pS(t){const e=tf();return e?iS(e.sanitize(fl.HTML,t)||""):Xh(t,"HTML")?iS(la(t)):function mB(t,e){let n=null;try{Wm=Wm||function uS(t){const e=new cB(t);return function lB(){try{return!!(new window.DOMParser).parseFromString(dl(""),"text/html")}catch{return!1}}()?new uB(e):e}(t);let r=e?String(e):"";n=Wm.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=Wm.getInertBodyElement(r)}while(r!==s);return dl((new fB).sanitizeChildren(PE(n)||n))}finally{if(n){const r=PE(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}(hl(),Ee(t))}function Zm(t){const e=tf();return e?e.sanitize(fl.URL,t)||"":Xh(t,"URL")?la(t):bE(Ee(t))}function gS(t){const e=tf();if(e)return oS(e.sanitize(fl.RESOURCE_URL,t)||"");if(Xh(t,"ResourceURL"))return oS(la(t));throw new B(904,!1)}function tf(){const t=Y();return t&&t[Go].sanitizer}const nf=new le("ENVIRONMENT_INITIALIZER"),_S=new le("INJECTOR",-1),yS=new le("INJECTOR_DEF_TYPES");class ME{get(e,n=Or){if(n===Or){const r=new Error(`NullInjectorError: No provider for ${Ct(e)}!`);throw r.name="NullInjectorError",r}return n}}function TB(...t){return{\u0275providers:IS(0,t),\u0275fromNgModule:!0}}function IS(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return sa(e,o=>{const a=o;Km(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&ES(i,s),n}function ES(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];xE(i,s=>{e(s,r)})}}function Km(t,e,n,r){if(!(t=b(t)))return!1;let i=null,s=Qi(t);const o=!s&&tt(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=Qi(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)Km(d,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{sa(s.imports,p=>{Km(p,e,n,r)&&(d||=[],d.push(p))})}finally{}void 0!==d&&ES(d,e)}if(!a){const d=Oi(i)||(()=>new i);e({provide:i,useFactory:d,deps:ut},i),e({provide:yS,useValue:i,multi:!0},i),e({provide:nf,useValue:()=>oe(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=t;xE(u,p=>{e(p,d)})}}}return i!==t&&void 0!==t.providers}function xE(t,e){for(let n of t)Ie(n)&&(n=n.\u0275providers),Array.isArray(n)?xE(n,e):e(n)}const CB=ve({provide:String,useValue:ve});function NE(t){return null!==t&&"object"==typeof t&&CB in t}function xu(t){return"function"==typeof t}const OE=new le("Set Injector scope."),Qm={},AB={};let kE;function Ym(){return void 0===kE&&(kE=new ME),kE}class Ui{}class pl extends Ui{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,FE(e,o=>this.processProvider(o)),this.records.set(_S,gl(void 0,this)),i.has("environment")&&this.records.set(Ui,gl(void 0,this));const s=this.records.get(OE);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(yS.multi,ut,et.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=bi(this),r=Yn(void 0);try{return e()}finally{bi(n),Yn(r)}}get(e,n=Or,r=et.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Tc))return e[Tc](this);r=Ec(r);const s=bi(this),o=Yn(void 0);try{if(!(r&et.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function MB(t){return"function"==typeof t||"object"==typeof t&&t instanceof le}(e)&&Ka(e);u=d&&this.injectableDefInScope(d)?gl(VE(e),Qm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&et.Self?Ym():this.parent).get(e,n=r&et.Optional&&n===Or?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[vc]=a[vc]||[]).unshift(Ct(e)),s)throw a;return function Kd(t,e,n,r){const i=t[vc];throw e[Sg]&&i.unshift(e[Sg]),t.message=function Ji(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Ct(e);if(Array.isArray(e))i=e.map(Ct).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ct(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(pI,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[vc]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Yn(o),bi(s)}}resolveInjectorInitializers(){const e=bi(this),n=Yn(void 0);try{const i=this.get(nf.multi,ut,et.Self);for(const s of i)s()}finally{bi(e),Yn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Ct(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new B(205,!1)}processProvider(e){let n=xu(e=b(e))?e:b(e&&e.provide);const r=function SB(t){return NE(t)?gl(void 0,t.useValue):gl(CS(t),Qm)}(e);if(xu(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=gl(void 0,Qm,!0),i.factory=()=>Zd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Qm&&(n.value=AB,n.value=n.factory()),"object"==typeof n.value&&n.value&&function PB(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=b(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function VE(t){const e=Ka(t),n=null!==e?e.factory:Oi(t);if(null!==n)return n;if(t instanceof le)throw new B(204,!1);if(t instanceof Function)return function bB(t){const e=t.length;if(e>0)throw function bu(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new B(204,!1);const n=function hI(t){return t&&(t[Qa]||t[Ig])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new B(204,!1)}function CS(t,e,n){let r;if(xu(t)){const i=b(t);return Oi(i)||VE(i)}if(NE(t))r=()=>b(t.useValue);else if(function TS(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Zd(t.deps||[]));else if(function wS(t){return!(!t||!t.useExisting)}(t))r=()=>oe(b(t.useExisting));else{const i=b(t&&(t.useClass||t.provide));if(!function RB(t){return!!t.deps}(t))return Oi(i)||VE(i);r=()=>new i(...Zd(t.deps))}return r}function gl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function FE(t,e){for(const n of t)Array.isArray(n)?FE(n,e):n&&Ie(n)?FE(n.\u0275providers,e):e(n)}const Jm=new le("AppId",{providedIn:"root",factory:()=>xB}),xB="ng",DS=new le("Platform Initializer"),fo=new le("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),AS=new le("CSP nonce",{providedIn:"root",factory:()=>hl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let bS=(t,e,n)=>null;function qE(t,e,n=!1){return bS(t,e,n)}class $B{}class PS{}class zB{resolveComponentFactory(e){throw function HB(t){const e=Error(`No component factory found for ${Ct(t)}.`);return e.ngComponent=t,e}(e)}}let i_=(()=>{class t{static#e=this.NULL=new zB}return t})();function qB(){return yl(vn(),Y())}function yl(t,e){return new hi(Rn(t,e))}let hi=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=qB}return t})();class xS{}let po=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function WB(){const t=Y(),n=Ur(vn().index,t);return(Fr(n)?n:t)[ke]}()}return t})(),ZB=(()=>{class t{static#e=this.\u0275prov=Se({token:t,providedIn:"root",factory:()=>null})}return t})();class vl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const NS=new vl("16.2.12"),ZE={};function FS(t,e=null,n=null,r){const i=LS(t,e,n,r);return i.resolveInjectorInitializers(),i}function LS(t,e=null,n=null,r,i=new Set){const s=[n||ut,TB(t)];return r=r||("object"==typeof t?void 0:Ct(t)),new pl(s,e||Ym(),r||null,i)}let fi=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Or;static#t=this.NULL=new ME;static create(n,r){if(Array.isArray(n))return FS({name:""},r,n,"");{const i=n.name??"";return FS({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Se({token:t,providedIn:"any",factory:()=>oe(_S)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function QE(t){return t.ngOriginalError}class go{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&QE(e);for(;n&&QE(n);)n=QE(n);return n||null}}function JE(t){return e=>{setTimeout(t,void 0,e)}}const dn=class tj extends ${constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=JE(s),i&&(i=JE(i)),o&&(o=JE(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof ct&&e.add(a),a}};function BS(...t){}class wt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new dn(!1),this.onMicrotaskEmpty=new dn(!1),this.onStable=new dn(!1),this.onError=new dn(!1),typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function nj(){const t="function"==typeof _t.requestAnimationFrame;let e=_t[t?"requestAnimationFrame":"setTimeout"],n=_t[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function sj(t){const e=()=>{!function ij(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(_t,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ew(t),t.isCheckStableRunning=!0,XE(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ew(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function aj(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return jS(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),$S(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return jS(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),$S(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,ew(t),XE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wt.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(wt.isInAngularZone())throw new B(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,rj,BS,BS);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const rj={};function XE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ew(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function jS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function $S(t){t._nesting--,XE(t)}class oj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new dn,this.onMicrotaskEmpty=new dn,this.onStable=new dn,this.onError=new dn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const HS=new le("",{providedIn:"root",factory:zS});function zS(){const t=me(wt);let e=!0;return q(new st(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new st(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{wt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{wt.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Oe()))}function mo(t){return t instanceof Function?t():t}let tw=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Se({token:t,providedIn:"root",factory:()=>new t})}return t})();function af(t){for(;t;){t[je]|=64;const e=Qh(t);if(Vg(t)&&!e)return t;t=e}return null}const KS=new le("",{providedIn:"root",factory:()=>!1});let o_=null;function XS(t,e){return t[e]??nR()}function eR(t,e){const n=nR();n.producerNode?.length&&(t[e]=o_,n.lView=t,o_=tR())}const _j={...cn,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{af(t.lView)},lView:null};function tR(){return Object.create(_j)}function nR(){return o_??=tR(),o_}const He={};function dt(t){rR(nt(),Y(),or()+t,!1)}function rR(t,e,n,r){if(!r)if(3==(3&e[je])){const s=t.preOrderCheckHooks;null!==s&&Zc(e,s,n)}else{const s=t.preOrderHooks;null!==s&&ta(e,s,0,n)}ao(n)}function te(t,e=et.Default){const n=Y();return null===n?oe(t,e):Im(vn(),n,b(t),e)}function a_(t,e,n,r,i,s,o,a,u,d,p){const g=e.blueprint.slice();return g[tn]=i,g[je]=140|r,(null!==d||t&&2048&t[je])&&(g[je]|=2048),em(g),g[Pt]=g[Wo]=t,g[un]=n,g[Go]=o||t&&t[Go],g[ke]=a||t&&t[ke],g[Ri]=u||t&&t[Ri]||null,g[Sn]=s,g[to]=function AU(){return DU++}(),g[es]=p,g[kg]=d,g[Zt]=2==e.type?t[Zt]:g,g}function wl(t,e,n,r,i){let s=t.data[e];if(null===s)s=function nw(t,e,n,r,i){const s=um(),o=Dh(),u=t.data[e]=function Dj(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Rs(){return null!==Pe.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function kI(){return Pe.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function gu(){const t=Pe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ei(s,!0),s}function uf(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function sR(t,e,n,r,i){const s=XS(e,uu),o=or(),a=2&r;try{ao(-1),a&&e.length>Ke&&rR(t,e,Ke,!1),ki(a?2:0,i);const d=a?s:null,p=hh(d);try{null!==d&&(d.dirty=!1),n(r,i)}finally{kc(d,p)}}finally{a&&null===e[uu]&&eR(e,uu),ao(o),ki(a?3:1,i)}}function rw(t,e,n){if(lu(e)){const r=Xr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Xr(r)}}}function iw(t,e,n){Hc()&&(function xj(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;no(n)&&function Uj(t,e,n){const r=Rn(e,t),i=oR(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=u_(t,a_(t,i,null,o,r,e,null,t[Go].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Yc(n,e),Cr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],d=co(e,t,a,n);Cr(d,e),null!==o&&Bj(0,a-i,d,u,0,o),Ni(u)&&(Ur(n.index,e)[un]=co(e,t,a,n))}}(t,e,n,Rn(n,e)),64==(64&n.flags)&&dR(t,e,n))}function sw(t,e,n=Rn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function oR(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ow(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ow(t,e,n,r,i,s,o,a,u,d,p){const g=Ke+r,_=g+i,v=function vj(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:He);return n}(g,_),E="function"==typeof d?d():d;return v[he]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:E,incompleteFirstPass:!1,ssrId:p}}let aR=t=>null;function uR(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?cR(n,e,i,s):r.hasOwnProperty(i)&&cR(n,e,r[i],s)}return n}function cR(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function pi(t,e,n,r,i,s,o,a){const u=Rn(e,n);let p,d=e.inputs;!a&&null!=d&&(p=d[r])?(dw(t,n,p,r,i),no(e)&&function Sj(t,e){const n=Ur(e,t);16&n[je]||(n[je]|=64)}(n,e.index)):3&e.type&&(r=function bj(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function aw(t,e,n,r){if(Hc()){const i=null===r?null:{"":-1},s=function Oj(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(nh(e,o.selectors,!1))if(r||(r=[]),Ni(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),uw(t,e,a.length)}else r.unshift(o),uw(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&lR(t,e,n,o,i,a),i&&function kj(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new B(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Es(n.mergedAttrs,n.attrs)}function lR(t,e,n,r,i,s){for(let d=0;d<r.length;d++)Cu(Yc(n,e),t,r[d].type);!function Fj(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let d=0;d<r.length;d++){const p=r[d];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,u=uf(t,e,r.length,null);for(let d=0;d<r.length;d++){const p=r[d];n.mergedAttrs=Es(n.mergedAttrs,p.hostAttrs),Lj(t,n,e,u,p),Vj(u,p,i),null!==p.contentQueries&&(n.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(n.flags|=64);const g=p.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function Aj(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,d=null;for(let p=e.directiveStart;p<i;p++){const g=s[p],_=n?n.get(g):null,E=_?_.outputs:null;u=uR(g.inputs,p,u,_?_.inputs:null),d=uR(g.outputs,p,d,E);const C=null===u||null===o||Ac(e)?null:jj(u,p,o);a.push(C)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(t,n,s)}function dR(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function VI(){return Pe.lFrame.currentDirectiveIndex}();try{ao(s);for(let a=r;a<i;a++){const u=t.data[a],d=e[a];Ph(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Nj(u,d)}}finally{ao(-1),Ph(o)}}function Nj(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function uw(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Vj(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ni(e)&&(n[""]=t)}}function Lj(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Oi(i.type)),o=new vu(s,Ni(i),te);t.blueprint[r]=o,n[r]=o,function Pj(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function Mj(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,uf(t,n,i.hostVars,He),i)}function Os(t,e,n,r,i,s){const o=Rn(t,e);!function cw(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?Ee(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[ke],o,s,t.value,n,r,i)}function Bj(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)hR(r,n,o[a++],o[a++],o[a++])}function hR(t,e,n,r,i){const s=Xr(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{Xr(s)}}function jj(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function fR(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function pR(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];xh(n[r]),o.contentQueries(2,e[s],s)}}}function u_(t,e){return t[ou]?t[Mc][li]=e:t[ou]=e,t[Mc]=e,e}function lw(t,e,n){xh(0);const r=Xr(null);try{e(t,n)}finally{Xr(r)}}function yR(t,e){const n=t[Ri],r=n?n.get(go,null):null;r&&r.handleError(e)}function dw(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];hR(t.data[o],e[o],r,a,i)}}function $j(t,e){const n=Ur(e,t),r=n[he];!function Hj(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[tn];null!==i&&null===n[es]&&(n[es]=qE(i,n[Ri])),hw(r,n,n[un])}function hw(t,e,n){Oh(e);try{const r=t.viewQuery;null!==r&&lw(1,r,n);const i=t.template;null!==i&&sR(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&pR(t,e),t.staticViewQueries&&lw(2,t.viewQuery,n);const s=t.components;null!==s&&function zj(t,e){for(let n=0;n<e.length;n++)$j(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[je]&=-5,kh()}}let vR=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function DI(t,e,n){const r=Object.create(AI);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Hg(r),run:()=>{if(r.dirty=!1,r.hasRun&&!zg(r))return;r.hasRun=!0;const o=hh(r);try{r.cleanupFn(),r.cleanupFn=Qg,r.fn(i)}finally{kc(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Se({token:t,providedIn:"root",factory:()=>new t})}return t})();function c_(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Di(i,a):2==s&&(r=Di(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function cf(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(Et(s)),Tr(s)&&IR(s,r);const o=n.type;if(8&o)cf(t,e,n.child,r);else if(32&o){const a=mE(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=Xb(e,n);if(Array.isArray(a))r.push(...a);else{const u=Qh(e[Zt]);cf(u[he],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function IR(t,e){for(let n=Un;n<t.length;n++){const r=t[n],i=r[he].firstChild;null!==i&&cf(r[he],r,i,e)}t[xi]!==t[tn]&&e.push(t[xi])}function l_(t,e,n,r=!0){const i=e[Go],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{ER(t,e,t.template,n)}catch(u){throw r&&yR(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function ER(t,e,n,r){const i=e[je];if(256!=(256&i)){e[Go].effectManager?.flush(),Oh(e);try{em(e),function bh(t){return Pe.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&sR(t,e,n,2,r);const o=3==(3&i);if(o){const d=t.preOrderCheckHooks;null!==d&&Zc(e,d,null)}else{const d=t.preOrderHooks;null!==d&&ta(e,d,0,null),yu(e,0)}if(function Wj(t){for(let e=jb(t);null!==e;e=$b(e)){if(!e[uh])continue;const n=e[Ko];for(let r=0;r<n.length;r++){Eh(n[r])}}}(e),wR(e,2),null!==t.contentQueries&&pR(t,e),o){const d=t.contentCheckHooks;null!==d&&Zc(e,d)}else{const d=t.contentHooks;null!==d&&ta(e,d,1),yu(e,1)}!function yj(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=XS(e,Zo);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)ao(~s);else{const o=s,a=n[++i],u=n[++i];Rh(a,o),r.dirty=!1;const d=hh(r);try{u(2,e[o])}finally{kc(r,d)}}}}finally{null===e[Zo]&&eR(e,Zo),ao(-1)}}(t,e);const a=t.components;null!==a&&CR(e,a,0);const u=t.viewQuery;if(null!==u&&lw(2,u,r),o){const d=t.viewCheckHooks;null!==d&&Zc(e,d)}else{const d=t.viewHooks;null!==d&&ta(e,d,2),yu(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[je]&=-73,tm(e)}finally{kh()}}}function wR(t,e){for(let n=jb(t);null!==n;n=$b(n))for(let r=Un;r<n.length;r++)TR(n[r],e)}function Zj(t,e,n){TR(Ur(e,t),n)}function TR(t,e){if(!function Ih(t){return 128==(128&t[je])}(t))return;const n=t[he],r=t[je];if(80&r&&0===e||1024&r||2===e)ER(n,t,n.template,t[un]);else if(t[su]>0){wR(t,1);const i=n.components;null!==i&&CR(t,i,1)}}function CR(t,e,n){for(let r=0;r<e.length;r++)Zj(t,e[r],n)}class lf{get rootNodes(){const e=this._lView,n=e[he];return cf(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[un]}set context(e){this._lView[un]=e}get destroyed(){return 256==(256&this._lView[je])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Pt];if(Tr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(jm(e,r),oa(n,r))}this._attachedToViewContainer=!1}yE(this._lView[he],this._lView)}onDestroy(e){!function nm(t,e){if(256==(256&t[je]))throw new B(911,!1);null===t[Mi]&&(t[Mi]=[]),t[Mi].push(e)}(this._lView,e)}markForCheck(){af(this._cdRefInjectingView||this._lView)}detach(){this._lView[je]&=-129}reattach(){this._lView[je]|=128}detectChanges(){l_(this._lView[he],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function BU(t,e){Jh(t,e,e[ke],2,null,null)}(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e}}class Kj extends lf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;l_(e[he],e,e[un],!1)}checkNoChanges(){}get context(){return null}}class DR extends i_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=tt(e);return new df(n,this.ngModule)}}function AR(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class Yj{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ec(r);const i=this.injector.get(e,ZE,r);return i!==ZE||n===ZE?i:this.parentInjector.get(e,n,r)}}class df extends PS{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=AR(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return AR(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function sh(t){return t.map(Mg).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Ui?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Yj(e,s):e,a=o.get(xS,null);if(null===a)throw new B(407,!1);const g={rendererFactory:a,sanitizer:o.get(ZB,null),effectManager:o.get(vR,null),afterRenderEventManager:o.get(tw,null)},_=a.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",E=r?function Ij(t,e,n,r){const s=r.get(KS,!1)||n===Jr.ShadowDom,o=t.selectRootElement(e,s);return function Ej(t){aR(t)}(o),o}(_,r,this.componentDef.encapsulation,o):Bm(_,v,function Qj(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(v)),O=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let R=null;null!==E&&(R=qE(E,o,!0));const j=ow(0,null,null,1,0,null,null,null,null,null,null),ne=a_(null,j,null,O,null,null,g,_,o,null,R);let de,Ue;Oh(ne);try{const It=this.componentDef;let Zn,gg=null;It.findHostDirectiveDefs?(Zn=[],gg=new Map,It.findHostDirectiveDefs(It,Zn,gg),Zn.push(It)):Zn=[It];const sI=function Xj(t,e){const n=t[he],r=Ke;return t[r]=e,wl(n,r,2,"#host",null)}(ne,E),NJ=function e$(t,e,n,r,i,s,o){const a=i[he];!function t$(t,e,n,r){for(const i of t)e.mergedAttrs=Es(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(c_(e,e.mergedAttrs,!0),null!==n&&rS(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=qE(e,i[Ri]));const d=s.rendererFactory.createRenderer(e,n);let p=16;n.signals?p=4096:n.onPush&&(p=64);const g=a_(i,oR(n),null,p,i[t.index],t,s,d,null,null,u);return a.firstCreatePass&&uw(a,t,r.length-1),u_(i,g),i[t.index]=g}(sI,E,It,Zn,ne,g,_);Ue=Bc(j,Ke),E&&function r$(t,e,n,r){if(r)Cc(t,n,["ng-version",NS.full]);else{const{attrs:i,classes:s}=function xg(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Er(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Cc(t,n,i),s&&s.length>0&&nS(t,n,s.join(" "))}}(_,It,E,r),void 0!==n&&function i$(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(Ue,this.ngContentSelectors,n),de=function n$(t,e,n,r,i,s){const o=vn(),a=i[he],u=Rn(o,i);lR(a,i,o,n,null,r);for(let p=0;p<n.length;p++)Cr(co(i,a,o.directiveStart+p,o),i);dR(a,i,o),u&&Cr(u,i);const d=co(i,a,o.directiveStart+o.componentOffset,o);if(t[un]=i[un]=d,null!==s)for(const p of s)p(d,e);return rw(a,o,t),d}(NJ,It,Zn,gg,ne,[s$]),hw(j,ne,null)}finally{kh()}return new Jj(this.componentType,de,yl(Ue,ne),ne,Ue)}}class Jj extends $B{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Kj(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;dw(s[he],s,i,e,n),this.previousInputValues.set(e,n),af(Ur(this._tNode.index,s))}}get injector(){return new $n(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function s$(){const t=vn();Wc(Y()[he],t)}function Dt(t){let e=function bR(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Ni(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=d_(t.inputs),o.inputTransforms=d_(t.inputTransforms),o.declaredInputs=d_(t.declaredInputs),o.outputs=d_(t.outputs);const a=i.hostBindings;a&&c$(t,a);const u=i.viewQuery,d=i.contentQueries;if(u&&a$(t,u),d&&u$(t,d),Fn(t.inputs,i.inputs),Fn(t.declaredInputs,i.declaredInputs),Fn(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Fn(o.inputTransforms,i.inputTransforms)),Ni(i)&&i.data.animation){const p=t.data;p.animation=(p.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Dt&&(n=!1)}}e=Object.getPrototypeOf(e)}!function o$(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Es(i.hostAttrs,n=Es(n,i.hostAttrs))}}(r)}function d_(t){return t===ci?{}:t===ut?[]:t}function a$(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function u$(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function c$(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function MR(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function h_(t){return!!fw(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function fw(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ks(t,e,n){return t[e]=n}function Dr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Vs(t,e,n,r){const i=Y();return Dr(i,oo(),e)&&(nt(),Os(Nt(),i,t,e,n,r)),Vs}function Cl(t,e,n,r){return Dr(t,oo(),n)?e+Ee(n)+r:He}function gi(t,e,n,r,i,s,o,a){const u=Y(),d=nt(),p=t+Ke,g=d.firstCreatePass?function O$(t,e,n,r,i,s,o,a,u){const d=e.consts,p=wl(e,t,4,o||null,Ss(d,a));aw(e,n,p,Ss(d,u)),Wc(e,p);const g=p.tView=ow(2,p,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,p),g.queries=e.queries.embeddedTView(p)),p}(p,d,u,e,n,r,i,s,o):d.data[p];ei(g,!1);const _=zR(d,u,g,t);Gc()&&Hm(d,u,_,g),Cr(_,u),u_(u,u[p]=fR(_,u,_,g)),Nc(g)&&iw(d,u,g),null!=o&&sw(u,g,a)}let zR=function qR(t,e,n,r){return Ps(!0),e[ke].createComment("")};function mf(t){return ea(function zc(){return Pe.lFrame.contextLView}(),Ke+t)}function rn(t,e,n){const r=Y();return Dr(r,oo(),e)&&pi(nt(),Nt(),r,t,e,r[ke],n,!1),rn}function vw(t,e,n,r,i){const o=i?"class":"style";dw(t,n,e.inputs[o],o,r)}function se(t,e,n,r){const i=Y(),s=nt(),o=Ke+t,a=i[ke],u=s.firstCreatePass?function L$(t,e,n,r,i,s){const o=e.consts,u=wl(e,t,2,r,Ss(o,i));return aw(e,n,u,Ss(o,s)),null!==u.attrs&&c_(u,u.attrs,!1),null!==u.mergedAttrs&&c_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],d=GR(s,i,u,a,e,t);i[o]=d;const p=Nc(u);return ei(u,!0),rS(a,d,u),32!=(32&u.flags)&&Gc()&&Hm(s,i,d,u),0===function MI(){return Pe.lFrame.elementDepthCount}()&&Cr(d,i),function xI(){Pe.lFrame.elementDepthCount++}(),p&&(iw(s,i,u),rw(s,u,i)),null!==r&&sw(i,u),se}function ie(){let t=vn();Dh()?function mu(){Pe.lFrame.isParent=!1}():(t=t.parent,ei(t,!1));const e=t;(function NI(t){return Pe.skipHydrationRootTNode===t})(e)&&function OI(){Pe.skipHydrationRootTNode=null}(),function Th(){Pe.lFrame.elementDepthCount--}();const n=nt();return n.firstCreatePass&&(Wc(n,t),lu(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function _m(t){return 0!=(8&t.flags)}(e)&&vw(n,e,Y(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Qc(t){return 0!=(16&t.flags)}(e)&&vw(n,e,Y(),e.stylesWithoutHost,!1),ie}function Tt(t,e,n,r){return se(t,e,n,r),ie(),Tt}let GR=(t,e,n,r,i,s)=>(Ps(!0),Bm(r,i,function fm(){return Pe.lFrame.currentNamespace}()));function _f(t){return!!t&&"function"==typeof t.then}function QR(t){return!!t&&"function"==typeof t.subscribe}function mi(t,e,n,r){const i=Y(),s=nt(),o=vn();return function JR(t,e,n,r,i,s,o){const a=Nc(r),d=t.firstCreatePass&&function mR(t){return t.cleanup||(t.cleanup=[])}(t),p=e[un],g=function gR(t){return t[qo]||(t[qo]=[])}(e);let _=!0;if(3&r.type||o){const C=Rn(r,e),S=o?o(C):C,O=g.length,R=o?ne=>o(Et(ne[r.index])):r.index;let j=null;if(!o&&a&&(j=function z$(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[qo],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==j)(j.__ngLastListenerFn__||j).__ngNextListenerFn__=s,j.__ngLastListenerFn__=s,_=!1;else{s=eP(r,e,p,s,!1);const ne=n.listen(S,i,s);g.push(s,ne),d&&d.push(i,R,O,O+1)}}else s=eP(r,e,p,s,!1);const v=r.outputs;let E;if(_&&null!==v&&(E=v[i])){const C=E.length;if(C)for(let S=0;S<C;S+=2){const de=e[E[S]][E[S+1]].subscribe(s),Ue=g.length;g.push(s,de),d&&d.push(i,r.index,Ue,-(Ue+1))}}}(s,i,i[ke],o,t,e,r),mi}function XR(t,e,n,r){try{return ki(6,e,n),!1!==n(r)}catch(i){return yR(t,i),!1}finally{ki(7,e,n)}}function eP(t,e,n,r,i){return function s(o){if(o===Function)return r;af(t.componentOffset>-1?Ur(t.index,e):e);let u=XR(e,n,r,o),d=s.__ngNextListenerFn__;for(;d;)u=XR(e,n,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function tP(t=1){return function LI(t){return(Pe.lFrame.contextLView=function UI(t,e){for(;t>0;)e=e[Wo],t--;return e}(t,Pe.lFrame.contextLView))[un]}(t)}function __(t,e,n){return ww(t,"",e,"",n),__}function ww(t,e,n,r,i){const s=Y(),o=Cl(s,e,n,r);return o!==He&&pi(nt(),Nt(),s,t,o,s[ke],i,!1),ww}function y_(t,e){return t<<17|e<<2}function da(t){return t>>17&32767}function Tw(t){return 2|t}function Ou(t){return(131068&t)>>2}function Cw(t,e){return-131069&t|e<<2}function Dw(t){return 1|t}function lP(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?da(s):Ou(s),u=!1;for(;0!==a&&(!1===u||o);){const p=t[a+1];X$(t[a],e)&&(u=!0,t[a+1]=r?Dw(p):Tw(p)),a=r?da(p):Ou(p)}u&&(t[n+1]=r?Tw(s):Dw(s))}function X$(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&aa(t,e)>=0}function v_(t,e){return function rs(t,e,n,r){const i=Y(),s=nt(),o=function Vi(t){const e=Pe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function vP(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[or()],o=function yP(t,e){return e>=t.expandoStartIndex}(t,n);(function TP(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function uH(t,e,n,r){const i=function Mh(t){const e=Pe.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=yf(n=Aw(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=Aw(i,t,e,n,r),null===s){let u=function cH(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ou(r))return t[da(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=Aw(null,t,e,u[1],r),u=yf(u,e.attrs,r),function lH(t,e,n,r){t[da(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function dH(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=yf(r,t[s].hostAttrs,n);return yf(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function Y$(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=da(o),u=Ou(o);t[r]=n;let p,d=!1;if(Array.isArray(n)?(p=n[1],(null===p||aa(n,p)>0)&&(d=!0)):p=n,i)if(0!==u){const _=da(t[a+1]);t[r+1]=y_(_,a),0!==_&&(t[_+1]=Cw(t[_+1],r)),t[a+1]=function K$(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=y_(a,0),0!==a&&(t[a+1]=Cw(t[a+1],r)),a=r;else t[r+1]=y_(u,0),0===a?a=r:t[u+1]=Cw(t[u+1],r),u=r;d&&(t[r+1]=Tw(t[r+1])),lP(t,p,r,!0),lP(t,p,r,!1),function J$(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&aa(s,e)>=0&&(n[r+1]=Dw(n[r+1]))}(e,p,t,r,s),o=y_(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==He&&Dr(i,o,e)&&function EP(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,d=u[a+1],p=function Q$(t){return 1==(1&t)}(d)?wP(u,e,n,i,Ou(d),o):void 0;I_(p)||(I_(s)||function Z$(t){return 2==(2&t)}(d)&&(s=wP(u,null,n,i,a,o)),function QU(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:ca.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ca.Important),t.setStyle(n,r,i,s))}}(r,o,Xo(or(),n),i,s))}(s,s.data[or()],i,i[ke],t,i[o+1]=function gH(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Ct(la(t)))),t}(e,n),r,o)}(t,e,null,!0),v_}function Aw(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=yf(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function yf(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),jr(t,o,!!n||e[++s]))}return void 0===t?null:t}function wP(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],d=Array.isArray(u),p=d?u[1]:u,g=null===p;let _=n[i+1];_===He&&(_=g?ut:void 0);let v=g?Hh(_,r):p===r?_:void 0;if(d&&!I_(v)&&(v=Hh(u,r)),I_(v)&&(a=v,o))return a;const E=t[i+1];i=o?da(E):Ou(E)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Hh(u,r))}return a}function I_(t){return void 0!==t}function ge(t,e=""){const n=Y(),r=nt(),i=t+Ke,s=r.firstCreatePass?wl(r,i,1,e,null):r.data[i],o=CP(r,n,s,e,t);n[i]=o,Gc()&&Hm(r,n,o,s),ei(s,!1)}let CP=(t,e,n,r,i)=>(Ps(!0),function Um(t,e){return t.createText(e)}(e[ke],r));function vf(t){return ss("",t,""),vf}function ss(t,e,n){const r=Y(),i=Cl(r,t,e,n);return i!==He&&function _o(t,e,n){const r=Xo(e,t);!function zb(t,e,n){t.setValue(e,n)}(t[ke],r,n)}(r,or(),i),ss}const ku=void 0;var FH=["en",[["a","p"],["AM","PM"],ku],[["AM","PM"],ku,ku],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ku,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ku,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ku,"{1} 'at' {0}",ku],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function VH(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let Nl={};function $r(t){const e=function LH(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=qP(e);if(n)return n;const r=e.split("-")[0];if(n=qP(r),n)return n;if("en"===r)return FH;throw new B(701,!1)}function qP(t){return t in Nl||(Nl[t]=_t.ng&&_t.ng.common&&_t.ng.common.locales&&_t.ng.common.locales[t]),Nl[t]}var Bt=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Bt||{});const Ol="en-US";let GP=Ol;function Rw(t,e,n,r,i){if(t=b(t),Array.isArray(t))for(let s=0;s<t.length;s++)Rw(t[s],e,n,r,i);else{const s=nt(),o=Y(),a=vn();let u=xu(t)?t:b(t.provide);const d=CS(t),p=1048575&a.providerIndexes,g=a.directiveStart,_=a.providerIndexes>>20;if(xu(t)||!t.multi){const v=new vu(d,i,te),E=Mw(u,e,i?p:p+_,g);-1===E?(Cu(Yc(a,o),s,u),Pw(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)):(n[E]=v,o[E]=v)}else{const v=Mw(u,e,p+_,g),E=Mw(u,e,p,p+_),S=E>=0&&n[E];if(i&&!S||!i&&!(v>=0&&n[v])){Cu(Yc(a,o),s,u);const O=function V4(t,e,n,r,i){const s=new vu(t,n,te);return s.multi=[],s.index=e,s.componentProviders=0,_M(s,i,r&&!n),s}(i?k4:O4,n.length,i,r,d);!i&&S&&(n[E].providerFactory=O),Pw(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),o.push(O)}else Pw(s,t,v>-1?v:E,_M(n[i?E:v],d,!i&&r));!i&&r&&S&&n[E].componentProviders++}}}function Pw(t,e,n,r){const i=xu(e),s=function DB(t){return!!t.useClass}(e);if(i||s){const u=(s?b(e.useClass):e).prototype.ngOnDestroy;if(u){const d=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const p=d.indexOf(n);-1===p?d.push(n,[r,u]):d[p+1].push(r,u)}else d.push(n,u)}}}function _M(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Mw(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function O4(t,e,n,r){return xw(this.multi,[])}function k4(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=co(n,n[he],this.providerFactory.index,r);s=a.slice(0,o),xw(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],xw(i,s);return s}function xw(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function sn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function N4(t,e,n){const r=nt();if(r.firstCreatePass){const i=Ni(t);Rw(n,r.data,r.blueprint,i,!0),Rw(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class Vu{}class yM{}class Nw extends Vu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new DR(this);const i=Vr(e);this._bootstrapComponents=mo(i.bootstrap),this._r3Injector=LS(e,n,[{provide:Vu,useValue:this},{provide:i_,useValue:this.componentFactoryResolver},...r],Ct(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Ow extends yM{constructor(e){super(),this.moduleType=e}create(e){return new Nw(this.moduleType,e,[])}}class vM extends Vu{constructor(e){super(),this.componentFactoryResolver=new DR(this),this.instance=null;const n=new pl([...e.providers,{provide:Vu,useValue:this},{provide:i_,useValue:this.componentFactoryResolver}],e.parent||Ym(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function kw(t,e,n=null){return new vM({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let U4=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=IS(0,n.type),i=r.length>0?kw([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Se({token:t,providedIn:"environment",factory:()=>new t(oe(Ui))})}return t})();function IM(t){t.getStandaloneInjector=e=>e.get(U4).getOrCreateStandaloneInjector(t)}function D_(t,e,n,r){return SM(Y(),jn(),t,e,n,r)}function bM(t,e,n,r,i){return function RM(t,e,n,r,i,s,o){const a=e+n;return function Nu(t,e,n,r){const i=Dr(t,e,n);return Dr(t,e+1,r)||i}(t,a,i,s)?ks(t,a+2,o?r.call(o,i,s):r(i,s)):Df(t,a+2)}(Y(),jn(),t,e,n,r,i)}function Df(t,e){const n=t[e];return n===He?void 0:n}function SM(t,e,n,r,i,s){const o=e+n;return Dr(t,o,i)?ks(t,o+1,s?r.call(s,i):r(i)):Df(t,o+1)}function Fw(t,e){const n=nt();let r;const i=t+Ke;n.firstCreatePass?(r=function n3(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=Oi(r.type)),a=Yn(te);try{const u=wu(!1),d=s();return wu(u),function F$(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Y(),i,d),d}finally{Yn(a)}}function Lw(t,e,n){const r=t+Ke,i=Y(),s=ea(i,r);return function Af(t,e){return t[he].data[e].pure}(i,r)?SM(i,jn(),e,s.transform,n,s):s.transform(n)}function c3(t,e,n,r=!0){const i=e[he];if(function $U(t,e,n,r){const i=Un+r,s=n.length;r>0&&(n[i-1][li]=e),r<s-Un?(e[li]=n[i],rl(n,Un+r,e)):(n.push(e),e[li]=null),e[Pt]=n;const o=e[au];null!==o&&n!==o&&function HU(t,e){const n=t[Ko];e[Zt]!==e[Pt][Pt][Zt]&&(t[uh]=!0),null===n?t[Ko]=[e]:n.push(e)}(o,e);const a=e[Pi];null!==a&&a.insertView(t),e[je]|=128}(i,e,t,n),r){const s=wE(n,t),o=e[ke],a=$m(o,t[xi]);null!==a&&function UU(t,e,n,r,i,s){r[tn]=i,r[Sn]=e,Jh(t,r,n,1,i,s)}(i,t[Sn],o,e,a,s)}}Symbol;let yo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=h3}return t})();const l3=yo,d3=class extends l3{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function u3(t,e,n,r){const i=e.tView,a=a_(t,i,n,4096&t[je]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[au]=t[e.index];const d=t[Pi];return null!==d&&(a[Pi]=d.createEmbeddedView(i)),hw(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new lf(i)}};function h3(){return function A_(t,e){return 4&t.type?new d3(e,t,yl(t,e)):null}(vn(),Y())}let os=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=y3}return t})();function y3(){return function UM(t,e){let n;const r=e[t.index];return Tr(r)?n=r:(n=fR(r,e,null,t),e[t.index]=n,u_(e,n)),BM(n,e,t,r),new FM(n,t,e)}(vn(),Y())}const v3=os,FM=class extends v3{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return yl(this._hostTNode,this._hostLView)}get injector(){return new $n(this._hostTNode,this._hostLView)}get parentInjector(){const e=Jc(this._hostTNode,this._hostLView);if(Lh(e)){const n=Eu(e,this._hostLView),r=Iu(e);return new $n(n[he].data[r+8],n)}return new $n(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=LM(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Un}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function zn(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const C=n||{};a=C.index,r=C.injector,i=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}const u=o?e:new df(tt(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const S=(o?d:this.parentInjector).get(Ui,null);S&&(s=S)}tt(u.componentType??{});const v=u.create(d,i,null,s);return this.insertImpl(v.hostView,a,false),v}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function Xg(t){return Tr(t[Pt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[Pt],p=new FM(d,d[Sn],d[Pt]);p.detach(p.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return c3(a,i,o,!r),e.attachToViewContainerRef(),rl(Bw(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=LM(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=jm(this._lContainer,n);r&&(oa(Bw(this._lContainer),n),yE(r[he],r))}detach(e){const n=this._adjustIndex(e,-1),r=jm(this._lContainer,n);return r&&null!=oa(Bw(this._lContainer),n)?new lf(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function LM(t){return t[8]}function Bw(t){return t[8]||(t[8]=[])}let BM=function jM(t,e,n,r){if(t[xi])return;let i;i=8&n.type?Et(r):function I3(t,e){const n=t[ke],r=n.createComment(""),i=Rn(e,t);return Mu(n,$m(n,i),r,function WU(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[xi]=i};const Yw=new le("Application Initializer");let Jw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=me(Yw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(_f(s))n.push(s);else if(QR(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hx=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const vo=new le("LocaleId",{providedIn:"root",factory:()=>me(vo,et.Optional|et.SkipSelf)||function Y3(){return typeof $localize<"u"&&$localize.locale||Ol}()});let fx=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new M(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class ez{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let px=(()=>{class t{compileModuleSync(n){return new Ow(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=mo(Vr(n).declarations).reduce((o,a)=>{const u=tt(a);return u&&o.push(new df(u)),o},[]);return new ez(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const yx=new le(""),P_=new le("");let rT,tT=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,rT||(function wz(t){rT=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(oe(wt),oe(nT),oe(P_))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})(),nT=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return rT?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),ha=null;const vx=new le("AllowMultipleToken"),iT=new le("PlatformDestroyListeners"),sT=new le("appBootstrapListener");class Ex{constructor(e,n){this.name=e,this.token=n}}function Tx(t,e,n=[]){const r=`Platform: ${e}`,i=new le(r);return(s=[])=>{let o=oT();if(!o||o.injector.get(vx,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function Dz(t){if(ha&&!ha.get(vx,!1))throw new B(400,!1);(function Ix(){!function Jo(t){Wg=t}(()=>{throw new B(600,!1)})})(),ha=t;const e=t.get(Dx);(function wx(t){t.get(DS,null)?.forEach(n=>n())})(t)}(function Cx(t=[],e){return fi.create({name:e,providers:[{provide:OE,useValue:"platform"},{provide:iT,useValue:new Set([()=>ha=null])},...t]})}(a,r))}return function bz(t){const e=oT();if(!e)throw new B(401,!1);return e}()}}function oT(){return ha?.get(Dx)??null}let Dx=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function Sz(t="zone.js",e){return"noop"===t?new oj:"zone.js"===t?new wt(e):t}(r?.ngZone,function Ax(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function L4(t,e,n){return new Nw(t,e,n)}(n.moduleType,this.injector,function Mx(t){return[{provide:wt,useFactory:t},{provide:nf,multi:!0,useFactory:()=>{const e=me(Pz,{optional:!0});return()=>e.initialize()}},{provide:Px,useFactory:Rz},{provide:HS,useFactory:zS}]}(()=>i)),o=s.injector.get(go,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{M_(this._modules,s),a.unsubscribe()})}),function bx(t,e,n){try{const r=n();return _f(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(Jw);return a.runInitializers(),a.donePromise.then(()=>(function WP(t){yr(t,"Expected localeId to be defined"),"string"==typeof t&&(GP=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(vo,Ol)||Ol),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=Sx({},r);return function Tz(t,e,n){const r=new Ow(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Fl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new B(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new B(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(iT,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(oe(fi))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Sx(t,e){return Array.isArray(e)?e.reduce(Sx,t):{...t,...e}}let Fl=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=me(Px),this.zoneIsStable=me(HS),this.componentTypes=[],this.components=[],this.isStable=me(fx).hasPendingTasks.pipe(mt(n=>n?G(!1):this.zoneIsStable),Wt(),Oe()),this._injector=me(Ui)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof PS;if(!this._injector.get(Jw).done)throw!i&&function ws(t){const e=tt(t)||yn(t)||sr(t);return null!==e&&e.standalone}(n),new B(405,!1);let o;o=i?n:this._injector.get(i_).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function Cz(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Vu),d=o.create(fi.NULL,[],r||o.selector,a),p=d.location.nativeElement,g=d.injector.get(yx,null);return g?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),M_(this.components,d),g?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new B(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;M_(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(sT,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>M_(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new B(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function M_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Px=new le("",{providedIn:"root",factory:()=>me(go).handleError.bind(void 0)});function Rz(){const t=me(wt),e=me(go);return n=>t.runOutsideAngular(()=>e.handleError(n))}let Pz=(()=>{class t{constructor(){this.zone=me(wt),this.applicationRef=me(Fl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let x_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=xz}return t})();function xz(t){return function Nz(t,e,n){if(no(t)&&!n){const r=Ur(t.index,e);return new lf(r,r)}return 47&t.type?new lf(e[Zt],e):null}(vn(),Y(),16==(16&t))}class Vx{constructor(){}supports(e){return h_(e)}create(e){return new Uz(e)}}const Lz=(t,e)=>e;class Uz{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Lz}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<Lx(r,i,s)?n:r,a=Lx(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,p=u-i;if(d!=p){for(let _=0;_<d;_++){const v=_<s.length?s[_]:s[_]=0,E=v+_;p<=E&&E<d&&(s[_]=v+1)}s[o.previousIndex]=p-d}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!h_(e))throw new B(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function m$(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Bz(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new Fx),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Fx),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Bz{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class jz{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class Fx{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new jz,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Lx(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ux{constructor(){}supports(e){return e instanceof Map||fw(e)}create(){return new $z}}class $z{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||fw(e)))throw new B(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new Hz(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class Hz{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Bx(){return new k_([new Vx])}let k_=(()=>{class t{static#e=this.\u0275prov=Se({token:t,providedIn:"root",factory:Bx});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Bx()),deps:[[t,new ol,new Ru]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new B(901,!1)}}return t})();function jx(){return new Rf([new Ux])}let Rf=(()=>{class t{static#e=this.\u0275prov=Se({token:t,providedIn:"root",factory:jx});constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||jx()),deps:[[t,new ol,new Ru]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new B(901,!1)}}return t})();const Gz=Tx(null,"core",[]);let Wz=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Fl))};static#t=this.\u0275mod=wr({type:t});static#n=this.\u0275inj=vr({})}return t})();function Ll(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let hT=null;function fa(){return hT}class aq{}const ji=new le("DocumentToken");let fT=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(){return me(cq)},providedIn:"platform"})}return t})();const uq=new le("Location Initialized");let cq=(()=>{class t extends fT{constructor(){super(),this._doc=me(ji),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fa().getBaseHref(this._doc)}onPopState(n){const r=fa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=fa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function pT(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Qx(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Io(t){return t&&"?"!==t[0]?"?"+t:t}let Lu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(){return me(Jx)},providedIn:"root"})}return t})();const Yx=new le("appBaseHref");let Jx=(()=>{class t extends Lu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??me(ji).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return pT(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Io(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+Io(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+Io(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(fT),oe(Yx,8))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lq=(()=>{class t extends Lu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=pT(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Io(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Io(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(fT),oe(Yx,8))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})(),gT=(()=>{class t{constructor(n){this._subject=new dn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function fq(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(Qx(Xx(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Io(r))}normalize(n){return t.stripTrailingSlash(function hq(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,Xx(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Io(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Io(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=Io;static#t=this.joinWithSlash=pT;static#n=this.stripTrailingSlash=Qx;static#r=this.\u0275fac=function(r){return new(r||t)(oe(Lu))};static#i=this.\u0275prov=Se({token:t,factory:function(){return function dq(){return new gT(oe(Lu))}()},providedIn:"root"})}return t})();function Xx(t){return t.replace(/\/index.html$/,"")}var zr=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(zr||{}),Ot=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ot||{}),_i=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(_i||{}),In=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(In||{});function L_(t,e){return Hi($r(t)[Bt.DateFormat],e)}function U_(t,e){return Hi($r(t)[Bt.TimeFormat],e)}function B_(t,e){return Hi($r(t)[Bt.DateTimeFormat],e)}function $i(t,e){const n=$r(t),r=n[Bt.NumberSymbols][e];if(typeof r>"u"){if(e===In.CurrencyDecimal)return n[Bt.NumberSymbols][In.Decimal];if(e===In.CurrencyGroup)return n[Bt.NumberSymbols][In.Group]}return r}function tN(t){if(!t[Bt.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Bt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Hi(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function _T(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const bq=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Pf={},Sq=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Eo=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Eo||{}),yt=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(yt||{}),vt=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(vt||{});function Rq(t,e,n,r){let i=function Lq(t){if(iN(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[i,s=1,o=1]=t.split("-").map(a=>+a);return j_(i,s-1,o)}const n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(bq))return function Uq(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),d=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,a,u,d),e}(r)}const e=new Date(t);if(!iN(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=wo(n,e)||e;let a,o=[];for(;e;){if(a=Sq.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const p=o.pop();if(!p)break;e=p}}let u=i.getTimezoneOffset();r&&(u=rN(r,u),i=function Fq(t,e,n){const r=n?-1:1,i=t.getTimezoneOffset();return function Vq(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,r*(rN(e,i)-i))}(i,r,!0));let d="";return o.forEach(p=>{const g=function kq(t){if(vT[t])return vT[t];let e;switch(t){case"G":case"GG":case"GGG":e=jt(vt.Eras,Ot.Abbreviated);break;case"GGGG":e=jt(vt.Eras,Ot.Wide);break;case"GGGGG":e=jt(vt.Eras,Ot.Narrow);break;case"y":e=Pn(yt.FullYear,1,0,!1,!0);break;case"yy":e=Pn(yt.FullYear,2,0,!0,!0);break;case"yyy":e=Pn(yt.FullYear,3,0,!1,!0);break;case"yyyy":e=Pn(yt.FullYear,4,0,!1,!0);break;case"Y":e=q_(1);break;case"YY":e=q_(2,!0);break;case"YYY":e=q_(3);break;case"YYYY":e=q_(4);break;case"M":case"L":e=Pn(yt.Month,1,1);break;case"MM":case"LL":e=Pn(yt.Month,2,1);break;case"MMM":e=jt(vt.Months,Ot.Abbreviated);break;case"MMMM":e=jt(vt.Months,Ot.Wide);break;case"MMMMM":e=jt(vt.Months,Ot.Narrow);break;case"LLL":e=jt(vt.Months,Ot.Abbreviated,zr.Standalone);break;case"LLLL":e=jt(vt.Months,Ot.Wide,zr.Standalone);break;case"LLLLL":e=jt(vt.Months,Ot.Narrow,zr.Standalone);break;case"w":e=yT(1);break;case"ww":e=yT(2);break;case"W":e=yT(1,!0);break;case"d":e=Pn(yt.Date,1);break;case"dd":e=Pn(yt.Date,2);break;case"c":case"cc":e=Pn(yt.Day,1);break;case"ccc":e=jt(vt.Days,Ot.Abbreviated,zr.Standalone);break;case"cccc":e=jt(vt.Days,Ot.Wide,zr.Standalone);break;case"ccccc":e=jt(vt.Days,Ot.Narrow,zr.Standalone);break;case"cccccc":e=jt(vt.Days,Ot.Short,zr.Standalone);break;case"E":case"EE":case"EEE":e=jt(vt.Days,Ot.Abbreviated);break;case"EEEE":e=jt(vt.Days,Ot.Wide);break;case"EEEEE":e=jt(vt.Days,Ot.Narrow);break;case"EEEEEE":e=jt(vt.Days,Ot.Short);break;case"a":case"aa":case"aaa":e=jt(vt.DayPeriods,Ot.Abbreviated);break;case"aaaa":e=jt(vt.DayPeriods,Ot.Wide);break;case"aaaaa":e=jt(vt.DayPeriods,Ot.Narrow);break;case"b":case"bb":case"bbb":e=jt(vt.DayPeriods,Ot.Abbreviated,zr.Standalone,!0);break;case"bbbb":e=jt(vt.DayPeriods,Ot.Wide,zr.Standalone,!0);break;case"bbbbb":e=jt(vt.DayPeriods,Ot.Narrow,zr.Standalone,!0);break;case"B":case"BB":case"BBB":e=jt(vt.DayPeriods,Ot.Abbreviated,zr.Format,!0);break;case"BBBB":e=jt(vt.DayPeriods,Ot.Wide,zr.Format,!0);break;case"BBBBB":e=jt(vt.DayPeriods,Ot.Narrow,zr.Format,!0);break;case"h":e=Pn(yt.Hours,1,-12);break;case"hh":e=Pn(yt.Hours,2,-12);break;case"H":e=Pn(yt.Hours,1);break;case"HH":e=Pn(yt.Hours,2);break;case"m":e=Pn(yt.Minutes,1);break;case"mm":e=Pn(yt.Minutes,2);break;case"s":e=Pn(yt.Seconds,1);break;case"ss":e=Pn(yt.Seconds,2);break;case"S":e=Pn(yt.FractionalSeconds,1);break;case"SS":e=Pn(yt.FractionalSeconds,2);break;case"SSS":e=Pn(yt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=H_(Eo.Short);break;case"ZZZZZ":e=H_(Eo.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=H_(Eo.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=H_(Eo.Long);break;default:return null}return vT[t]=e,e}(p);d+=g?g(i,n,u):"''"===p?"'":p.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function j_(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function wo(t,e){const n=function gq(t){return $r(t)[Bt.LocaleId]}(t);if(Pf[n]=Pf[n]||{},Pf[n][e])return Pf[n][e];let r="";switch(e){case"shortDate":r=L_(t,_i.Short);break;case"mediumDate":r=L_(t,_i.Medium);break;case"longDate":r=L_(t,_i.Long);break;case"fullDate":r=L_(t,_i.Full);break;case"shortTime":r=U_(t,_i.Short);break;case"mediumTime":r=U_(t,_i.Medium);break;case"longTime":r=U_(t,_i.Long);break;case"fullTime":r=U_(t,_i.Full);break;case"short":const i=wo(t,"shortTime"),s=wo(t,"shortDate");r=$_(B_(t,_i.Short),[i,s]);break;case"medium":const o=wo(t,"mediumTime"),a=wo(t,"mediumDate");r=$_(B_(t,_i.Medium),[o,a]);break;case"long":const u=wo(t,"longTime"),d=wo(t,"longDate");r=$_(B_(t,_i.Long),[u,d]);break;case"full":const p=wo(t,"fullTime"),g=wo(t,"fullDate");r=$_(B_(t,_i.Full),[p,g])}return r&&(Pf[n][e]=r),r}function $_(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return null!=e&&r in e?e[r]:n})),t}function as(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Pn(t,e,n=0,r=!1,i=!1){return function(s,o){let a=function Mq(t,e){switch(t){case yt.FullYear:return e.getFullYear();case yt.Month:return e.getMonth();case yt.Date:return e.getDate();case yt.Hours:return e.getHours();case yt.Minutes:return e.getMinutes();case yt.Seconds:return e.getSeconds();case yt.FractionalSeconds:return e.getMilliseconds();case yt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||a>-n)&&(a+=n),t===yt.Hours)0===a&&-12===n&&(a=12);else if(t===yt.FractionalSeconds)return function Pq(t,e){return as(t,3).substring(0,e)}(a,e);const u=$i(o,In.MinusSign);return as(a,e,u,r,i)}}function jt(t,e,n=zr.Format,r=!1){return function(i,s){return function xq(t,e,n,r,i,s){switch(n){case vt.Months:return function yq(t,e,n){const r=$r(t),s=Hi([r[Bt.MonthsFormat],r[Bt.MonthsStandalone]],e);return Hi(s,n)}(e,i,r)[t.getMonth()];case vt.Days:return function _q(t,e,n){const r=$r(t),s=Hi([r[Bt.DaysFormat],r[Bt.DaysStandalone]],e);return Hi(s,n)}(e,i,r)[t.getDay()];case vt.DayPeriods:const o=t.getHours(),a=t.getMinutes();if(s){const d=function wq(t){const e=$r(t);return tN(e),(e[Bt.ExtraData][2]||[]).map(r=>"string"==typeof r?_T(r):[_T(r[0]),_T(r[1])])}(e),p=function Tq(t,e,n){const r=$r(t);tN(r);const s=Hi([r[Bt.ExtraData][0],r[Bt.ExtraData][1]],e)||[];return Hi(s,n)||[]}(e,i,r),g=d.findIndex(_=>{if(Array.isArray(_)){const[v,E]=_,C=o>=v.hours&&a>=v.minutes,S=o<E.hours||o===E.hours&&a<E.minutes;if(v.hours<E.hours){if(C&&S)return!0}else if(C||S)return!0}else if(_.hours===o&&_.minutes===a)return!0;return!1});if(-1!==g)return p[g]}return function mq(t,e,n){const r=$r(t),s=Hi([r[Bt.DayPeriodsFormat],r[Bt.DayPeriodsStandalone]],e);return Hi(s,n)}(e,i,r)[o<12?0:1];case vt.Eras:return function vq(t,e){return Hi($r(t)[Bt.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,s,t,e,n,r)}}function H_(t){return function(e,n,r){const i=-1*r,s=$i(n,In.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Eo.Short:return(i>=0?"+":"")+as(o,2,s)+as(Math.abs(i%60),2,s);case Eo.ShortGMT:return"GMT"+(i>=0?"+":"")+as(o,1,s);case Eo.Long:return"GMT"+(i>=0?"+":"")+as(o,2,s)+":"+as(Math.abs(i%60),2,s);case Eo.Extended:return 0===r?"Z":(i>=0?"+":"")+as(o,2,s)+":"+as(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}const Nq=0,z_=4;function nN(t){return j_(t.getFullYear(),t.getMonth(),t.getDate()+(z_-t.getDay()))}function yT(t,e=!1){return function(n,r){let i;if(e){const s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{const s=nN(n),o=function Oq(t){const e=j_(t,Nq,1).getDay();return j_(t,0,1+(e<=z_?z_:z_+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return as(i,t,$i(r,In.MinusSign))}}function q_(t,e=!1){return function(n,r){return as(nN(n).getFullYear(),t,$i(r,In.MinusSign),e)}}const vT={};function rN(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function iN(t){return t instanceof Date&&!isNaN(t.valueOf())}const DT=/\s+/,uN=[];let cN=(()=>{class t{constructor(n,r,i,s){this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=uN,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(DT):uN}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(DT):n}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const r of n)this._updateState(r,!0);else if(null!=n)for(const r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){const i=this.stateMap.get(n);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){(n=n.trim()).length>0&&n.split(DT).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||t)(te(k_),te(Rf),te(hi),te(po))};static#t=this.\u0275dir=Me({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return t})();class Xq{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let xf=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Xq(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),dN(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{dN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(te(os),te(yo),te(k_))};static#t=this.\u0275dir=Me({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function dN(t,e){t.context.$implicit=e.item}let W_=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new eG,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){hN("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){hN("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(te(os),te(yo))};static#t=this.\u0275dir=Me({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class eG{constructor(){this.$implicit=null,this.ngIf=null}}function hN(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Ct(e)}'.`)}const fG=new le("DATE_PIPE_DEFAULT_TIMEZONE"),pG=new le("DATE_PIPE_DEFAULT_OPTIONS");let ST=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(null==n||""===n||n!=n)return null;try{return Rq(n,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw function us(t,e){return new B(2100,!1)}()}}static#e=this.\u0275fac=function(r){return new(r||t)(te(vo,16),te(fG,24),te(pG,24))};static#t=this.\u0275pipe=Ln({name:"date",type:t,pure:!0,standalone:!0})}return t})(),CG=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=wr({type:t});static#n=this.\u0275inj=vr({})}return t})();function Z_(t){return"server"===t}let SG=(()=>{class t{static#e=this.\u0275prov=Se({token:t,providedIn:"root",factory:()=>new RG(oe(ji),window)})}return t})();class RG{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function PG(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class e9 extends aq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class NT extends e9{static makeCurrent(){!function oq(t){hT||(hT=t)}(new NT)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function t9(){return Of=Of||document.querySelector("base"),Of?Of.getAttribute("href"):null}();return null==n?null:function n9(t){Y_=Y_||document.createElement("a"),Y_.setAttribute("href",t);const e=Y_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Of=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Yq(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Y_,Of=null,i9=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();const OT=new le("EventManagerPlugins");let IN=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new B(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(oe(OT),oe(wt))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();class EN{constructor(e){this._doc=e}}const kT="ng-app-id";let wN=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Z_(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${kT}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(kT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(kT,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(ji),oe(Jm),oe(AS,8),oe(fo))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();const VT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},FT=/%COMP%/g,u9=new le("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function CN(t,e){return e.map(n=>n.replace(FT,t))}let DN=(()=>{class t{constructor(n,r,i,s,o,a,u,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Z_(a),this.defaultRenderer=new LT(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Jr.ShadowDom&&(r={...r,encapsulation:Jr.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof bN?i.applyToHost(n):i instanceof UT&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Jr.Emulated:s=new bN(u,d,r,this.appId,p,o,a,g);break;case Jr.ShadowDom:return new h9(u,d,n,r,o,a,this.nonce,g);default:s=new UT(u,d,r,p,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(oe(IN),oe(wN),oe(Jm),oe(u9),oe(ji),oe(fo),oe(wt),oe(AS))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();class LT{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(VT[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(AN(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(AN(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=VT[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=VT[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ca.DashCase|ca.Important)?e.style.setProperty(n,r,i&ca.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ca.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=fa().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function AN(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class h9 extends LT{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=CN(i.id,i.styles);for(const p of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class UT extends LT{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?CN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class bN extends UT{constructor(e,n,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,n,r,s,o,a,u,d),this.contentAttr=function c9(t){return"_ngcontent-%COMP%".replace(FT,t)}(d),this.hostAttr=function l9(t){return"_nghost-%COMP%".replace(FT,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let f9=(()=>{class t extends EN{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(ji))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();const SN=["alt","control","meta","shift"],p9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},g9={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let m9=(()=>{class t extends EN{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fa().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),SN.forEach(d=>{const p=r.indexOf(d);p>-1&&(r.splice(p,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=p9[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),SN.forEach(o=>{o!==i&&(0,g9[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(oe(ji))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();const PN=[{provide:fo,useValue:"browser"},{provide:DS,useValue:function _9(){NT.makeCurrent()},multi:!0},{provide:ji,useFactory:function v9(){return function tB(t){DE=t}(document),document},deps:[]}],I9=Tx(Gz,"browser",PN),E9=new le(""),MN=[{provide:P_,useClass:class r9{addToWindow(e){_t.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new B(5103,!1);return s},_t.getAllAngularTestabilities=()=>e.getAllTestabilities(),_t.getAllAngularRootElements=()=>e.getAllRootElements(),_t.frameworkStabilizers||(_t.frameworkStabilizers=[]),_t.frameworkStabilizers.push(r=>{const i=_t.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?fa().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:yx,useClass:tT,deps:[wt,nT,P_]},{provide:tT,useClass:tT,deps:[wt,nT,P_]}],xN=[{provide:OE,useValue:"root"},{provide:go,useFactory:function y9(){return new go},deps:[]},{provide:OT,useClass:f9,multi:!0,deps:[ji,wt,fo]},{provide:OT,useClass:m9,multi:!0,deps:[ji]},DN,wN,IN,{provide:xS,useExisting:DN},{provide:class MG{},useClass:i9,deps:[]},[]];let w9=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Jm,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(oe(E9,12))};static#t=this.\u0275mod=wr({type:t});static#n=this.\u0275inj=vr({providers:[...xN,...MN],imports:[CG,Wz]})}return t})(),NN=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(oe(ji))};static#t=this.\u0275prov=Se({token:t,factory:function(r){let i=null;return i=r?new r:function C9(){return new NN(oe(ji))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;const{isArray:R9}=Array,{getPrototypeOf:P9,prototype:M9,keys:x9}=Object;function FN(t){if(1===t.length){const e=t[0];if(R9(e))return{args:e,keys:null};if(function N9(t){return t&&"object"==typeof t&&P9(t)===M9}(e)){const n=x9(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:O9}=Array;function LN(t){return Te(e=>function k9(t,e){return O9(e)?t(...e):t(e)}(t,e))}function UN(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let BN=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(te(po),te(hi))};static#t=this.\u0275dir=Me({type:t})}return t})(),Uu=(()=>{class t extends BN{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Hn(t)))(i||t)}}();static#t=this.\u0275dir=Me({type:t,features:[Dt]})}return t})();const Us=new le("NgValueAccessor"),L9={provide:Us,useExisting:N(()=>J_),multi:!0},B9=new le("CompositionEventMode");let J_=(()=>{class t extends BN{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function U9(){const t=fa()?fa().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(te(po),te(hi),te(B9,8))};static#t=this.\u0275dir=Me({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&mi("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[sn([L9]),Dt]})}return t})();function ga(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}const Ar=new le("NgValidators"),ma=new le("NgAsyncValidators"),j9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function qN(t){return ga(t.value)?{required:!0}:null}function WN(t){return ga(t.value)||j9.test(t.value)?null:{email:!0}}function X_(t){return null}function YN(t){return null!=t}function JN(t){return _f(t)?A(t):t}function XN(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function e1(t,e){return e.map(n=>n(t))}function t1(t){return t.map(e=>function $9(t){return!t.validate}(e)?e:n=>e.validate(n))}function jT(t){return null!=t?function n1(t){if(!t)return null;const e=t.filter(YN);return 0==e.length?null:function(n){return XN(e1(n,e))}}(t1(t)):null}function $T(t){return null!=t?function r1(t){if(!t)return null;const e=t.filter(YN);return 0==e.length?null:function(n){return function V9(...t){const e=Lo(t),{args:n,keys:r}=FN(t),i=new st(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,d=o;for(let p=0;p<o;p++){let g=!1;_n(n[p]).subscribe(pe(s,_=>{g||(g=!0,d--),a[p]=_},()=>u--,void 0,()=>{(!u||!g)&&(d||s.next(r?UN(r,a):a),s.complete())}))}});return e?i.pipe(LN(e)):i}(e1(n,e).map(JN)).pipe(Te(XN))}}(t1(t)):null}function i1(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function HT(t){return t?Array.isArray(t)?t:[t]:[]}function ey(t,e){return Array.isArray(t)?t.includes(e):t===e}function a1(t,e){const n=HT(e);return HT(t).forEach(i=>{ey(n,i)||n.push(i)}),n}function u1(t,e){return HT(e).filter(n=>!ey(t,n))}class c1{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=jT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$T(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class qr extends c1{get formDirective(){return null}get path(){return null}}class _a extends c1{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class l1{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let d1=(()=>{class t extends l1{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(te(_a,2))};static#t=this.\u0275dir=Me({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&v_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Dt]})}return t})(),ty=(()=>{class t extends l1{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(te(qr,10))};static#t=this.\u0275dir=Me({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&v_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Dt]})}return t})();const kf="VALID",ry="INVALID",Bl="PENDING",Vf="DISABLED";function GT(t){return(iy(t)?t.validators:t)||null}function WT(t,e){return(iy(e)?e.asyncValidators:t)||null}function iy(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class g1{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===kf}get invalid(){return this.status===ry}get pending(){return this.status==Bl}get disabled(){return this.status===Vf}get enabled(){return this.status!==Vf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(a1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(a1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(u1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(u1(e,this._rawAsyncValidators))}hasValidator(e){return ey(this._rawValidators,e)}hasAsyncValidator(e){return ey(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Bl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Vf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=kf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kf||this.status===Bl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vf:kf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Bl,this._hasOwnPendingAsyncValidator=!0;const n=JN(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new dn,this.statusChanges=new dn}_calculateStatus(){return this._allControlsDisabled()?Vf:this.errors?ry:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bl)?Bl:this._anyControlsHaveStatus(ry)?ry:kf}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){iy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function G9(t){return Array.isArray(t)?jT(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function W9(t){return Array.isArray(t)?$T(t):t||null}(this._rawAsyncValidators)}}class ZT extends g1{constructor(e,n,r){super(GT(n),WT(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function p1(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new B(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function f1(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new B(1e3,"");if(!r[n])throw new B(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const jl=new le("CallSetDisabledState",{providedIn:"root",factory:()=>sy}),sy="always";function Ff(t,e,n=sy){KT(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function Q9(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&m1(t,e)})}(t,e),function J9(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Y9(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&m1(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function K9(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function uy(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function KT(t,e){const n=function s1(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(i1(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function o1(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(i1(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();uy(e._rawValidators,i),uy(e._rawAsyncValidators,i)}function m1(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const r5={provide:qr,useExisting:N(()=>$l)},Lf=(()=>Promise.resolve())();let $l=(()=>{class t extends qr{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new dn,this.form=new ZT({},jT(n),$T(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Lf.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Ff(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Lf.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Lf.then(()=>{const r=this._findContainer(n.path),i=new ZT({});(function _1(t,e){KT(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Lf.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Lf.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function y1(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(te(Ar,10),te(ma,10),te(jl,8))};static#t=this.\u0275dir=Me({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&mi("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sn([r5]),Dt]})}return t})();function v1(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function I1(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const E1=class extends g1{constructor(e=null,n,r){super(GT(n),WT(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),iy(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=I1(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){v1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){v1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){I1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},o5={provide:_a,useExisting:N(()=>XT)},C1=(()=>Promise.resolve())();let XT=(()=>{class t extends _a{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new E1,this._registered=!1,this.name="",this.update=new dn,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function JT(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===J_?n=s:function t5(t){return Object.getPrototypeOf(t.constructor)===Uu}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function YT(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ff(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){C1.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Ll(r);C1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function oy(t,e){return[...e.path,t]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(te(qr,9),te(Ar,10),te(ma,10),te(Us,10),te(x_,8),te(jl,8))};static#t=this.\u0275dir=Me({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sn([o5]),Dt,Lr]})}return t})(),ly=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Me({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})(),A1=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=wr({type:t});static#n=this.\u0275inj=vr({})}return t})(),Bu=(()=>{class t{constructor(){this._validator=X_}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):X_,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Me({type:t,features:[Lr]})}return t})();const C5={provide:Ar,useExisting:N(()=>dy),multi:!0};let dy=(()=>{class t extends Bu{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ll,this.createValidator=n=>qN}enabled(n){return n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Hn(t)))(i||t)}}();static#t=this.\u0275dir=Me({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Vs("required",i._enabled?"":null)},inputs:{required:"required"},features:[sn([C5]),Dt]})}return t})();const A5={provide:Ar,useExisting:N(()=>sC),multi:!0};let sC=(()=>{class t extends Bu{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=Ll,this.createValidator=n=>WN}enabled(n){return n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Hn(t)))(i||t)}}();static#t=this.\u0275dir=Me({type:t,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[sn([A5]),Dt]})}return t})(),P5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=wr({type:t});static#n=this.\u0275inj=vr({imports:[A1]})}return t})(),x5=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:jl,useValue:n.callSetDisabledState??sy}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=wr({type:t});static#n=this.\u0275inj=vr({imports:[P5]})}return t})();var Hl=Be(534);(0,Hl.registerVersion)("firebase","10.7.0","app");class k5 extends ct{constructor(e,n){super()}schedule(e,n=0){return this}}const hy={setInterval(t,e,...n){const{delegate:r}=hy;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=hy;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class H1 extends k5{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return hy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&hy.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ne(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const oC={now:()=>(oC.delegate||Date).now(),delegate:void 0};class Uf{constructor(e,n=Uf.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Uf.now=oC.now;class z1 extends Uf{constructor(e,n=Uf.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const L5=new class F5 extends z1{}(class V5 extends H1{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),q1=new z1(H1);function ur(t,e,n){const r=I(t)||e||n?{next:t,error:e,complete:n}:t;return r?L((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(pe(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):mn}const aC=new vl("ANGULARFIRE2_VERSION");class G1{constructor(){return((t,e)=>{const n=(0,Hl.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(B5)}}const B5="app-check";function zl(){}class W1{zone;delegate;constructor(e,n=L5){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class j5{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zl,{},zl,zl)),n.pipe(ur({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Z1=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new W1(Zone.current)),this.insideAngular=n.run(()=>new W1(Zone.current,q1)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(oe(wt))};static \u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yi(t){return function H5(t){return function(n){return(n=n.lift(new j5(t.ngZone))).pipe(_r(t.outsideAngular),ir(t.insideAngular))}}(function ql(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}())(t)}var To=Be(106);To.Z.registerVersion("firebase","10.7.0","app-compat");const W5=["ngOnDestroy"];class K1{constructor(e){return e}}const fy=new le("angularfire2.app.options"),py=new le("angularfire2.app.name");function uC(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=To.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>To.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;Q5("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new K1(o)}const Q5=(t,...e)=>{},Y5={provide:K1,useFactory:uC,deps:[fy,wt,[new Ru,py]]};let J5=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:fy,useValue:n},{provide:py,useValue:r}]}}constructor(n){To.Z.registerVersion("angularfire",aC.full,"core"),To.Z.registerVersion("angularfire",aC.full,"app-compat"),To.Z.registerVersion("angular",NS.full,n.toString())}static \u0275fac=function(r){return new(r||t)(oe(fo))};static \u0275mod=wr({type:t});static \u0275inj=vr({providers:[Y5]})}return t})();function Q1(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function X5(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(Y1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${e6?" You may need to reload as Firebase is not HMR aware.":""}`),Y1("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const e6=typeof module<"u"&&!!module.hot,Y1=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Be(377);class t6 extends ${constructor(e=1/0,n=1/0,r=oC){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function J1(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,Oe({connector:()=>new t6(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const gy=xe(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function cs(t,e){return L((n,r)=>{let i=0;n.subscribe(pe(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Gl(t){return t<=0?()=>Dn:L((e,n)=>{let r=0;e.subscribe(pe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function my(t){return L((e,n)=>{let r=!1;e.subscribe(pe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function X1(t=n6){return L((e,n)=>{let r=!1;e.subscribe(pe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function n6(){return new gy}function ya(t,e){const n=arguments.length>=2;return r=>r.pipe(t?cs((i,s)=>t(i,s,r)):mn,Gl(1),n?my(e):X1(()=>new gy))}function eO(t,e){return I(e)?mt(()=>t,e):mt(()=>t)}const tO=new le("angularfire2.auth.use-emulator"),nO=new le("angularfire2.auth.settings"),rO=new le("angularfire2.auth.tenant-id"),iO=new le("angularfire2.auth.langugage-code"),sO=new le("angularfire2.auth.use-device-language"),oO=new le("angularfire.auth.persistence"),aO=(t,e,n,r,i,s,o,a)=>Q1(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,p]of Object.entries(o))u.settings[d]=p;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let uO=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,d,p,g,_,v){const E=new $,C=G(void 0).pipe(ir(o.outsideAngular),mt(()=>s.runOutsideAngular(()=>Promise.resolve().then(Be.bind(Be,377)))),Te(()=>uC(n,s,r)),Te(S=>aO(S,s,a,d,p,g,u,_)),J1({bufferSize:1,refCount:!1}));if(Z_(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=G(null);else{C.pipe(ya()).subscribe();const S=C.pipe(mt(j=>j.getRedirectResult().then(ne=>ne,()=>null)),yi,J1({bufferSize:1,refCount:!1})),O=C.pipe(mt(j=>new st(ne=>({unsubscribe:s.runOutsideAngular(()=>j.onAuthStateChanged(de=>ne.next(de),de=>ne.error(de),()=>ne.complete()))})))),R=C.pipe(mt(j=>new st(ne=>({unsubscribe:s.runOutsideAngular(()=>j.onIdTokenChanged(de=>ne.next(de),de=>ne.error(de),()=>ne.complete()))}))));this.authState=S.pipe(eO(O),_r(o.outsideAngular),ir(o.insideAngular)),this.user=S.pipe(eO(R),_r(o.outsideAngular),ir(o.insideAngular)),this.idToken=this.user.pipe(mt(j=>j?A(j.getIdToken()):G(null))),this.idTokenResult=this.user.pipe(mt(j=>j?A(j.getIdTokenResult()):G(null))),this.credential=q(S,E,this.authState.pipe(cs(j=>!j))).pipe(Te(j=>j?.user?j:null),_r(o.outsideAngular),ir(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(W5.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>n.run(()=>d)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(p=>{const g=p?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,g),g})})})}))(this,C,s,{spy:{apply:(S,O,R)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&R.then(j=>E.next(j))}}})}static \u0275fac=function(r){return new(r||t)(oe(fy),oe(py,8),oe(fo),oe(wt),oe(Z1),oe(tO,8),oe(nO,8),oe(rO,8),oe(iO,8),oe(sO,8),oe(oO,8),oe(G1,8))};static \u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function cC(...t){return function i6(){return ui(1)}()(A(t,ms(t)))}function _y(...t){const e=ms(t);return L((n,r)=>{(e?cC(t,n,e):cC(t,n)).subscribe(r)})}function lC(){return L((t,e)=>{let n,r=!1;t.subscribe(pe(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}function yy(t,e){return L(function s6(t,e,n,r,i){return(s,o)=>{let a=n,u=e,d=0;s.subscribe(pe(o,p=>{const g=d++;u=a?t(u,p,g):(a=!0,p),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}var fe,W=Be(861),cO=Be(537),Bs=Be(879),kt=Be(58),o6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ls={},dC=dC||{},$e=o6||self;function vy(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Bf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var hC="closure_uid_"+(1e9*Math.random()>>>0),u6=0;function c6(t,e,n){return t.call.apply(t.bind,arguments)}function l6(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function br(t,e,n){return(br=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?c6:l6).apply(null,arguments)}function Iy(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Jn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function va(){this.s=this.s,this.o=this.o}va.prototype.s=!1,va.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function a6(t){Object.prototype.hasOwnProperty.call(t,hC)&&t[hC]||(t[hC]=++u6)}(this)},va.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lO=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function fC(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function dO(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(vy(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Sr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Sr.prototype.h=function(){this.defaultPrevented=!0};var h6=function(){if(!$e.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};$e.addEventListener("test",n,e),$e.removeEventListener("test",n,e)}catch{}return t}();function jf(t){return/^[\s\xa0]*$/.test(t)}function Ey(){var t=$e.navigator;return t&&(t=t.userAgent)?t:""}function js(t){return-1!=Ey().indexOf(t)}function pC(t){return pC[" "](t),t}pC[" "]=function(){};var mC,t,p6=js("Opera"),Wl=js("Trident")||js("MSIE"),hO=js("Edge"),gC=hO||Wl,fO=js("Gecko")&&!(-1!=Ey().toLowerCase().indexOf("webkit")&&!js("Edge"))&&!(js("Trident")||js("MSIE"))&&!js("Edge"),g6=-1!=Ey().toLowerCase().indexOf("webkit")&&!js("Edge");function pO(){var t=$e.document;return t?t.documentMode:void 0}e:{var _C="",yC=(t=Ey(),fO?/rv:([^\);]+)(\)|;)/.exec(t):hO?/Edge\/([\d\.]+)/.exec(t):Wl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):g6?/WebKit\/(\S+)/.exec(t):p6?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(yC&&(_C=yC?yC[1]:""),Wl){var vC=pO();if(null!=vC&&vC>parseFloat(_C)){mC=String(vC);break e}}mC=_C}var m6=$e.document&&Wl&&(pO()||parseInt(mC,10))||void 0;function $f(t,e){if(Sr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(fO){e:{try{pC(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:_6[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&$f.$.h.call(this)}}Jn($f,Sr);var _6={2:"touch",3:"pen",4:"mouse"};$f.prototype.h=function(){$f.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Hf="closure_listenable_"+(1e6*Math.random()|0),y6=0;function v6(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++y6,this.fa=this.ia=!1}function wy(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function EC(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function mO(t){const e={};for(const n in t)e[n]=t[n];return e}const _O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yO(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<_O.length;s++)n=_O[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ty(t){this.src=t,this.g={},this.h=0}function wC(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=lO(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(wy(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function TC(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}Ty.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=TC(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new v6(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var CC="closure_lm_"+(1e6*Math.random()|0),DC={};function vO(t,e,n,r,i){if(r&&r.once)return EO(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)vO(t,e[s],n,r,i);return null}return n=RC(n),t&&t[Hf]?t.O(e,n,Bf(r)?!!r.capture:!!r,i):IO(t,e,n,!1,r,i)}function IO(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Bf(i)?!!i.capture:!!i,a=bC(t);if(a||(t[CC]=a=new Ty(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function E6(){const e=w6;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)h6||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(TO(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function EO(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)EO(t,e[s],n,r,i);return null}return n=RC(n),t&&t[Hf]?t.P(e,n,Bf(r)?!!r.capture:!!r,i):IO(t,e,n,!0,r,i)}function wO(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)wO(t,e[s],n,r,i);else r=Bf(r)?!!r.capture:!!r,n=RC(n),t&&t[Hf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=TC(s=t.g[e],n,r,i))&&(wy(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=bC(t))&&(e=t.g[e.toString()],t=-1,e&&(t=TC(e,n,r,i)),(n=-1<t?e[t]:null)&&AC(n))}function AC(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Hf])wC(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(TO(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bC(e))?(wC(n,t),0==n.h&&(n.src=null,e[CC]=null)):wy(t)}}}function TO(t){return t in DC?DC[t]:DC[t]="on"+t}function w6(t,e){if(t.fa)t=!0;else{e=new $f(e,this);var n=t.listener,r=t.la||t.src;t.ia&&AC(t),t=n.call(r,e)}return t}function bC(t){return(t=t[CC])instanceof Ty?t:null}var SC="__closure_events_fn_"+(1e9*Math.random()>>>0);function RC(t){return"function"==typeof t?t:(t[SC]||(t[SC]=function(e){return t.handleEvent(e)}),t[SC])}function Xn(){va.call(this),this.i=new Ty(this),this.S=this,this.J=null}function cr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Sr(e,t);else if(e instanceof Sr)e.target=e.target||t;else{var i=e;yO(e=new Sr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Cy(o,r,!0,e)&&i}if(i=Cy(o=e.g=t,r,!0,e)&&i,i=Cy(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Cy(o=e.g=n[s],r,!1,e)&&i}function Cy(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&wC(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Jn(Xn,va),Xn.prototype[Hf]=!0,Xn.prototype.removeEventListener=function(t,e,n,r){wO(this,t,e,n,r)},Xn.prototype.N=function(){if(Xn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)wy(n[r]);delete t.g[e],t.h--}}this.J=null},Xn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Xn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var PC=$e.JSON.stringify;function C6(){var t=MC;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var CO=new class T6{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new A6,t=>t.reset());class A6{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function b6(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function S6(t){$e.setTimeout(()=>{throw t},0)}let zf,qf=!1,MC=new class D6{constructor(){this.h=this.g=null}add(e,n){const r=CO.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},DO=()=>{const t=$e.Promise.resolve(void 0);zf=()=>{t.then(R6)}};var R6=()=>{for(var t;t=C6();){try{t.h.call(t.g)}catch(n){S6(n)}var e=CO;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}qf=!1};function Dy(t,e){Xn.call(this),this.h=t||1,this.g=e||$e,this.j=br(this.qb,this),this.l=Date.now()}function xC(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function NC(t,e,n){if("function"==typeof t)n&&(t=br(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=br(t.handleEvent,t)}return 2147483647<Number(e)?-1:$e.setTimeout(t,e||0)}function AO(t){t.g=NC(()=>{t.g=null,t.i&&(t.i=!1,AO(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Jn(Dy,Xn),(fe=Dy.prototype).ga=!1,fe.T=null,fe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),cr(this,"tick"),this.ga&&(xC(this),this.start()))}},fe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fe.N=function(){Dy.$.N.call(this),xC(this),delete this.g};class P6 extends va{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:AO(this)}N(){super.N(),this.g&&($e.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gf(t){va.call(this),this.h=t,this.g={}}Jn(Gf,va);var bO=[];function SO(t,e,n,r){Array.isArray(n)||(n&&(bO[0]=n.toString()),n=bO);for(var i=0;i<n.length;i++){var s=vO(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function RO(t){EC(t.g,function(e,n){this.g.hasOwnProperty(n)&&AC(e)},t),t.g={}}function Ay(){this.g=!0}function Zl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function O6(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return PC(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Gf.prototype.N=function(){Gf.$.N.call(this),RO(this)},Gf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ay.prototype.Ea=function(){this.g=!1},Ay.prototype.info=function(){};var $u={},PO=null;function by(){return PO=PO||new Xn}function MO(t){Sr.call(this,$u.Ta,t)}function Wf(t){const e=by();cr(e,new MO(e))}function xO(t,e){Sr.call(this,$u.STAT_EVENT,t),this.stat=e}function Gr(t){const e=by();cr(e,new xO(e,t))}function NO(t,e){Sr.call(this,$u.Ua,t),this.size=e}function Zf(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return $e.setTimeout(function(){t()},e)}$u.Ta="serverreachability",Jn(MO,Sr),$u.STAT_EVENT="statevent",Jn(xO,Sr),$u.Ua="timingevent",Jn(NO,Sr);var Sy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},OO={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function OC(){}function VO(){}OC.prototype.h=null;var FC,Kf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function kC(){Sr.call(this,"d")}function VC(){Sr.call(this,"c")}function Ry(){}function Qf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Gf(this),this.P=k6,this.V=new Dy(t=gC?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new FO}function FO(){this.i=null,this.g="",this.h=!1}Jn(kC,Sr),Jn(VC,Sr),Jn(Ry,OC),Ry.prototype.g=function(){return new XMLHttpRequest},Ry.prototype.i=function(){return{}},FC=new Ry;var k6=45e3,LO={},LC={};function UC(t,e,n){t.L=1,t.A=Ny(Co(e)),t.u=n,t.S=!0,UO(t,null)}function UO(t,e){t.G=Date.now(),Yf(t),t.B=Co(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),KO(n.i,"t",r),t.o=0,n=t.l.J,t.h=new FO,t.g=vk(t.l,n?e:null,!t.u),0<t.O&&(t.M=new P6(br(t.Pa,t,t.g),t.O)),SO(t.U,t.g,"readystatechange",t.nb),e=t.I?mO(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Wf(),function M6(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var d=a[u].split("=");if(1<d.length){var p=d[0];d=d[1];var g=p.split("_");o=2<=g.length&&"type"==g[1]?o+(p+"=")+d+"&":o+(p+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.v,t.B,t.m,t.W,t.u)}function BO(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function jO(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=V6(t,n),i==LC){4==e&&(t.s=4,Gr(14),r=!1),Zl(t.j,t.m,null,"[Incomplete Response]");break}if(i==LO){t.s=4,Gr(15),Zl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Zl(t.j,t.m,i,null),BC(t,i)}BO(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,Gr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),WC(e),e.M=!0,Gr(11))):(Zl(t.j,t.m,n,"[Invalid Chunked Response]"),Hu(t),Jf(t))}function V6(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?LC:(n=Number(e.substring(n,r)),isNaN(n)?LO:(r+=1)+n>e.length?LC:(e=e.slice(r,r+n),t.o=r+n,e))}function Yf(t){t.Y=Date.now()+t.P,$O(t,t.P)}function $O(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=Zf(br(t.lb,t),e)}function Py(t){t.C&&($e.clearTimeout(t.C),t.C=null)}function Jf(t){0==t.l.H||t.J||gk(t.l,t)}function Hu(t){Py(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,xC(t.V),RO(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function BC(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||jC(n.i,t)))if(!t.K&&jC(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Uy(n),Fy(n)}GC(n),Gr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Zf(br(n.ib,n),6e3));if(1>=JO(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else qu(n,11)}else if((t.K||n.g==t)&&Uy(n),!jf(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let d=i[e];if(n.V=d[0],d=d[1],2==n.H)if("c"==d[0]){n.K=d[1],n.pa=d[2];const p=d[3];null!=p&&(n.ra=p,n.l.info("VER="+n.ra));const g=d[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];null!=_&&"number"==typeof _&&0<_&&(n.L=r=1.5*_,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const v=t.g;if(v){const E=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&($C(s,s.h),s.h=null))}if(r.F){const C=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;C&&(r.Da=C,Kt(r.I,r.F,C))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=yk(r,r.J?r.pa:null,r.Y),o.K){XO(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(Py(a),Yf(a)),r.g=o}else fk(r);0<n.j.length&&Ly(n)}else"stop"!=d[0]&&"close"!=d[0]||qu(n,7);else 3==n.H&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?qu(n,7):qC(n):"noop"!=d[0]&&n.h&&n.h.Aa(d),n.A=0)}Wf()}catch{}}function HO(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(vy(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function L6(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(vy(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function F6(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(vy(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(fe=Qf.prototype).setTimeout=function(t){this.P=t},fe.nb=function(t){t=t.target;const e=this.M;e&&3==$s(t)?e.l():this.Pa(t)},fe.Pa=function(t){try{if(t==this.g)e:{const p=$s(this.g);var e=this.g.Ia();if(this.g.da(),!(3>p)&&(3!=p||gC||this.g&&(this.h.h||this.g.ja()||ak(this.g)))){this.J||4!=p||7==e||Wf(),Py(this);var n=this.g.da();this.ca=n;t:if(BO(this)){var r=ak(this.g);t="";var i=r.length,s=4==$s(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hu(this),Jf(this);var o="";break t}this.h.i=new $e.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function x6(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,p,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jf(a)){var d=a;break t}}d=null}if(!(n=d)){this.i=!1,this.s=3,Gr(12),Hu(this),Jf(this);break e}Zl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,BC(this,n)}this.S?(jO(this,p,o),gC&&this.i&&3==p&&(SO(this.U,this.V,"tick",this.mb),this.V.start())):(Zl(this.j,this.m,o,null),BC(this,o)),4==p&&Hu(this),this.i&&!this.J&&(4==p?gk(this.l,this):(this.i=!1,Yf(this)))}else(function n8(t){const e={};t=(t.g&&2<=$s(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(jf(t[r]))continue;var n=b6(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function I6(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Gr(12)):(this.s=0,Gr(13)),Hu(this),Jf(this)}}}catch{}},fe.mb=function(){if(this.g){var t=$s(this.g),e=this.g.ja();this.o<e.length&&(Py(this),jO(this,t,e),this.i&&4!=t&&Yf(this))}},fe.cancel=function(){this.J=!0,Hu(this)},fe.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function N6(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Wf(),Gr(17)),Hu(this),this.s=2,Jf(this)):$O(this,this.Y-t)};var zO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zu(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof zu){this.h=t.h,My(this,t.j),this.s=t.s,this.g=t.g,xy(this,t.m),this.l=t.l;var e=t.i,n=new tp;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),qO(this,n),this.o=t.o}else t&&(e=String(t).match(zO))?(this.h=!1,My(this,e[1]||"",!0),this.s=Xf(e[2]||""),this.g=Xf(e[3]||"",!0),xy(this,e[4]),this.l=Xf(e[5]||"",!0),qO(this,e[6]||"",!0),this.o=Xf(e[7]||"")):(this.h=!1,this.i=new tp(null,this.h))}function Co(t){return new zu(t)}function My(t,e,n){t.j=n?Xf(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function xy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function qO(t,e,n){e instanceof tp?(t.i=e,function q6(t,e){e&&!t.j&&(Ia(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(WO(this,r),KO(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=ep(e,H6)),t.i=new tp(e,t.h))}function Kt(t,e,n){t.i.set(e,n)}function Ny(t){return Kt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Xf(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ep(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,B6),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function B6(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}zu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ep(e,GO,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(ep(e,GO,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(ep(n,"/"==n.charAt(0)?$6:j6,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ep(n,z6)),t.join("")};var GO=/[#\/\?@]/g,j6=/[#\?:]/g,$6=/[#\?]/g,H6=/[#\?@]/g,z6=/#/g;function tp(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ia(t){t.g||(t.g=new Map,t.h=0,t.i&&function U6(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function WO(t,e){Ia(t),e=Kl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function ZO(t,e){return Ia(t),e=Kl(t,e),t.g.has(e)}function KO(t,e,n){WO(t,e),0<n.length&&(t.i=null,t.g.set(Kl(t,e),fC(n)),t.h+=n.length)}function Kl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function QO(t){this.l=t||W6,t=$e.PerformanceNavigationTiming?0<(t=$e.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!($e.g&&$e.g.Ka&&$e.g.Ka()&&$e.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(fe=tp.prototype).add=function(t,e){Ia(this),this.i=null,t=Kl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},fe.forEach=function(t,e){Ia(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},fe.ta=function(){Ia(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},fe.Z=function(t){Ia(this);let e=[];if("string"==typeof t)ZO(this,t)&&(e=e.concat(this.g.get(Kl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},fe.set=function(t,e){return Ia(this),this.i=null,ZO(this,t=Kl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},fe.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var W6=10;function YO(t){return!!t.h||!!t.g&&t.g.size>=t.j}function JO(t){return t.h?1:t.g?t.g.size:0}function jC(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function $C(t,e){t.g?t.g.add(e):t.h=e}function XO(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ek(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return fC(t.i)}QO.prototype.cancel=function(){if(this.i=ek(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var Z6=class{stringify(t){return $e.JSON.stringify(t,void 0)}parse(t){return $e.JSON.parse(t,void 0)}};function K6(){this.g=new Z6}function Q6(t,e,n){const r=n||"";try{HO(t,function(i,s){let o=i;Bf(i)&&(o=PC(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Oy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function np(t){this.l=t.ec||null,this.j=t.ob||!1}function ky(t,e){Xn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=HC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jn(np,OC),np.prototype.g=function(){return new ky(this.l,this.j)},np.prototype.i=function(t){return function(){return t}}({}),Jn(ky,Xn);var HC=0;function tk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function rp(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ip(t)}function ip(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(fe=ky.prototype).open=function(t,e){if(this.readyState!=HC)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ip(this)},fe.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||$e).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rp(this)),this.readyState=HC},fe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ip(this)),this.g&&(this.readyState=3,ip(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof $e.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},fe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?rp(this):ip(this),3==this.readyState&&tk(this)}},fe.Za=function(t){this.g&&(this.response=this.responseText=t,rp(this))},fe.Ya=function(t){this.g&&(this.response=t,rp(this))},fe.ka=function(){this.g&&rp(this)},fe.setRequestHeader=function(t,e){this.v.append(t,e)},fe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},fe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ky.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var J6=$e.JSON.parse;function fn(t){Xn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nk,this.L=this.M=!1}Jn(fn,Xn);var nk="",X6=/^https?$/i,e8=["POST","PUT"];function rk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ik(t),Vy(t)}function ik(t){t.F||(t.F=!0,cr(t,"complete"),cr(t,"error"))}function sk(t){if(t.h&&typeof dC<"u"&&(!t.C[1]||4!=$s(t)||2!=t.da()))if(t.v&&4==$s(t))NC(t.La,0,t);else if(cr(t,"readystatechange"),4==$s(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(zO)[1]||null;!i&&$e.self&&$e.self.location&&(i=$e.self.location.protocol.slice(0,-1)),r=!X6.test(i?i.toLowerCase():"")}n=r}if(n)cr(t,"complete"),cr(t,"success");else{t.m=6;try{var s=2<$s(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",ik(t)}}finally{Vy(t)}}}function Vy(t,e){if(t.g){ok(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||cr(t,"ready");try{n.onreadystatechange=r}catch{}}}function ok(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&($e.clearTimeout(t.A),t.A=null)}function $s(t){return t.g?t.g.readyState:0}function ak(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case nk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function uk(t){let e="";return EC(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function zC(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=uk(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Kt(t,e,n))}function sp(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ck(t){this.Ga=0,this.j=[],this.l=new Ay,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=sp("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=sp("baseRetryDelayMs",5e3,t),this.hb=sp("retryDelaySeedMs",1e4,t),this.eb=sp("forwardChannelMaxRetries",2,t),this.xa=sp("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new QO(t&&t.concurrentRequestLimit),this.Ja=new K6,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function qC(t){if(lk(t),3==t.H){var e=t.W++,n=Co(t.I);if(Kt(n,"SID",t.K),Kt(n,"RID",e),Kt(n,"TYPE","terminate"),op(t,n),(e=new Qf(t,t.l,e)).L=2,e.A=Ny(Co(n)),n=!1,$e.navigator&&$e.navigator.sendBeacon)try{n=$e.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&$e.Image&&((new Image).src=e.A,n=!0),n||(e.g=vk(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Yf(e)}_k(t)}function Fy(t){t.g&&(WC(t),t.g.cancel(),t.g=null)}function lk(t){Fy(t),t.u&&($e.clearTimeout(t.u),t.u=null),Uy(t),t.i.cancel(),t.m&&("number"==typeof t.m&&$e.clearTimeout(t.m),t.m=null)}function Ly(t){if(!YO(t.i)&&!t.m){t.m=!0;var e=t.Na;zf||DO(),qf||(zf(),qf=!0),MC.add(e,t),t.C=0}}function dk(t,e){var n;n=e?e.m:t.W++;const r=Co(t.I);Kt(r,"SID",t.K),Kt(r,"RID",n),Kt(r,"AID",t.V),op(t,r),t.o&&t.s&&zC(r,t.o,t.s),n=new Qf(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=hk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),$C(t.i,n),UC(n,r,e)}function op(t,e){t.na&&EC(t.na,function(n,r){Kt(e,r,n)}),t.h&&HO({},function(n,r){Kt(e,r,n)})}function hk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?br(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let d=i[u].g;const p=i[u].map;if(d-=s,0>d)s=Math.max(0,i[u].g-100),a=!1;else try{Q6(p,o,"req"+d+"_")}catch{r&&r(p)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function fk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;zf||DO(),qf||(zf(),qf=!0),MC.add(e,t),t.A=0}}function GC(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Zf(br(t.Ma,t),mk(t,t.A)),t.A++,0))}function WC(t){null!=t.B&&($e.clearTimeout(t.B),t.B=null)}function pk(t){t.g=new Qf(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Co(t.wa);Kt(e,"RID","rpc"),Kt(e,"SID",t.K),Kt(e,"AID",t.V),Kt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Kt(e,"TO",t.qa),Kt(e,"TYPE","xmlhttp"),op(t,e),t.o&&t.s&&zC(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Ny(Co(e)),n.u=null,n.S=!0,UO(n,t)}function Uy(t){null!=t.v&&($e.clearTimeout(t.v),t.v=null)}function gk(t,e){var n=null;if(t.g==e){Uy(t),WC(t),t.g=null;var r=2}else{if(!jC(t.i,e))return;n=e.F,XO(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;cr(r=by(),new NO(r,n)),Ly(t)}else fk(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function r8(t,e){return!(JO(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Zf(br(t.Na,t,e),mk(t,t.C)),t.C++,0)))}(t,e)||2==r&&GC(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:qu(t,5);break;case 4:qu(t,10);break;case 3:qu(t,6);break;default:qu(t,2)}}function mk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function qu(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=br(t.pb,t);n||(n=new zu("//www.google.com/images/cleardot.gif"),$e.location&&"http"==$e.location.protocol||My(n,"https"),Ny(n)),function Y6(t,e){const n=new Ay;if($e.Image){const r=new Image;r.onload=Iy(Oy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Iy(Oy,n,r,"TestLoadImage: error",!1,e),r.onabort=Iy(Oy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Iy(Oy,n,r,"TestLoadImage: timeout",!1,e),$e.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Gr(2);t.H=0,t.h&&t.h.za(e),_k(t),lk(t)}function _k(t){if(t.H=0,t.ma=[],t.h){const e=ek(t.i);(0!=e.length||0!=t.j.length)&&(dO(t.ma,e),dO(t.ma,t.j),t.i.i.length=0,fC(t.j),t.j.length=0),t.h.ya()}}function yk(t,e,n){var r=n instanceof zu?Co(n):new zu(n);if(""!=r.g)e&&(r.g=e+"."+r.g),xy(r,r.m);else{var i=$e.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new zu(null);r&&My(s,r),e&&(s.g=e),i&&xy(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&Kt(r,n,e),Kt(r,"VER",t.ra),op(t,r),r}function vk(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fn(t.Ha&&!t.va?new np({ob:n}):t.va)).Oa(t.J),e}function Ik(){}function By(){if(Wl&&!(10<=Number(m6)))throw Error("Environmental error: no available transport.")}function vi(t,e){Xn.call(this),this.g=new ck(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!jf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jf(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ql(this)}function Ek(t){kC.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function wk(){VC.call(this),this.status=1}function Ql(t){this.g=t}function ds(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ZC(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function At(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(fe=fn.prototype).Oa=function(t){this.M=t},fe.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():FC.g(),this.C=function kO(t){return t.h||(t.h=t.i())}(this.u?this.u:FC),this.g.onreadystatechange=br(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void rk(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=$e.FormData&&t instanceof $e.FormData,!(0<=lO(e8,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ok(this),0<this.B&&((this.L=function t8(t){return Wl&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=br(this.ua,this)):this.A=NC(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){rk(this,s)}},fe.ua=function(){typeof dC<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cr(this,"timeout"),this.abort(8))},fe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,cr(this,"complete"),cr(this,"abort"),Vy(this))},fe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vy(this,!0)),fn.$.N.call(this)},fe.La=function(){this.s||(this.G||this.v||this.l?sk(this):this.kb())},fe.kb=function(){sk(this)},fe.isActive=function(){return!!this.g},fe.da=function(){try{return 2<$s(this)?this.g.status:-1}catch{return-1}},fe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},fe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),J6(e)}},fe.Ia=function(){return this.m},fe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(fe=ck.prototype).ra=8,fe.H=1,fe.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Qf(this,this.l,t);let s=this.s;if(this.U&&(s?(s=mO(s),yO(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=hk(this,i,e),Kt(n=Co(this.I),"RID",t),Kt(n,"CVER",22),this.F&&Kt(n,"X-HTTP-Session-Id",this.F),op(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(uk(s)))+"&"+e:this.o&&zC(n,this.o,s)),$C(this.i,i),this.bb&&Kt(n,"TYPE","init"),this.P?(Kt(n,"$req",e),Kt(n,"SID","null"),i.aa=!0,UC(i,n,null)):UC(i,n,e),this.H=2}}else 3==this.H&&(t?dk(this,t):0==this.j.length||YO(this.i)||dk(this))},fe.Ma=function(){if(this.u=null,pk(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Zf(br(this.jb,this),t)}},fe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Gr(10),Fy(this),pk(this))},fe.ib=function(){null!=this.v&&(this.v=null,Fy(this),GC(this),Gr(19))},fe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Gr(2)):(this.l.info("Failed to ping google.com"),Gr(1))},fe.isActive=function(){return!!this.h&&this.h.isActive(this)},(fe=Ik.prototype).Ba=function(){},fe.Aa=function(){},fe.za=function(){},fe.ya=function(){},fe.isActive=function(){return!0},fe.Va=function(){},By.prototype.g=function(t,e){return new vi(t,e)},Jn(vi,Xn),vi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Gr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=yk(t,null,t.Y),Ly(t)},vi.prototype.close=function(){qC(this.g)},vi.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=PC(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Ly(e)},vi.prototype.N=function(){this.g.h=null,delete this.j,qC(this.g),delete this.g,vi.$.N.call(this)},Jn(Ek,kC),Jn(wk,VC),Jn(Ql,Ik),Ql.prototype.Ba=function(){cr(this.g,"a")},Ql.prototype.Aa=function(t){cr(this.g,new Ek(t))},Ql.prototype.za=function(t){cr(this.g,new wk)},Ql.prototype.ya=function(){cr(this.g,"b")},Jn(ds,function i8(){this.blockSize=-1}),ds.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ds.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)ZC(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){ZC(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){ZC(this,r),i=0;break}}this.h=i,this.i+=e},ds.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var s8={};function KC(t){return-128<=t&&128>t?function f6(t,e){var n=s8;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new At([0|e],0>e?-1:0)}):new At([0|t],0>t?-1:0)}function Hs(t){if(isNaN(t)||!isFinite(t))return Yl;if(0>t)return lr(Hs(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=QC;return new At(e,0)}var QC=4294967296,Yl=KC(0),YC=KC(1),Ck=KC(16777216);function Do(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function zi(t){return-1==t.h}function lr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new At(n,~t.h).add(YC)}function jy(t,e){return t.add(lr(e))}function $y(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ap(t,e){this.g=t,this.h=e}function Hy(t,e){if(Do(e))throw Error("division by zero");if(Do(t))return new ap(Yl,Yl);if(zi(t))return e=Hy(lr(t),e),new ap(lr(e.g),lr(e.h));if(zi(e))return e=Hy(t,lr(e)),new ap(lr(e.g),e.h);if(30<t.g.length){if(zi(t)||zi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=YC,r=e;0>=r.X(t);)n=Dk(n),r=Dk(r);var i=Jl(n,1),s=Jl(r,1);for(r=Jl(r,2),n=Jl(n,2);!Do(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Jl(r,1),n=Jl(n,1)}return e=jy(t,i.R(e)),new ap(i,e)}for(i=Yl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Hs(n)).R(e);zi(o)||0<o.X(t);)o=(s=Hs(n-=r)).R(e);Do(s)&&(s=YC),i=i.add(s),t=jy(t,o)}return new ap(i,t)}function Dk(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new At(n,t.h)}function Jl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new At(i,t.h)}(fe=At.prototype).ea=function(){if(zi(this))return-lr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:QC+r)*e,e*=QC}return t},fe.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Do(this))return"0";if(zi(this))return"-"+lr(this).toString(t);for(var e=Hs(Math.pow(t,6)),n=this,r="";;){var i=Hy(n,e).g,s=((0<(n=jy(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Do(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},fe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},fe.X=function(t){return zi(t=jy(this,t))?-1:Do(t)?0:1},fe.abs=function(){return zi(this)?lr(this):this},fe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new At(n,-2147483648&n[n.length-1]?-1:0)},fe.R=function(t){if(Do(this)||Do(t))return Yl;if(zi(this))return zi(t)?lr(this).R(lr(t)):lr(lr(this).R(t));if(zi(t))return lr(this.R(lr(t)));if(0>this.X(Ck)&&0>t.X(Ck))return Hs(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,$y(n,2*r+2*i),n[2*r+2*i+1]+=s*u,$y(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,$y(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,$y(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new At(n,0)},fe.gb=function(t){return Hy(this,t).h},fe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new At(n,this.h&t.h)},fe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new At(n,this.h|t.h)},fe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new At(n,this.h^t.h)},By.prototype.createWebChannel=By.prototype.g,vi.prototype.send=vi.prototype.u,vi.prototype.open=vi.prototype.m,vi.prototype.close=vi.prototype.close,Sy.NO_ERROR=0,Sy.TIMEOUT=8,Sy.HTTP_ERROR=6,OO.COMPLETE="complete",VO.EventType=Kf,Kf.OPEN="a",Kf.CLOSE="b",Kf.ERROR="c",Kf.MESSAGE="d",Xn.prototype.listen=Xn.prototype.O,fn.prototype.listenOnce=fn.prototype.P,fn.prototype.getLastError=fn.prototype.Sa,fn.prototype.getLastErrorCode=fn.prototype.Ia,fn.prototype.getStatus=fn.prototype.da,fn.prototype.getResponseJson=fn.prototype.Wa,fn.prototype.getResponseText=fn.prototype.ja,fn.prototype.send=fn.prototype.ha,fn.prototype.setWithCredentials=fn.prototype.Oa,ds.prototype.digest=ds.prototype.l,ds.prototype.reset=ds.prototype.reset,ds.prototype.update=ds.prototype.j,At.prototype.add=At.prototype.add,At.prototype.multiply=At.prototype.R,At.prototype.modulo=At.prototype.gb,At.prototype.compare=At.prototype.X,At.prototype.toNumber=At.prototype.ea,At.prototype.toString=At.prototype.toString,At.prototype.getBits=At.prototype.D,At.fromNumber=Hs,At.fromString=function Tk(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return lr(Tk(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Hs(Math.pow(e,8)),r=Yl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Hs(Math.pow(e,s)),r=r.R(s).add(Hs(o))):r=(r=r.R(n)).add(Hs(o))}return r};var o8=ls.createWebChannelTransport=function(){return new By},a8=ls.getStatEventTarget=function(){return by()},JC=ls.ErrorCode=Sy,u8=ls.EventType=OO,c8=ls.Event=$u,Ak=ls.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},zy=(ls.FetchXmlHttpFactory=np,ls.WebChannel=VO),l8=ls.XhrIo=fn,d8=ls.Md5=ds,Xl=ls.Integer=At;const bk="@firebase/firestore";class er{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}er.UNAUTHENTICATED=new er(null),er.GOOGLE_CREDENTIALS=new er("google-credentials-uid"),er.FIRST_PARTY=new er("first-party-uid"),er.MOCK_USER=new er("mock-user");let ed="10.7.0";const Ea=new Bs.Yd("@firebase/firestore");function td(){return Ea.logLevel}function ee(t,...e){if(Ea.logLevel<=Bs.in.DEBUG){const n=e.map(XC);Ea.debug(`Firestore (${ed}): ${t}`,...n)}}function En(t,...e){if(Ea.logLevel<=Bs.in.ERROR){const n=e.map(XC);Ea.error(`Firestore (${ed}): ${t}`,...n)}}function ii(t,...e){if(Ea.logLevel<=Bs.in.WARN){const n=e.map(XC);Ea.warn(`Firestore (${ed}): ${t}`,...n)}}function XC(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function ye(t="Unexpected state"){const e=`FIRESTORE (${ed}) INTERNAL ASSERTION FAILED: `+t;throw En(e),new Error(e)}function Ae(t,e){t||ye()}function ae(t,e){return t}const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends kt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Sk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(er.UNAUTHENTICATED))}shutdown(){}}class g8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class m8{constructor(e){this.t=e,this.currentUser=er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Gn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Gn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,W.Z)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Gn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae("string"==typeof r.accessToken),new Sk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(null===e||"string"==typeof e),new er(e)}}class _8{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=er.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class y8{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _8(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v8{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae("string"==typeof n.token),this.R=n.token,new Rk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function I8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Pk{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=I8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Le(t,e){return t<e?-1:t>e?1:0}function nd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Mk(t){return t+"\0"}class on{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new on(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new on(0,0))}static max(){return new be(new on(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class up{constructor(e,n,r){void 0===n?n=0:n>e.length&&ye(),void 0===r?r=e.length-n:r>e.length-n&&ye(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===up.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof up?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ht extends up{construct(e,n,r){return new ht(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ht(n)}static emptyPath(){return new ht([])}}const E8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends up{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return E8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new J(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new J(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new J(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new J(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}class ce{constructor(e){this.path=e}static fromPath(e){return new ce(ht.fromString(e))}static fromName(e){return new ce(ht.fromString(e).popFirst(5))}static empty(){return new ce(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ht.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new ht(e.slice()))}}class rd{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function eD(t){return t.fields.find(e=>2===e.kind)}function Gu(t){return t.fields.filter(e=>2!==e.kind)}rd.UNKNOWN_ID=-1;class Wu{constructor(e,n){this.fieldPath=e,this.kind=n}}class id{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new id(0,Ii.min())}}function xk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=be.fromTimestamp(1e9===r?new on(n+1,0):new on(n,r));return new Ii(i,ce.empty(),e)}function Nk(t){return new Ii(t.readTime,t.key,-1)}class Ii{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ii(be.min(),ce.empty(),-1)}static max(){return new Ii(be.max(),ce.empty(),-1)}}function tD(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ce.comparator(t.documentKey,e.documentKey),0!==n?n:Le(t.largestBatchId,e.largestBatchId))}const Ok="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wa(t){return nD.apply(this,arguments)}function nD(){return nD=(0,W.Z)(function*(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==Ok)throw t;ee("LocalStore","Unexpectedly lost primary lease")}),nD.apply(this,arguments)}class x{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new x((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof x?n:x.resolve(n)}catch(n){return x.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):x.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):x.reject(n)}static resolve(e){return new x((n,r)=>{n(e)})}static reject(e){return new x((n,r)=>{r(e)})}static waitFor(e){return new x((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=x.resolve(!1);for(const r of e)n=n.next(i=>i?x.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new x((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(p=>{o[d]=p,++a,a===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new x((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class qy{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Gn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new cp(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=rD(r.target.error);this.V.reject(new cp(e,i))}}static open(e,n,r,i){try{return new qy(n,e.transaction(i,r))}catch(s){throw new cp(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ee("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new D8(n)}}class hs{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===hs.S((0,kt.z$)())&&En("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ee("SimpleDb","Removing database:",e),Zu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,kt.hl)())return!1;if(hs.C())return!0;const e=(0,kt.z$)(),n=hs.S(e),r=0<n&&n<10,i=hs.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,W.Z)(function*(){return n.db||(ee("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new cp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new J(V.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new J(V.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new cp(e,a))},s.onupgradeneeded=o=>{ee("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.N(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{ee("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,W.Z)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.O(e);const u=qy.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(p=>(u.g(),p)).catch(p=>(u.abort(p),x.reject(p))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,p="FirebaseError"!==d.name&&a<3;if(ee("SimpleDb","Transaction failed with error:",d.message,"Retrying:",p),s.close(),!p)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class C8{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Zu(this.k.delete())}}class cp extends J{constructor(e,n){super(V.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ta(t){return"IndexedDbTransactionError"===t.name}class D8{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(ee("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ee("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zu(r)}add(e){return ee("SimpleDb","ADD",this.store.name,e,e),Zu(this.store.add(e))}get(e){return Zu(this.store.get(e)).next(n=>(void 0===n&&(n=null),ee("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ee("SimpleDb","DELETE",this.store.name,e),Zu(this.store.delete(e))}count(){return ee("SimpleDb","COUNT",this.store.name),Zu(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new x((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new x((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){ee("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new x((r,i)=>{n.onerror=s=>{const o=rD(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new x((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new C8(a),d=n(a.primaryKey,a.value,u);if(d instanceof x){const p=d.catch(g=>(u.done(),x.reject(g)));r.push(p)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>x.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Zu(t){return new x((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=rD(r.target.error);n(i)}})}let Vk=!1;function rD(t){const e=hs.S((0,kt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Vk||(Vk=!0,setTimeout(()=>{throw r},0)),r}}return t}class A8{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;ee("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,W.Z)(function*(){n.task=null;try{ee("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){Ta(r)?ee("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield wa(r)}yield n.ee(6e4)}))}}class b8{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,W.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,s=!0;return x.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ee("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(ee("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Nk(s);tD(o,r)>0&&(r=o)}),new Ii(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Ei=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function lp(t){return null==t}function dp(t){return 0===t&&1/t==-1/0}function Fk(t){return"number"==typeof t&&Number.isInteger(t)&&!dp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Rr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Lk(e)),e=S8(t.get(n),e);return Lk(e)}function S8(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function Lk(t){return t+"\x01\x01"}function zs(t){const e=t.length;if(Ae(e>=2),2===e)return Ae("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ht.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&ye(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:ye()}s=o+2}return new ht(r)}const Uk=["userId","batchId"];function Gy(t,e){return[t,Rr(e)]}function Bk(t,e,n){return[t,Rr(e),n]}const R8={},P8=["prefixPath","collectionGroup","readTime","documentId"],M8=["prefixPath","collectionGroup","documentId"],x8=["collectionGroup","readTime","prefixPath","documentId"],N8=["canonicalId","targetId"],O8=["targetId","path"],k8=["path","targetId"],V8=["collectionId","parent"],F8=["indexId","uid"],L8=["uid","sequenceNumber"],U8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],B8=["indexId","uid","orderedDocumentKey"],j8=["userId","collectionPath","documentId"],$8=["userId","collectionPath","largestBatchId"],H8=["userId","collectionGroup","largestBatchId"],jk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],z8=[...jk,"documentOverlays"],$k=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Hk=$k,q8=[...Hk,"indexConfiguration","indexState","indexEntries"];class iD extends kk{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function tr(t,e){const n=ae(t);return hs.M(n.ae,e)}function zk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ca(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class $t{constructor(e,n){this.comparator=e,this.root=n||dr.EMPTY}insert(e,n){return new $t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dr.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wy(this.root,e,this.comparator,!0)}}class Wy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??dr.RED,this.left=i??dr.EMPTY,this.right=s??dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new dr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return dr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}dr.EMPTY=null,dr.RED=!0,dr.BLACK=!1,dr.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,n,r,i,s){return this}insert(e,n,r){return new dr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mt{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gk(this.data.getIterator())}getIteratorFrom(e){return new Gk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class Gk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sd(t){return t.hasNext()?t.getNext():void 0}class si{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new si([])}unionWith(e){let n=new Mt(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new si(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return nd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class Wk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Wk("Invalid base64 string: "+s):s}}(e);return new Wn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Wn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wn.EMPTY_BYTE_STRING=new Wn("");const W8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Da(t){if(Ae(!!t),"string"==typeof t){let e=0;const n=W8.exec(t);if(Ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pn(t.seconds),nanos:pn(t.nanos)}}function pn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ao(t){return"string"==typeof t?Wn.fromBase64String(t):Wn.fromUint8Array(t)}function Zy(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ky(t){const e=t.mapValue.fields.__previous_value__;return Zy(e)?Ky(e):e}function hp(t){const e=Da(t.mapValue.fields.__local_write_time__.timestampValue);return new on(e.seconds,e.nanos)}class Z8{constructor(e,n,r,i,s,o,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class Aa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Aa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Aa&&e.projectId===this.projectId&&e.database===this.database}}const ba={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qy={nullValue:"NULL_VALUE"};function Sa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zy(t)?4:Yk(t)?9007199254740991:10:ye()}function qs(t,e){if(t===e)return!0;const n=Sa(t);if(n!==Sa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hp(t).isEqual(hp(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Da(i.timestampValue),a=Da(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,Ao(t.bytesValue).isEqual(Ao(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return pn(i.geoPointValue.latitude)===pn(s.geoPointValue.latitude)&&pn(i.geoPointValue.longitude)===pn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return pn(i.integerValue)===pn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=pn(i.doubleValue),a=pn(s.doubleValue);return o===a?dp(o)===dp(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return nd(t.arrayValue.values||[],e.arrayValue.values||[],qs);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(zk(o)!==zk(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!qs(o[u],a[u])))return!1;return!0}(t,e);default:return ye()}var s}function fp(t,e){return void 0!==(t.values||[]).find(n=>qs(n,e))}function Ra(t,e){if(t===e)return 0;const n=Sa(t),r=Sa(e);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=pn(s.integerValue||s.doubleValue),u=pn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Zk(t.timestampValue,e.timestampValue);case 4:return Zk(hp(t),hp(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ao(s),u=Ao(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const p=Le(a[d],u[d]);if(0!==p)return p}return Le(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Le(pn(s.latitude),pn(o.latitude));return 0!==a?a:Le(pn(s.longitude),pn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let d=0;d<a.length&&d<u.length;++d){const p=Ra(a[d],u[d]);if(p)return p}return Le(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ba.mapValue&&o===ba.mapValue)return 0;if(s===ba.mapValue)return 1;if(o===ba.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const _=Le(u[g],p[g]);if(0!==_)return _;const v=Ra(a[u[g]],d[p[g]]);if(0!==v)return v}return Le(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ye()}}function Zk(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Le(t,e);const n=Da(t),r=Da(e),i=Le(n.seconds,r.seconds);return 0!==i?i:Le(n.nanos,r.nanos)}function od(t){return sD(t)}function sD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Da(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ao(t.bytesValue).toBase64():"referenceValue"in t?ce.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=sD(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${sD(n.fields[o])}`;return i+"}"}(t.mapValue):ye()}function Ku(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function oD(t){return!!t&&"integerValue"in t}function pp(t){return!!t&&"arrayValue"in t}function Kk(t){return!!t&&"nullValue"in t}function Qk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jy(t){return!!t&&"mapValue"in t}function gp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ca(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=gp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Yk(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function K8(t){return"nullValue"in t?Qy:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ku(Aa.empty(),ce.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ye()}function Q8(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ku(Aa.empty(),ce.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ba:ye()}function Jk(t,e){const n=Ra(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Xk(t,e){const n=Ra(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class hr{constructor(e){this.value=e}static empty(){return new hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Jy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gp(n)}setAll(e){let n=Qt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=gp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Jy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Jy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ca(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new hr(gp(this.value))}}function eV(t){const e=[];return Ca(t.fields,(n,r)=>{const i=new Qt([n]);if(Jy(r)){const s=eV(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new si(e)}class Yt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Yt(e,0,be.min(),be.min(),be.min(),hr.empty(),0)}static newFoundDocument(e,n,r,i){return new Yt(e,1,n,be.min(),r,i,0)}static newNoDocument(e,n){return new Yt(e,2,n,be.min(),be.min(),hr.empty(),0)}static newUnknownDocument(e,n){return new Yt(e,3,n,be.min(),be.min(),hr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pa{constructor(e,n){this.position=e,this.inclusive=n}}function tV(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?ce.comparator(ce.fromName(o.referenceValue),n.key):Ra(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function nV(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qs(t.position[n],e.position[n]))return!1;return!0}class mp{constructor(e,n="asc"){this.field=e,this.dir=n}}function Y8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class rV{}class ot extends rV{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new J8(e,n,r):"array-contains"===n?new tW(e,r):"in"===n?new cV(e,r):"not-in"===n?new nW(e,r):"array-contains-any"===n?new rW(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new X8(e,r):new eW(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ra(n,this.value)):null!==n&&Sa(this.value)===Sa(n)&&this.matchesComparison(Ra(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bt extends rV{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new bt(e,n)}matches(e){return ad(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function ad(t){return"and"===t.op}function aD(t){return"or"===t.op}function uD(t){return iV(t)&&ad(t)}function iV(t){for(const e of t.filters)if(e instanceof bt)return!1;return!0}function cD(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+od(t.value);if(uD(t))return t.filters.map(e=>cD(e)).join(",");{const e=t.filters.map(n=>cD(n)).join(",");return`${t.op}(${e})`}}function sV(t,e){return t instanceof ot?(r=t,(i=e)instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&qs(r.value,i.value)):t instanceof bt?function(r,i){return i instanceof bt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&sV(o,i.filters[a]),!0)}(t,e):void ye();var r,i}function oV(t,e){const n=t.filters.concat(e);return bt.create(n,t.op)}function aV(t){return t instanceof ot?`${(n=t).field.canonicalString()} ${n.op} ${od(n.value)}`:t instanceof bt?function(n){return n.op.toString()+" {"+n.getFilters().map(aV).join(" ,")+"}"}(t):"Filter";var n}class J8 extends ot{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class X8 extends ot{constructor(e,n){super(e,"in",n),this.keys=uV(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class eW extends ot{constructor(e,n){super(e,"not-in",n),this.keys=uV(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uV(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class tW extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pp(n)&&fp(n.arrayValue,this.value)}}class cV extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&fp(this.value.arrayValue,n)}}class nW extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(fp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!fp(this.value.arrayValue,n)}}class rW extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fp(this.value.arrayValue,r))}}class iW{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function lD(t,e=null,n=[],r=[],i=null,s=null,o=null){return new iW(t,e,n,r,i,s,o)}function Qu(t){const e=ae(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cD(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),lp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>od(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>od(r)).join(",")),e.ce=n}return e.ce}function _p(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Y8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sV(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nV(t.startAt,e.startAt)&&nV(t.endAt,e.endAt)}function Xy(t){return ce.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function ev(t,e){return t.filters.filter(n=>n instanceof ot&&n.field.isEqual(e))}function lV(t,e,n){let r=Qy,i=!0;for(const s of ev(t,e)){let o=Qy,a=!0;switch(s.op){case"<":case"<=":o=K8(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Qy}Jk({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Jk({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function dV(t,e,n){let r=ba,i=!0;for(const s of ev(t,e)){let o=ba,a=!0;switch(s.op){case">=":case">":o=Q8(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ba}Xk({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Xk({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class bo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function hV(t,e,n,r,i,s,o,a){return new bo(t,e,n,r,i,s,o,a)}function ud(t){return new bo(t)}function fV(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function dD(t){return null!==t.collectionGroup}function cd(t){const e=ae(t);if(null===e.le){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Mt(Qt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new mp(s,r))}),n.has(Qt.keyField().canonicalString())||e.le.push(new mp(Qt.keyField(),r))}return e.le}function Wr(t){const e=ae(t);return e.he||(e.he=function pV(t,e){if("F"===t.limitType)return lD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new mp(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Pa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pa(t.startAt.position,t.startAt.inclusive):null;return lD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,cd(t))),e.he}function hD(t,e){const n=t.filters.concat([e]);return new bo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tv(t,e,n){return new bo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yp(t,e){return _p(Wr(t),Wr(e))&&t.limitType===e.limitType}function gV(t){return`${Qu(Wr(t))}|lt:${t.limitType}`}function ld(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>aV(i)).join(", ")}]`),lp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>od(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>od(i)).join(",")),`Target(${r})`}(Wr(t))}; limitType=${t.limitType})`}function vp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of cd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const d=tV(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,cd(r),i)||r.endAt&&!function(o,a,u){const d=tV(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,cd(r),i)));var r,i}function mV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _V(t){return(e,n)=>{let r=!1;for(const i of cd(t)){const s=sW(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function sW(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?Ra(u,d):ye()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}class So{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ca(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return qk(this.inner)}size(){return this.innerSize}}const oW=new $t(ce.comparator);function oi(){return oW}const yV=new $t(ce.comparator);function Ip(...t){let e=yV;for(const n of t)e=e.insert(n.key,n);return e}function vV(t){let e=yV;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gs(){return Ep()}function IV(){return Ep()}function Ep(){return new So(t=>t.toString(),(t,e)=>t.isEqual(e))}const aW=new $t(ce.comparator),uW=new Mt(ce.comparator);function We(...t){let e=uW;for(const n of t)e=e.add(n);return e}const cW=new Mt(Le);function fD(){return cW}function EV(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dp(e)?"-0":e}}function wV(t){return{integerValue:""+t}}function TV(t,e){return Fk(e)?wV(e):EV(t,e)}class nv{constructor(){this._=void 0}}function lW(t,e,n){return t instanceof dd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Zy(s)&&(s=Ky(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Yu?DV(t,e):t instanceof Ju?AV(t,e):function(i,s){const o=CV(i,s),a=bV(o)+bV(i.Ie);return oD(o)&&oD(i.Ie)?wV(a):EV(i.serializer,a)}(t,e)}function dW(t,e,n){return t instanceof Yu?DV(t,e):t instanceof Ju?AV(t,e):n}function CV(t,e){return t instanceof hd?oD(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class dd extends nv{}class Yu extends nv{constructor(e){super(),this.elements=e}}function DV(t,e){const n=SV(e);for(const r of t.elements)n.some(i=>qs(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ju extends nv{constructor(e){super(),this.elements=e}}function AV(t,e){let n=SV(e);for(const r of t.elements)n=n.filter(i=>!qs(i,r));return{arrayValue:{values:n}}}class hd extends nv{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function bV(t){return pn(t.integerValue||t.doubleValue)}function SV(t){return pp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class wp{constructor(e,n){this.field=e,this.transform=n}}class fW{constructor(e,n){this.version=e,this.transformResults=n}}class an{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new an}static exists(e){return new an(void 0,e)}static updateTime(e){return new an(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rv(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class iv{}function RV(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new pd(t.key,an.none()):new fd(t.key,t.data,an.none());{const n=t.data,r=hr.empty();let i=new Mt(Qt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ro(t.key,r,new si(i.toArray()),an.none())}}function pW(t,e,n){t instanceof fd?function(i,s,o){const a=i.value.clone(),u=xV(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ro?function(i,s,o){if(!rv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=xV(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(MV(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Tp(t,e,n,r){return t instanceof fd?function(s,o,a,u){if(!rv(s.precondition,o))return a;const d=s.value.clone(),p=NV(s.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ro?function(s,o,a,u){if(!rv(s.precondition,o))return a;const d=NV(s.fieldTransforms,u,o),p=o.data;return p.setAll(MV(s)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,rv(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function gW(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=CV(r.transform,i||null);null!=s&&(null===n&&(n=hr.empty()),n.set(r.field,s))}return n||null}function PV(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&nd(r,i,(s,o)=>function hW(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Yu&&i instanceof Yu||r instanceof Ju&&i instanceof Ju?nd(r.elements,i.elements,qs):r instanceof hd&&i instanceof hd?qs(r.Ie,i.Ie):r instanceof dd&&i instanceof dd);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class fd extends iv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ro extends iv{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function MV(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function xV(t,e,n){const r=new Map;Ae(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,dW(o,a,n[i]))}return r}function NV(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,lW(s,o,e))}return r}class pd extends iv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pD extends iv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&pW(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Tp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Tp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=IV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=RV(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&nd(this.mutations,e.mutations,(n,r)=>PV(n,r))&&nd(this.baseMutations,e.baseMutations,(n,r)=>PV(n,r))}}class mD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ae(e.mutations.length===r.length);let i=aW;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new mD(e,n,r,i)}}class _D{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class _W{constructor(e,n){this.count=e,this.unchangedNames=n}}var Mn,ft;function OV(t){switch(t){default:return ye();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function kV(t){if(void 0===t)return En("GRPC error has no .code"),V.UNKNOWN;switch(t){case Mn.OK:return V.OK;case Mn.CANCELLED:return V.CANCELLED;case Mn.UNKNOWN:return V.UNKNOWN;case Mn.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Mn.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Mn.INTERNAL:return V.INTERNAL;case Mn.UNAVAILABLE:return V.UNAVAILABLE;case Mn.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Mn.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Mn.NOT_FOUND:return V.NOT_FOUND;case Mn.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Mn.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Mn.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Mn.ABORTED:return V.ABORTED;case Mn.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Mn.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Mn.DATA_LOSS:return V.DATA_LOSS;default:return ye()}}(ft=Mn||(Mn={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";function VV(){return new TextEncoder}const yW=new Xl([4294967295,4294967295],0);function FV(t){const e=VV().encode(t),n=new d8;return n.update(e),new Uint8Array(n.digest())}function LV(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xl([n,r],0),new Xl([i,s],0)]}class yD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cp(`Invalid padding: ${n}`);if(r<0)throw new Cp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Cp(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Cp(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Xl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Xl.fromNumber(r)));return 1===i.compare(yW)&&(i=new Xl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=FV(e),[r,i]=LV(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new yD(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const n=FV(e),[r,i]=LV(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Cp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Dp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ap.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dp(be.min(),i,new $t(Le),oi(),We())}}class Ap{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ap(r,n,We(),We(),We())}}class ov{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class UV{constructor(e,n){this.targetId=e,this.fe=n}}class BV{constructor(e,n,r=Wn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class jV{constructor(){this.ge=0,this.pe=HV(),this.ye=Wn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=We(),n=We(),r=We();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ye()}}),new Ap(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=HV()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ae(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class vW{constructor(e){this.Le=e,this.ke=new Map,this.qe=oi(),this.Qe=$V(),this.Ke=new $t(Le)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:ye()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(Xy(s))if(0===r){const o=new ce(s.path);this.We(n,o,Yt.newNoDocument(o,be.min()))}else Ae(1===r);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ao(r).toUint8Array()}catch(u){if(u instanceof Wk)return ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new yD(o,i,s)}catch(u){return ii(u instanceof Cp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Xy(a.target)){const u=new ce(a.target.path);null!==this.qe.get(u)||this.st(o,u)||this.We(o,u,Yt.newNoDocument(u,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=We();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Ye(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new Dp(e,n,this.Ke,this.qe,r);return this.qe=oi(),this.Qe=$V(),this.Ke=new $t(Le),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new jV,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Mt(Le),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new jV),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function $V(){return new $t(ce.comparator)}function HV(){return new $t(ce.comparator)}const IW={asc:"ASCENDING",desc:"DESCENDING"},EW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wW={and:"AND",or:"OR"};class TW{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vD(t,e){return t.useProto3Json||lp(e)?e:{value:e}}function gd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zV(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CW(t,e){return gd(t,e.toTimestamp())}function wn(t){return Ae(!!t),be.fromTimestamp(function(n){const r=Da(n);return new on(r.seconds,r.nanos)}(t))}function ID(t,e){return(r=t,new ht(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function qV(t){const e=ht.fromString(t);return Ae(eF(e)),e}function bp(t,e){return ID(t.databaseId,e.path)}function Ws(t,e){const n=qV(e);if(n.get(1)!==t.databaseId.projectId)throw new J(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(WV(n))}function ED(t,e){return ID(t.databaseId,e)}function GV(t){const e=qV(t);return 4===e.length?ht.emptyPath():WV(e)}function Sp(t){return new ht(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WV(t){return Ae(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ZV(t,e,n){return{name:bp(t,e),fields:n.value.mapValue.fields}}function KV(t,e,n){const r=Ws(t,e.name),i=wn(e.updateTime),s=e.createTime?wn(e.createTime):be.min(),o=new hr({mapValue:{fields:e.fields}}),a=Yt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Rp(t,e){let n;if(e instanceof fd)n={update:ZV(t,e.key,e.value)};else if(e instanceof pd)n={delete:bp(t,e.key)};else if(e instanceof Ro)n={update:ZV(t,e.key,e.data),updateMask:xW(e.fieldMask)};else{if(!(e instanceof pD))return ye();n={verify:bp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof dd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Yu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ju)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hd)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ye()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:CW(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ye()),n;var s}function wD(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?an.updateTime(wn(s.updateTime)):void 0!==s.exists?an.exists(s.exists):an.none():an.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Ae("REQUEST_TIME"===a.setToServerValue),u=new dd):"appendMissingElements"in a?u=new Yu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Ju(a.removeAllFromArray.values||[]):"increment"in a?u=new hd(o,a.increment):ye();const d=Qt.fromServerFormat(a.fieldPath);return new wp(d,u)}(t,i)):[];var s;if(e.update){const i=Ws(t,e.update.name),s=new hr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new si((e.updateMask.fieldPaths||[]).map(p=>Qt.fromServerFormat(p)));return new Ro(i,s,o,n,r)}return new fd(i,s,n,r)}if(e.delete){const i=Ws(t,e.delete);return new pd(i,n)}if(e.verify){const i=Ws(t,e.verify);return new pD(i,n)}return ye()}function QV(t,e){return{documents:[ED(t,e.path)]}}function TD(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ED(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ED(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return XV(bt.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(d=>{return{field:Ma((g=d).field),direction:RW(g.dir)};var g})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=vD(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function YV(t){let e=GV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ae(1===r);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(g){const _=JV(g);return _ instanceof bt&&uD(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(_=>{return new mp(md((E=_).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;n.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,lp(_)?null:_}(n.limit));let u=null;var g;n.startAt&&(u=new Pa((g=n.startAt).values||[],!!g.before));let d=null;return n.endAt&&(d=function(g){return new Pa(g.values||[],!g.before)}(n.endAt)),hV(e,i,o,s,a,"F",u,d)}function JV(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=md(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=md(n.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=md(n.unaryFilter.field);return ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=md(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(t):void 0!==t.fieldFilter?ot.create(md((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return bt.create(n.compositeFilter.filters.map(r=>JV(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye()}}(n.compositeFilter.op))}(t):ye();var n}function RW(t){return IW[t]}function PW(t){return EW[t]}function MW(t){return wW[t]}function Ma(t){return{fieldPath:t.canonicalString()}}function md(t){return Qt.fromServerFormat(t.fieldPath)}function XV(t){return t instanceof ot?function(n){if("=="===n.op){if(Qk(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NAN"}};if(Kk(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Qk(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NOT_NAN"}};if(Kk(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ma(n.field),op:PW(n.op),value:n.value}}}(t):t instanceof bt?function(n){const r=n.getFilters().map(i=>XV(i));return 1===r.length?r[0]:{compositeFilter:{op:MW(n.op),filters:r}}}(t):ye()}function xW(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function eF(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Po{constructor(e,n,r,i,s=be.min(),o=be.min(),a=Wn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Po(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Po(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tF{constructor(e){this.ut=e}}function nF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:av(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:bp(s=t.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:gd(s,o.version.toTimestamp()),createTime:gd(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Xu(e.version)};else{if(!e.isUnknownDocument())return ye();r.unknownDocument={path:n.path.toArray(),version:Xu(e.version)}}var s,o;return r}function av(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Xu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ec(t){const e=new on(t.seconds,t.nanoseconds);return be.fromTimestamp(e)}function tc(t,e){const n=(e.baseMutations||[]).map(s=>wD(t.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>wD(t.ut,s)),i=on.fromMillis(e.localWriteTimeMs);return new gD(e.batchId,i,n,r)}function Pp(t){const e=ec(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?ec(t.lastLimboFreeSnapshotVersion):be.min();let r;return r=void 0!==t.query.documents?(Ae(1===(s=t.query).documents.length),Wr(ud(GV(s.documents[0])))):function(s){return Wr(YV(s))}(t.query),new Po(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Wn.fromBase64String(t.resumeToken));var s}function rF(t,e){const n=Xu(e.snapshotVersion),r=Xu(e.lastLimboFreeSnapshotVersion);let i;i=Xy(e.target)?QV(t.ut,e.target):TD(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qu(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function CD(t){const e=YV({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?tv(e,e.limit,"L"):e}function DD(t,e){return new _D(e.largestBatchId,wD(t.ut,e.overlayMutation))}function iF(t,e){const n=e.path.lastSegment();return[t,Rr(e.path.popLast()),n]}function sF(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Xu(r.readTime),documentKey:Rr(r.documentKey.path),largestBatchId:r.largestBatchId}}class OW{getBundleMetadata(e,n){return oF(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:ec(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return oF(e).put({bundleId:(i=n).id,createTime:Xu(wn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return aF(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:CD(s.bundledQuery),readTime:ec(s.readTime)};var s})}saveNamedQuery(e,n){return aF(e).put({name:(i=n).name,readTime:Xu(wn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function oF(t){return tr(t,"bundles")}function aF(t){return tr(t,"namedQueries")}class uv{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new uv(e,n.uid||"")}getOverlay(e,n){return Mp(e).get(iF(this.userId,n)).next(r=>r?DD(this.serializer,r):null)}getOverlays(e,n){const r=Gs();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new _D(n,o);i.push(this.lt(e,a))}),x.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Rr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Mp(e).H("collectionPathOverlayIndex",a))}),x.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Gs(),s=Rr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Mp(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=DD(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Gs();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Mp(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,d,p)=>{const g=DD(this.serializer,d);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):p.done()}).next(()=>s)}lt(e,n){return Mp(e).put(function(i,s,o){const[a,u,d]=iF(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Rp(i.ut,o.mutation)}}(this.serializer,this.userId,n))}}function Mp(t){return tr(t,"documentOverlays")}class nc{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(pn(e.integerValue));else if("doubleValue"in e){const r=pn(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),dp(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Ao(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?Yk(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):ye()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),ce.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function kW(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function uF(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=kW(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}nc.St=new nc;class VW{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=uF(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=uF(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class FW{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class LW{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class xp{constructor(){this.Wt=new VW,this.Gt=new FW(this.Wt),this.zt=new LW(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class rc{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new rc(this.indexId,this.documentKey,this.arrayValue,r)}}function xa(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=cF(t.arrayValue,e.arrayValue),0!==n?n:(n=cF(t.directionalValue,e.directionalValue),0!==n?n:ce.comparator(t.documentKey,e.documentKey)))}function cF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class lF{constructor(e){this.Jt=new Mt((n,r)=>Qt.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Ae(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=eD(e);if(void 0!==n&&!this.tn(n))return!1;const r=Gu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.nn(a,u)||!this.rn(this.Yt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],r[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Mt(Qt.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Wu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Wu(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Wu(r.field,"asc"===r.dir?0:1)));return new rd(rd.UNKNOWN_ID,this.collectionId,n,id.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function dF(t){var e,n;if(Ae(t instanceof ot||t instanceof bt),t instanceof ot){if(t instanceof cV){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>ot.create(t.field,"==",s)))||[];return bt.create(i,"or")}return t}const r=t.filters.map(i=>dF(i));return bt.create(r,t.op)}function UW(t){if(0===t.getFilters().length)return[];const e=SD(dF(t));return Ae(hF(e)),AD(e)||bD(e)?[e]:e.getFilters()}function AD(t){return t instanceof ot}function bD(t){return t instanceof bt&&uD(t)}function hF(t){return AD(t)||bD(t)||function(n){if(n instanceof bt&&aD(n)){for(const r of n.getFilters())if(!AD(r)&&!bD(r))return!1;return!0}return!1}(t)}function SD(t){if(Ae(t instanceof ot||t instanceof bt),t instanceof ot)return t;if(1===t.filters.length)return SD(t.filters[0]);const e=t.filters.map(r=>SD(r));let n=bt.create(e,t.op);return n=cv(n),hF(n)?n:(Ae(n instanceof bt),Ae(ad(n)),Ae(n.filters.length>1),n.filters.reduce((r,i)=>RD(r,i)))}function RD(t,e){let n;return Ae(t instanceof ot||t instanceof bt),Ae(e instanceof ot||e instanceof bt),n=t instanceof ot?e instanceof ot?bt.create([t,e],"and"):fF(t,e):e instanceof ot?fF(e,t):function(i,s){if(Ae(i.filters.length>0&&s.filters.length>0),ad(i)&&ad(s))return oV(i,s.getFilters());const o=aD(i)?i:s,a=aD(i)?s:i,u=o.filters.map(d=>RD(d,a));return bt.create(u,"or")}(t,e),cv(n)}function fF(t,e){if(ad(e))return oV(e,t.getFilters());{const n=e.filters.map(r=>RD(t,r));return bt.create(n,"or")}}function cv(t){if(Ae(t instanceof ot||t instanceof bt),t instanceof ot)return t;const e=t.getFilters();if(1===e.length)return cv(e[0]);if(iV(t))return t;const n=e.map(i=>cv(i)),r=[];return n.forEach(i=>{i instanceof ot?r.push(i):i instanceof bt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:bt.create(r,t.op)}class BW{constructor(){this.on=new PD}addToCollectionParentIndex(e,n){return this.on.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Ii.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}}class PD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Mt(ht.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mt(ht.comparator)).toArray()}}const lv=new Uint8Array(0);class jW{constructor(e,n){this.user=e,this.databaseId=n,this._n=new PD,this.an=new So(r=>Qu(r),(r,i)=>_p(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:r,parent:Rr(i)};return pF(e).put(s)}return x.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Mk(n),""],!1,!0);return pF(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(zs(o.parent))}return r})}addFieldIndex(e,n){const r=Np(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=yd(e);return s.next(a=>{o.put(sF(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Np(e),i=yd(e),s=_d(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Np(e),r=_d(e),i=yd(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return x.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new lF(r).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=_d(e);let i=!0;const s=new Map;return x.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=We();const a=[];return x.forEach(s,(u,d)=>{var j;ee("IndexedDbIndexManager",`Using index ${j=u,`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(ne=>`${ne.fieldPath}:${ne.kind}`).join(",")}`} to execute ${Qu(n)}`);const p=function(j,ne){const de=eD(ne);if(void 0===de)return null;for(const Ue of ev(j,de.fieldPath))switch(Ue.op){case"array-contains-any":return Ue.value.arrayValue.values||[];case"array-contains":return[Ue.value]}return null}(d,u),g=function(j,ne){const de=new Map;for(const Ue of Gu(ne))for(const It of ev(j,Ue.fieldPath))switch(It.op){case"==":case"in":de.set(Ue.fieldPath.canonicalString(),It.value);break;case"not-in":case"!=":return de.set(Ue.fieldPath.canonicalString(),It.value),Array.from(de.values())}return null}(d,u),_=function(j,ne){const de=[];let Ue=!0;for(const It of Gu(ne)){const Zn=0===It.kind?lV(j,It.fieldPath,j.startAt):dV(j,It.fieldPath,j.startAt);de.push(Zn.value),Ue&&(Ue=Zn.inclusive)}return new Pa(de,Ue)}(d,u),v=function(j,ne){const de=[];let Ue=!0;for(const It of Gu(ne)){const Zn=0===It.kind?dV(j,It.fieldPath,j.endAt):lV(j,It.fieldPath,j.endAt);de.push(Zn.value),Ue&&(Ue=Zn.inclusive)}return new Pa(de,Ue)}(d,u),E=this.ln(u,d,_),C=this.ln(u,d,v),S=this.hn(u,d,g),O=this.Pn(u.indexId,p,E,_.inclusive,C,v.inclusive,S);return x.forEach(O,R=>r.j(R,n.limit).next(j=>{j.forEach(ne=>{const de=ce.fromSegments(ne.documentKey);o.has(de)||(o=o.add(de),a.push(de))})}))}).next(()=>a)}return x.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:UW(bt.create(e.filters,"and")).map(r=>lD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){const u=(null!=n?n.length:1)*Math.max(r.length,s.length),d=u/(null!=n?n.length:1),p=[];for(let g=0;g<u;++g){const _=n?this.In(n[g/d]):lv,v=this.Tn(e,_,r[g%d],i),E=this.En(e,_,s[g%d],o),C=a.map(S=>this.Tn(e,_,S,!0));p.push(...this.createRange(v,E,C))}return p}Tn(e,n,r,i){const s=new rc(e,ce.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){const s=new rc(e,ce.empty(),n,r);return i?s.Ht():s}cn(e,n){const r=new lF(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.un(n);return x.forEach(i,s=>this.cn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new Mt(Qt.comparator),p=!1;for(const g of u.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?p=!0:d=d.add(_.field));for(const g of u.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(p?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new xp;for(const i of Gu(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.jt(i.kind);nc.St.ht(s,o)}return r.Ut()}In(e){const n=new xp;return nc.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new xp;return nc.St.ht(Ku(this.databaseId,n),r.jt(function(s){const o=Gu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new xp);let s=0;for(const o of Gu(e)){const a=r[s++];for(const u of i)if(this.Rn(n,o.fieldPath)&&pp(a))i=this.Vn(i,o,a);else{const d=u.jt(o.kind);nc.St.ht(a,d)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new xp;u.seed(a.Ut()),nc.St.ht(o,u.jt(n.kind)),s.push(u)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof ot&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Np(e),i=yd(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return x.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(p,g){const _=g?new id(g.sequenceNumber,new Ii(ec(g.readTime),new ce(zs(g.documentKey)),g.largestBatchId)):id.empty(),v=p.fields.map(([E,C])=>new Wu(Qt.fromServerFormat(E),C));return new rd(p.indexId,p.collectionGroup,v,_)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Le(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Np(e),s=yd(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>x.forEach(a,u=>s.put(sF(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return x.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?x.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),x.forEach(a,u=>this.gn(e,i,u).next(d=>{const p=this.pn(s,u);return d.isEqual(p)?x.resolve():this.yn(e,s,u,d,p)}))))})}wn(e,n,r,i){return _d(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return _d(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=_d(e);let s=new Mt(xa);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new rc(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new Mt(xa);const i=this.dn(n,e);if(null==i)return r;const s=eD(n);if(null!=s){const o=e.data.field(s.fieldPath);if(pp(o))for(const a of o.arrayValue.values||[])r=r.add(new rc(n.indexId,e.key,this.In(a),i))}else r=r.add(new rc(n.indexId,e.key,lv,i));return r}yn(e,n,r,i,s){ee("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,d,p,g,_){const v=u.getIterator(),E=d.getIterator();let C=sd(v),S=sd(E);for(;C||S;){let O=!1,R=!1;if(C&&S){const j=p(C,S);j<0?R=!0:j>0&&(O=!0)}else null!=C?R=!0:O=!0;O?(g(S),S=sd(E)):R?(_(C),C=sd(v)):(C=sd(v),S=sd(E))}}(i,s,xa,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),x.waitFor(o)}fn(e){let n=1;return yd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>xa(o,a)).filter((o,a,u)=>!a||0!==xa(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=xa(o,e),u=xa(o,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(o),i.push(o.Ht());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,lv,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,lv,[]]))}return s}bn(e,n){return xa(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(gF)}getMinOffset(e,n){return x.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||ye())).next(gF)}}function pF(t){return tr(t,"collectionParents")}function _d(t){return tr(t,"indexEntries")}function Np(t){return tr(t,"indexConfiguration")}function yd(t){return tr(t,"indexState")}function gF(t){Ae(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;tD(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ii(e.readTime,e.documentKey,n)}const mF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Pr(e,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _F(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:o},(p,g,_)=>(a++,_.delete()));s.push(u.next(()=>{Ae(1===a)}));const d=[];for(const p of n.mutations){const g=Bk(e,p.key.path,n.batchId);s.push(i.delete(g)),d.push(p.key)}return x.waitFor(s).next(()=>d)}function dv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ye();e=t.noDocument}return JSON.stringify(e).length}Pr.DEFAULT_COLLECTION_PERCENTILE=10,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pr.DEFAULT=new Pr(41943040,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pr.DISABLED=new Pr(-1,0,0);class hv{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){Ae(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new hv(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Na(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=vd(e),o=Na(e);return o.add({}).next(a=>{Ae("number"==typeof a);const u=new gD(a,n,r,i),d=function(v,E,C){const S=C.baseMutations.map(R=>Rp(v.ut,R)),O=C.mutations.map(R=>Rp(v.ut,R));return{userId:E,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:S,mutations:O}}(this.serializer,this.userId,u),p=[];let g=new Mt((_,v)=>Le(_.canonicalString(),v.canonicalString()));for(const _ of i){const v=Bk(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),p.push(o.put(d)),p.push(s.put(v,R8))}return g.forEach(_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),x.waitFor(p).next(()=>u)})}lookupMutationBatch(e,n){return Na(e).get(n).next(r=>r?(Ae(r.userId===this.userId),tc(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?x.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Na(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Ae(a.batchId>=r),s=tc(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Na(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Na(e).W("userMutationsIndex",n).next(r=>r.map(i=>tc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Gy(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return vd(e).Y({range:i},(o,a,u)=>{const[d,p,g]=o,_=zs(p);if(d===this.userId&&n.path.isEqual(_))return Na(e).get(g).next(v=>{if(!v)throw ye();Ae(v.userId===this.userId),s.push(tc(this.serializer,v))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(Le);const i=[];return n.forEach(s=>{const o=Gy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=vd(e).Y({range:a},(d,p,g)=>{const[_,v,E]=d,C=zs(v);_===this.userId&&s.path.isEqual(C)?r=r.add(E):g.done()});i.push(u)}),x.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Gy(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Mt(Le);return vd(e).Y({range:o},(u,d,p)=>{const[g,_,v]=u,E=zs(_);g===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(v)):p.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Na(e).get(s).next(o=>{if(null===o)throw ye();Ae(o.userId===this.userId),r.push(tc(this.serializer,o))}))}),x.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return _F(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),x.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return x.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return vd(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=zs(s[1]);i.push(u)}else a.done()}).next(()=>{Ae(0===i.length)})})}containsKey(e,n){return yF(e,this.userId,n)}Mn(e){return vF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function yF(t,e,n){const r=Gy(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return vd(t).Y({range:s,J:!0},(a,u,d)=>{const[p,g,_]=a;p===e&&g===i&&(o=!0),d.done()}).next(()=>o)}function Na(t){return tr(t,"mutations")}function vd(t){return tr(t,"documentMutations")}function vF(t){return tr(t,"mutationQueues")}class ic{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new ic(0)}static Nn(){return new ic(-1)}}class $W{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new ic(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>be.fromTimestamp(new on(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Id(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Ae(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Id(e).Y((o,a)=>{const u=Pp(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>x.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Id(e).Y((r,i)=>{const s=Pp(i);n(s)})}Bn(e){return IF(e).get("targetGlobalKey").next(n=>(Ae(null!==n),n))}Ln(e,n){return IF(e).put("targetGlobalKey",n)}kn(e,n){return Id(e).put(rF(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Qu(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Id(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=Pp(a);_p(n,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Oa(e);return n.forEach(o=>{const a=Rr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),x.waitFor(i)}removeMatchingKeys(e,n,r){const i=Oa(e);return x.forEach(n,s=>{const o=Rr(s.path);return x.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Oa(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Oa(e);let s=We();return i.Y({range:r,J:!0},(o,a,u)=>{const d=zs(o[1]),p=new ce(d);s=s.add(p)}).next(()=>s)}containsKey(e,n){const r=Rr(n.path),i=IDBKeyRange.bound([r],[Mk(r)],!1,!0);let s=0;return Oa(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}_t(e,n){return Id(e).get(n).next(r=>r?Pp(r):null)}}function Id(t){return tr(t,"targets")}function IF(t){return tr(t,"targetGlobal")}function Oa(t){return tr(t,"targetDocuments")}function EF([t,e],[n,r]){const i=Le(t,n);return 0===i?Le(e,r):i}class HW{constructor(e){this.Qn=e,this.buffer=new Mt(EF),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();EF(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class wF{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,W.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Ta(r)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield wa(r)}yield n.Gn(3e5)}))}}class zW{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return x.resolve(Ei._e);const r=new HW(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(mF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mF):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,u,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),td()<=Bs.in.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-p}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(d-u)+`ms\nTotal Duration: ${d-p}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class qW{constructor(e,n){this.db=e,this.garbageCollector=function TF(t,e){return new zW(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return fv(e,r)}removeReference(e,n,r){return fv(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return fv(e,n)}Xn(e,n){return function(i,s){let o=!1;return vF(i).Z(a=>yF(i,a,s).next(u=>(u&&(o=!0),x.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=n){const u=this.Xn(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,be.min()),Oa(e).delete([0,Rr(o.path)])))});i.push(u)}}).next(()=>x.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return fv(e,n)}Zn(e,n){const r=Oa(e);let i,s=Ei._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==Ei._e&&n(new ce(zs(i)),s),s=d,i=u):s=Ei._e}).next(()=>{s!==Ei._e&&n(new ce(zs(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fv(t,e){return Oa(t).put((i=t.currentSequenceNumber,{targetId:0,path:Rr(e.path),sequenceNumber:i}));var i}class CF{constructor(){this.changes=new So(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class GW{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return sc(e).put(r)}removeEntry(e,n,r){return sc(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],av(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Yt.newInvalidDocument(n);return sc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Op(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:Yt.newInvalidDocument(n)};return sc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Op(n))},(i,s)=>{r={document:this.tr(n,s),size:dv(s)}}).next(()=>r)}getEntries(e,n){let r=oi();return this.rr(e,n,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=oi(),i=new $t(ce.comparator);return this.rr(e,n,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,dv(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return x.resolve();let i=new Mt(SF);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Op(i.first()),Op(i.last())),o=i.getIterator();let a=o.getNext();return sc(e).Y({index:"documentKeyIndex",range:s},(u,d,p)=>{const g=ce.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&SF(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?p.U(Op(a)):p.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),av(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sc(e).W(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let p=oi();for(const g of d){const _=this.tr(ce.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(vp(n,_)||i.has(_.key))&&(p=p.insert(_.key,_))}return p})}getAllFromCollectionGroup(e,n,r,i){let s=oi();const o=bF(n,r),a=bF(n,Ii.max());return sc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,p)=>{const g=this.tr(ce.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(e){return new WW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return AF(e).get("remoteDocumentGlobalKey").next(n=>(Ae(!!n),n))}er(e,n){return AF(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function NW(t,e){let n;if(e.document)n=KV(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ce.fromSegments(e.noDocument.path),i=ec(e.noDocument.readTime);n=Yt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye();{const r=ce.fromSegments(e.unknownDocument.path),i=ec(e.unknownDocument.version);n=Yt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new on(i[0],i[1]);return be.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(be.min()))return r}return Yt.newInvalidDocument(e)}}function DF(t){return new GW(t)}class WW extends CF{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new So(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Mt((s,o)=>Le(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=nF(this._r.serializer,o);i=i.add(s.path.popLast());const d=dv(u);r+=d-a.size,n.push(this._r.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=nF(this._r.serializer,o.convertToNoDocument(be.min()));n.push(this._r.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),x.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function AF(t){return tr(t,"remoteDocumentGlobal")}function sc(t){return tr(t,"remoteDocumentsV14")}function Op(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bF(t,e){const n=e.documentKey.path.toArray();return[t,av(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function SF(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Le(n[s],r[s]),i)return i;return i=Le(n.length,r.length),i||(i=Le(n[n.length-2],r[r.length-2]),i||Le(n[n.length-1],r[r.length-1]))}class ZW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class RF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Tp(r.mutation,i,si.empty(),on.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,n,r=We()){const i=Gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ip();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,We()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=oi();const o=Ep(),a=Ep();return n.forEach((u,d)=>{const p=r.get(d.key);i.has(d.key)&&(void 0===p||p.mutation instanceof Ro)?s=s.insert(d.key,d):void 0!==p?(o.set(d.key,p.mutation.getFieldMask()),Tp(p.mutation,d,p.mutation.getFieldMask(),on.now())):o.set(d.key,si.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var g;return a.set(d,new ZW(p,null!==(g=o.get(d))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ep();let i=new $t((o,a)=>o-a),s=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=n.get(u);if(null===d)return;let p=r.get(u)||si.empty();p=a.applyToLocalView(d,p),r.set(u,p);const g=(i.get(a.batchId)||We()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,p=u.value,g=IV();p.forEach(_=>{if(!s.has(_)){const v=RV(n.get(_),r.get(_));null!==v&&g.set(_,v),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return ce.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):dD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):x.resolve(Gs());let a=-1,u=s;return o.next(d=>x.forEach(d,(p,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(p)?x.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{u=u.insert(p,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,We())).next(p=>({batchId:a,changes:vV(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let i=Ip();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ip();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,u=>{const d=(g=n,_=u.child(s),new bo(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const p=d.getKey();null===o.get(p)&&(o=o.insert(p,Yt.newInvalidDocument(p)))});let a=Ip();return o.forEach((u,d)=>{const p=s.get(u);void 0!==p&&Tp(p.mutation,d,si.empty(),on.now()),vp(n,d)&&(a=a.insert(u,d))}),a})}}class KW{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return x.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:wn(i.createTime)}),x.resolve();var i}getNamedQuery(e,n){return x.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:CD(i.bundledQuery),readTime:wn(i.readTime)}),x.resolve();var i}}class QW{constructor(){this.overlays=new $t(ce.comparator),this.lr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gs();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){const i=Gs(),s=n.length+1,o=new ce(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new $t((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=s.get(d.largestBatchId);null===p&&(p=Gs(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const a=Gs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>a.set(d,p)),!(a.size()>=i)););return x.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new _D(n,r));let s=this.lr.get(n);void 0===s&&(s=We(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}class MD{constructor(){this.hr=new Mt(nr.Pr),this.Ir=new Mt(nr.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new nr(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new nr(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new ce(new ht([])),r=new nr(n,e),i=new nr(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new ce(new ht([])),r=new nr(n,e),i=new nr(n,e+1);let s=We();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new nr(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class nr{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return ce.comparator(e.key,n.key)||Le(e.gr,n.gr)}static Tr(e,n){return Le(e.gr,n.gr)||ce.comparator(e.key,n.key)}}class YW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Mt(nr.Pr)}checkEmpty(e){return x.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++;const o=new gD(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new nr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nr(n,0),i=new nr(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(Le);return n.forEach(i=>{const s=new nr(i,0),o=new nr(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),x.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ce.isDocumentKey(s)||(s=s.child(""));const o=new nr(new ce(s),0);let a=new Mt(Le);return this.yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.gr)),!0)},o),x.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Ae(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return x.forEach(n.mutations,i=>{const s=new nr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new nr(n,0),i=this.yr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return x.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class JW{constructor(e){this.Cr=e,this.docs=new $t(ce.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(n))}getEntries(e,n){let r=oi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Yt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=oi();const o=n.path,a=new ce(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||tD(Nk(p),r)<=0||(i.has(p.key)||vp(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ye()}vr(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new XW(this)}getSize(e){return x.resolve(this.size)}}class XW extends CF{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class e7{constructor(e){this.persistence=e,this.Fr=new So(n=>Qu(n),_p),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Mr=0,this.Or=new MD,this.targetCount=0,this.Nr=ic.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),x.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new ic(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.kn(n),x.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),x.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Or.containsKey(n))}}class xD{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Ei(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new e7(this),this.indexManager=new BW,this.remoteDocumentCache=new JW(r=>this.referenceDelegate.Qr(r)),this.serializer=new tF(n),this.Kr=new KW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new YW(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new t7(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return x.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class t7 extends kk{constructor(e){super(),this.currentSequenceNumber=e}}class pv{constructor(e){this.persistence=e,this.Gr=new MD,this.zr=null}static jr(e){return new pv(e)}get Hr(){if(this.zr)return this.zr;throw ye()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Hr,r=>{const i=ce.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,be.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return x.or([()=>x.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class n7{constructor(e){this.serializer=e}N(e,n,r,i){const s=new qy("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Uk,{unique:!0}),u.createObjectStore("documentMutations"),PF(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=x.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),PF(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").W().next(p=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Uk,{unique:!0});const g=d.store("mutations"),_=p.map(v=>g.put(v));return x.waitFor(_)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:j8});d.createIndex("collectionPathOverlayIndex",$8,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",H8,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:P8});d.createIndex("documentKeyIndex",M8),d.createIndex("collectionGroupIndex",x8)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:F8}).createIndex("sequenceNumberIndex",L8,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:U8}).createIndex("documentKeyIndex",B8,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=dv(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>x.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>x.forEach(a,u=>{Ae(u.userId===s.userId);const d=tc(this.serializer,u);return _F(e,s.userId,d).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const u=new ht(o),d=[0,Rr(u)];s.push(n.get(d).next(p=>p?x.resolve():n.put({targetId:0,path:Rr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>x.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:V8});const r=n.store("collectionParents"),i=new PD,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Rr(u)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const u=new ht(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,u],d)=>{const p=zs(a);return s(p.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const s=Pp(i),o=rF(this.serializer,s);return n.put(o)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(g=o,g.document?new ce(ht.fromString(g.document.name).popFirst(5)):g.noDocument?ce.fromSegments(g.noDocument.path):g.unknownDocument?ce.fromSegments(g.unknownDocument.path):ye()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(d))}).next(()=>x.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=DF(this.serializer),s=new xD(pv.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var d;let p=null!==(d=a.get(u.userId))&&void 0!==d?d:We();tc(this.serializer,u).keys().forEach(g=>p=p.add(g)),a.set(u.userId,p)}),x.forEach(a,(u,d)=>{const p=new er(d),g=uv.ct(this.serializer,p),_=s.getIndexManager(p),v=hv.ct(p,this.serializer,_,s.referenceDelegate);return new RF(i,v,g,_).recalculateAndSaveOverlaysForDocumentKeys(new iD(n,Ei._e),u).next()})})}}function PF(t){t.createObjectStore("targetDocuments",{keyPath:O8}).createIndex("documentTargetsIndex",k8,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",N8,{unique:!0}),t.createObjectStore("targetGlobal")}const ND="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class OD{constructor(e,n,r,i,s,o,a,u,d,p,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=d,this._i=p,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=_=>Promise.resolve(),!OD.D())throw new J(V.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qW(this,i),this.Ii=n+"main",this.serializer=new tF(u),this.Ti=new hs(this.Ii,this.ai,new n7(this.serializer)),this.qr=new $W(this.referenceDelegate,this.serializer),this.remoteDocumentCache=DF(this.serializer),this.Kr=new OW,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===p&&En("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(V.FAILED_PRECONDITION,ND);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Ei(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,W.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,W.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,W.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>mv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Ta(e))return ee("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return kp(e).get("owner").next(n=>x.resolve(this.wi(n)))}Si(e){return mv(e).delete(this.clientId)}bi(){var e=this;return(0,W.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=tr(r,"clientMetadata");return i.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return x.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?x.resolve(!0):kp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new J(V.FAILED_PRECONDITION,ND);return!1}}return!(!this.networkEnabled||!this.inForeground)||mv(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ee("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,W.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new iD(n,Ei._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>mv(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return hv.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jW(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return uv.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){ee("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(u=this.ai)?q8:14===u?Hk:13===u?$k:12===u?z8:11===u?jk:void ye();var u;let o;return this.Ti.runTransaction(e,i,s,a=>(o=new iD(a,this.Lr?this.Lr.next():Ei._e),"readwrite-primary"===n?this.fi(o).next(u=>!!u||this.gi(o)).next(u=>{if(!u)throw En(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new J(V.FAILED_PRECONDITION,Ok);return r(o)}).next(u=>this.yi(o).next(()=>u)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return kp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(V.FAILED_PRECONDITION,ND)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kp(e).put("owner",n)}static D(){return hs.D()}pi(e){const n=kp(e);return n.get("owner").next(r=>this.wi(r)?(ee("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):x.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(En(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,kt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return ee("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return En("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){En("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kp(t){return tr(t,"owner")}function mv(t){return tr(t,"clientMetadata")}function kD(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class VD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=We(),i=We();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new VD(e,n.fromCache,r,i)}}class r7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class MF{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new r7;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(td()<=Bs.in.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",ld(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),x.resolve()):(td()<=Bs.in.DEBUG&&ee("QueryEngine","Query:",ld(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(td()<=Bs.in.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",ld(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wr(n))):x.resolve())}zi(e,n){if(fV(n))return x.resolve(null);let r=Wr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=tv(n,null,"F"),r=Wr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=We(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Yi(n,a);return this.Zi(n,d,o,u.readTime)?this.zi(e,tv(n,null,"F")):this.Xi(e,d,n,u)}))})))}ji(e,n,r,i){return fV(n)||i.isEqual(be.min())?x.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?x.resolve(null):(td()<=Bs.in.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ld(n)),this.Xi(e,o,n,xk(i,-1)).next(a=>a))})}Yi(e,n){let r=new Mt(_V(e));return n.forEach((i,s)=>{vp(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return td()<=Bs.in.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",ld(n)),this.Gi.getDocumentsMatchingQuery(e,n,Ii.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class i7{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new $t(Le),this.ns=new So(s=>Qu(s),_p),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RF(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function xF(t,e,n,r){return new i7(t,e,n,r)}function NF(t,e){return FD.apply(this,arguments)}function FD(){return FD=(0,W.Z)(function*(t,e){const n=ae(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=We();for(const d of i){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of s){a.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({_s:d,removedBatchIds:o,addedBatchIds:a}))})})}),FD.apply(this,arguments)}function OF(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function kF(t,e,n){let r=We(),i=We();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=oi();return n.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(be.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{us:o,cs:i}})}function a7(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ed(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new Po(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function wd(t,e,n){return LD.apply(this,arguments)}function LD(){return LD=(0,W.Z)(function*(t,e,n){const r=ae(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ta(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),LD.apply(this,arguments)}function _v(t,e,n){const r=ae(t);let i=be.min(),s=We();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const g=ae(u),_=g.ns.get(p);return void 0!==_?x.resolve(g.ts.get(_)):g.qr.getTargetData(d,p)}(r,o,Wr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:be.min(),n?s:We())).next(a=>(LF(r,mV(e),a),{documents:a,ls:s})))}function VF(t,e){const n=ae(t),r=ae(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function FF(t,e){const n=ae(t),r=n.rs.get(e)||be.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,xk(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(LF(n,e,i),i))}function LF(t,e,n){let r=t.rs.get(e)||be.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function UD(){return UD=(0,W.Z)(function*(t,e,n,r){const i=ae(t);let s=We(),o=oi();for(const d of n){const p=e.hs(d.metadata.name);d.document&&(s=s.add(p));const g=e.Ps(d);g.setReadTime(e.Is(d.metadata.readTime)),o=o.insert(p,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield Ed(i,(p=r,Wr(ud(ht.fromString(`__bundle__/docs/${p}`)))));var p;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>kF(d,a,o).next(p=>(a.apply(d),p)).next(p=>i.qr.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.qr.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,p.us,p.cs)).next(()=>p.us)))}),UD.apply(this,arguments)}function c7(t,e){return BD.apply(this,arguments)}function BD(){return BD=(0,W.Z)(function*(t,e,n=We()){const r=yield Ed(t,Wr(CD(e.bundledQuery))),i=ae(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=wn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(Wn.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}),BD.apply(this,arguments)}function UF(t,e){return`firestore_clients_${t}_${e}`}function BF(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function jD(t,e){return`firestore_targets_${t}_${e}`}class yv{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new J(i.error.code,i.error.message))),o?new yv(e,n,i.state,s):(En("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new J(r.error.code,r.error.message))),s?new Vp(e,r.state,i):(En("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vv{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=fD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Fk(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new vv(e,s):(En("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class $D{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new $D(n.clientId,n.onlineState):(En("SharedClientState",`Failed to parse online state: ${e}`),null)}}class HD{constructor(){this.activeTargetIds=fD()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zD{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new $t(Le),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=UF(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new HD),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,W.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const s=e.getItem(UF(e.persistenceKey,i));if(s){const o=vv.Ts(i,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(jD(this.persistenceKey,e));if(r){const i=Vp.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jD(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ee("SharedClientState","READ",e,n),n}setItem(e,n){ee("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ee("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(ee("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void En("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,W.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(o){let a=Ei._e;if(null!=o)try{const u=JSON.parse(o);Ae("number"==typeof u),a=u}catch(u){En("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Ei._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Js(s)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new yv(this.currentUser,e,n,r),s=BF(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const n=BF(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=jD(this.persistenceKey,e),s=new Vp(e,n,r);this.setItem(i,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return vv.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return yv.Ts(new er(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Vp.Ts(i,n)}Ms(e){return $D.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,W.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);ee("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=fD();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class jF{constructor(){this.eo=new HD,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new HD,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class l7{ro(e){}shutdown(){}}class $F{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Iv=null;function qD(){return null===Iv?Iv=268435456+Math.round(2147483648*Math.random()):Iv++,"0x"+Iv.toString(16)}const d7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class h7{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Mr="WebChannelConnection";class f7 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=qD(),u=this.So(n,r);ee("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(d,s,o),this.Do(n,u,d,i).then(p=>(ee("RestConnection",`Received RPC '${n}' ${a}: `,p),p),p=>{throw ii("RestConnection",`RPC '${n}' ${a} failed with error: `,p,"url: ",u,"request:",i),p})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+ed,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){return`${this.mo}/v1/${r}:${d7[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=qD();return new Promise((o,a)=>{const u=new l8;u.setWithCredentials(!0),u.listenOnce(u8.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case JC.NO_ERROR:const p=u.getResponseJson();ee(Mr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case JC.TIMEOUT:ee(Mr,`RPC '${e}' ${s} timed out`),a(new J(V.DEADLINE_EXCEEDED,"Request time out"));break;case JC.HTTP_ERROR:const g=u.getStatus();if(ee(Mr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const v=_?.error;if(v&&v.status&&v.message){const E=function(S){const O=S.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(O)>=0?O:V.UNKNOWN}(v.status);a(new J(E,v.message))}else a(new J(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new J(V.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{ee(Mr,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);ee(Mr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}vo(e,n,r){const i=qD(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=o8(),a=a8(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=s.join("");ee(Mr,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=o.createWebChannel(p,u);let _=!1,v=!1;const E=new h7({co:S=>{v?ee(Mr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(_||(ee(Mr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),ee(Mr,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},lo:()=>g.close()}),C=(S,O,R)=>{S.listen(O,j=>{try{R(j)}catch(ne){setTimeout(()=>{throw ne},0)}})};return C(g,zy.EventType.OPEN,()=>{v||ee(Mr,`RPC '${e}' stream ${i} transport opened.`)}),C(g,zy.EventType.CLOSE,()=>{v||(v=!0,ee(Mr,`RPC '${e}' stream ${i} transport closed`),E.Ro())}),C(g,zy.EventType.ERROR,S=>{v||(v=!0,ii(Mr,`RPC '${e}' stream ${i} transport errored:`,S),E.Ro(new J(V.UNAVAILABLE,"The operation could not be completed")))}),C(g,zy.EventType.MESSAGE,S=>{var O;if(!v){const R=S.data[0];Ae(!!R);const ne=R.error||(null===(O=R[0])||void 0===O?void 0:O.error);if(ne){ee(Mr,`RPC '${e}' stream ${i} received error:`,ne);const de=ne.status;let Ue=function(gg){const sI=Mn[gg];if(void 0!==sI)return kV(sI)}(de),It=ne.message;void 0===Ue&&(Ue=V.INTERNAL,It="Unknown error status: "+de+" with message "+ne.message),v=!0,E.Ro(new J(Ue,It)),g.close()}else ee(Mr,`RPC '${e}' stream ${i} received:`,R),E.Vo(R)}}),C(a,c8.STAT_EVENT,S=>{S.stat===Ak.PROXY?ee(Mr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Ak.NOPROXY&&ee(Mr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function HF(){return typeof window<"u"?window:null}function Ev(){return typeof document<"u"?document:null}function Fp(t){return new TW(t,!0)}class GD{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class zF{constructor(e,n,r,i,s,o,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new GD(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,W.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,W.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,W.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(En(n.toString()),En("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===V.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new J(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,W.Z)(function*(){e.state=0,e.start()}))}o_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class p7 extends zF{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function AW(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:ye(),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(Ae(void 0===p||"string"==typeof p),Wn.fromBase64String(p||"")):(Ae(void 0===p||p instanceof Uint8Array),Wn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const p=void 0===d.code?V.UNKNOWN:kV(d.code);return new J(p,d.message||"")}(o);n=new BV(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Ws(t,r.document.name),s=wn(r.document.updateTime),o=r.document.createTime?wn(r.document.createTime):be.min(),a=new hr({mapValue:{fields:r.document.fields}}),u=Yt.newFoundDocument(i,s,o,a);n=new ov(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Ws(t,r.document),s=r.readTime?wn(r.readTime):be.min(),o=Yt.newNoDocument(i,s);n=new ov([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Ws(t,r.document);n=new ov([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ye();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new _W(i,s);n=new UV(r.targetId,o)}}var d;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return be.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?be.min():o.readTime?wn(o.readTime):be.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=Sp(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Xy(u)?{documents:QV(s,u)}:{query:TD(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=zV(s,o.resumeToken);const d=vD(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(be.min())>0){a.readTime=gd(s,o.snapshotVersion.toTimestamp());const d=vD(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function SW(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=Sp(this.serializer),n.removeTarget=e,this.e_(n)}}class g7 extends zF{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function bW(t,e){return t&&t.length>0?(Ae(void 0!==e),t.map(n=>function(i,s){let o=wn(i.updateTime?i.updateTime:s);return o.isEqual(be.min())&&(o=wn(s)),new fW(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=wn(e.commitTime);return this.listener.I_(r,n)}return Ae(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Sp(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Rp(this.serializer,r))};this.e_(n)}}class m7 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new J(V.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(V.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(V.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class y7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(En(n),this.f_=!1):ee("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class v7{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget((0,W.Z)(function*(){var u;ka(o)&&(ee("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,W.Z)(function*(p){const g=ae(p);g.C_.add(4),yield Td(g),g.M_.set("Unknown"),g.C_.delete(4),yield Lp(g)}),function d(p){return u.apply(this,arguments)})(o))}))}),this.M_=new y7(r,i)}}function Lp(t){return ZD.apply(this,arguments)}function ZD(){return ZD=(0,W.Z)(function*(t){if(ka(t))for(const e of t.v_)yield e(!0)}),ZD.apply(this,arguments)}function Td(t){return KD.apply(this,arguments)}function KD(){return KD=(0,W.Z)(function*(t){for(const e of t.v_)yield e(!1)}),KD.apply(this,arguments)}function wv(t,e){const n=ae(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),JD(n)?YD(n):Dd(n).Ho()&&QD(n,e))}function Up(t,e){const n=ae(t),r=Dd(n);n.D_.delete(e),r.Ho()&&qF(n,e),0===n.D_.size&&(r.Ho()?r.Zo():ka(n)&&n.M_.set("Unknown"))}function QD(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Dd(t).u_(e)}function qF(t,e){t.x_.Oe(e),Dd(t).c_(e)}function YD(t){t.x_=new vW({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Dd(t).start(),t.M_.g_()}function JD(t){return ka(t)&&!Dd(t).jo()&&t.D_.size>0}function ka(t){return 0===ae(t).C_.size}function GF(t){t.x_=void 0}function I7(t){return XD.apply(this,arguments)}function XD(){return XD=(0,W.Z)(function*(t){t.D_.forEach((e,n)=>{QD(t,e)})}),XD.apply(this,arguments)}function E7(t,e){return e0.apply(this,arguments)}function e0(){return e0=(0,W.Z)(function*(t,e){GF(t),JD(t)?(t.M_.w_(e),YD(t)):t.M_.set("Unknown")}),e0.apply(this,arguments)}function w7(t,e,n){return t0.apply(this,arguments)}function t0(){return t0=(0,W.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof BV&&2===e.state&&e.cause)try{yield(r=(0,W.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.D_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.D_.delete(u),s.x_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Tv(t,r)}else if(e instanceof ov?t.x_.$e(e):e instanceof UV?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(be.min()))try{const r=yield OF(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.D_.get(d);p&&s.D_.set(d,p.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const p=s.D_.get(u);if(!p)return;s.D_.set(u,p.withResumeToken(Wn.EMPTY_BYTE_STRING,p.snapshotVersion)),qF(s,u);const g=new Po(p.target,u,d,p.sequenceNumber);QD(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),yield Tv(t,r)}var r}),t0.apply(this,arguments)}function Tv(t,e,n){return n0.apply(this,arguments)}function n0(){return n0=(0,W.Z)(function*(t,e,n){if(!Ta(e))throw e;t.C_.add(1),yield Td(t),t.M_.set("Offline"),n||(n=()=>OF(t.localStore)),t.asyncQueue.enqueueRetryable((0,W.Z)(function*(){ee("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Lp(t)}))}),n0.apply(this,arguments)}function WF(t,e){return e().catch(n=>Tv(t,n,e))}function Cd(t){return r0.apply(this,arguments)}function r0(){return r0=(0,W.Z)(function*(t){const e=ae(t),n=Va(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;T7(e);)try{const i=yield a7(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,C7(e,i)}catch(i){yield Tv(e,i)}ZF(e)&&KF(e)}),r0.apply(this,arguments)}function T7(t){return ka(t)&&t.b_.length<10}function C7(t,e){t.b_.push(e);const n=Va(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function ZF(t){return ka(t)&&!Va(t).jo()&&t.b_.length>0}function KF(t){Va(t).start()}function D7(t){return s0.apply(this,arguments)}function s0(){return s0=(0,W.Z)(function*(t){Va(t).E_()}),s0.apply(this,arguments)}function A7(t){return o0.apply(this,arguments)}function o0(){return o0=(0,W.Z)(function*(t){const e=Va(t);for(const n of t.b_)e.P_(n.mutations)}),o0.apply(this,arguments)}function b7(t,e,n){return a0.apply(this,arguments)}function a0(){return a0=(0,W.Z)(function*(t,e,n){const r=t.b_.shift(),i=mD.from(r,e,n);yield WF(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Cd(t)}),a0.apply(this,arguments)}function S7(t,e){return u0.apply(this,arguments)}function u0(){return u0=(0,W.Z)(function*(t,e){var n;e&&Va(t).h_&&(yield(n=(0,W.Z)(function*(i,s){if(OV(a=s.code)&&a!==V.ABORTED){const o=i.b_.shift();Va(i).Yo(),yield WF(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Cd(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),ZF(t)&&KF(t)}),u0.apply(this,arguments)}function QF(t,e){return c0.apply(this,arguments)}function c0(){return c0=(0,W.Z)(function*(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=ka(n);n.C_.add(3),yield Td(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Lp(n)}),c0.apply(this,arguments)}function l0(t,e){return d0.apply(this,arguments)}function d0(){return d0=(0,W.Z)(function*(t,e){const n=ae(t);e?(n.C_.delete(2),yield Lp(n)):e||(n.C_.add(2),yield Td(n),n.M_.set("Unknown"))}),d0.apply(this,arguments)}function Dd(t){return t.O_||(t.O_=function(n,r,i){const s=ae(n);return s.A_(),new p7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:I7.bind(null,t),Io:E7.bind(null,t),a_:w7.bind(null,t)}),t.v_.push(function(){var e=(0,W.Z)(function*(n){n?(t.O_.Yo(),JD(t)?YD(t):t.M_.set("Unknown")):(yield t.O_.stop(),GF(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function Va(t){return t.N_||(t.N_=function(n,r,i){const s=ae(n);return s.A_(),new g7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:D7.bind(null,t),Io:S7.bind(null,t),T_:A7.bind(null,t),I_:b7.bind(null,t)}),t.v_.push(function(){var e=(0,W.Z)(function*(n){n?(t.N_.Yo(),yield Cd(t)):(yield t.N_.stop(),t.b_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class h0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new h0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new J(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ad(t,e){if(En("AsyncQueue",`${e}: ${t}`),Ta(t))return new J(V.UNAVAILABLE,`${e}: ${t}`);throw t}class bd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=Ip(),this.sortedSet=new $t(this.comparator)}static emptySet(e){return new bd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new bd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class YF{constructor(){this.B_=new $t(ce.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):ye():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Sd{constructor(e,n,r,i,s,o,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Sd(e,n,bd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class R7{constructor(){this.k_=void 0,this.listeners=[]}}class P7{constructor(){this.queries=new So(e=>gV(e),yp),this.onlineState="Unknown",this.q_=new Set}}function f0(t,e){return p0.apply(this,arguments)}function p0(){return p0=(0,W.Z)(function*(t,e){const n=ae(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new R7),i)try{s.k_=yield n.onListen(r)}catch(o){const a=Ad(o,`Initialization of query '${ld(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&_0(n)}),p0.apply(this,arguments)}function g0(t,e){return m0.apply(this,arguments)}function m0(){return m0=(0,W.Z)(function*(t,e){const n=ae(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),m0.apply(this,arguments)}function M7(t,e){const n=ae(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&_0(n)}function x7(t,e,n){const r=ae(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function _0(t){t.q_.forEach(e=>{e.next()})}class y0{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Sd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=Sd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class N7{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class JF{constructor(e){this.serializer=e}hs(e){return Ws(this.serializer,e)}Ps(e){return e.metadata.exists?KV(this.serializer,e.document,!1):Yt.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return wn(e)}}class O7{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=XF(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=ht.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new JF(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||We()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,W.Z)(function*(){const n=yield function u7(t,e,n,r){return UD.apply(this,arguments)}(e.localStore,new JF(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield c7(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function XF(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class eL{constructor(e){this.key=e}}class tL{constructor(e){this.key=e}}class nL{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=We(),this.mutatedKeys=We(),this._a=_V(e),this.aa=new bd(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new YF,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const _=i.get(p),v=vp(this.query,g)?g:null,E=!!_&&this.mutatedKeys.has(_.key),C=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let S=!1;_&&v?_.data.isEqual(v.data)?E!==C&&(r.track({type:3,doc:v}),S=!0):this.ha(_,v)||(r.track({type:2,doc:v}),S=!0,(u&&this._a(v,u)>0||d&&this._a(v,d)<0)&&(a=!0)):!_&&v?(r.track({type:0,doc:v}),S=!0):_&&!v&&(r.track({type:1,doc:_}),S=!0,(u||d)&&(a=!0)),S&&(v?(o=o.add(v),s=C?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const p="F"===this.query.limitType?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((p,g)=>function(v,E){const C=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return C(v)-C(E)}(p.type,g.type)||this._a(p.doc,g.doc)),this.Pa(r),i=null!=i&&i;const a=n&&!i?this.Ia():[],u=0===this.oa.size&&this.current&&!i?1:0,d=u!==this.sa;return this.sa=u,0!==o.length||d?{snapshot:new Sd(this.query,e.aa,s,o,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new YF,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=We(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new tL(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new eL(r))}),n}da(e){this.ia=e.ls,this.oa=We();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return Sd.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class k7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class V7{constructor(e){this.key=e,this.Ra=!1}}class F7{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new So(a=>gV(a),yp),this.fa=new Map,this.ga=new Set,this.pa=new $t(ce.comparator),this.ya=new Map,this.wa=new MD,this.Sa={},this.ba=new Map,this.Da=ic.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function L7(t,e){return v0.apply(this,arguments)}function v0(){return v0=(0,W.Z)(function*(t,e){const n=$0(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=yield Ed(n.localStore,Wr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield I0(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&wv(n.remoteStore,o)}return i}),v0.apply(this,arguments)}function I0(t,e,n,r,i){return E0.apply(this,arguments)}function E0(){return E0=(0,W.Z)(function*(t,e,n,r,i){t.va=(g,_,v)=>{return(E=(0,W.Z)(function*(S,O,R,j){let ne=O.view.ca(R);ne.Zi&&(ne=yield _v(S.localStore,O.query,!1).then(({documents:Zn})=>O.view.ca(Zn,ne)));const de=j&&j.targetChanges.get(O.targetId),Ue=j&&null!=j.targetMismatches.get(O.targetId),It=O.view.applyChanges(ne,S.isPrimaryClient,de,Ue);return M0(S,O.targetId,It.Ta),It.snapshot}),function C(S,O,R,j){return E.apply(this,arguments)})(t,g,_,v);var E};const s=yield _v(t.localStore,e,!0),o=new nL(e,s.ls),a=o.ca(s.documents),u=Ap.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),d=o.applyChanges(a,t.isPrimaryClient,u);M0(t,n,d.Ta);const p=new k7(e,n,o);return t.ma.set(e,p),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),d.snapshot}),E0.apply(this,arguments)}function U7(t,e){return w0.apply(this,arguments)}function w0(){return w0=(0,W.Z)(function*(t,e){const n=ae(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!yp(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield wd(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Up(n.remoteStore,r.targetId),Rd(n,r.targetId)}).catch(wa))):(Rd(n,r.targetId),yield wd(n.localStore,r.targetId,!0))}),w0.apply(this,arguments)}function T0(){return T0=(0,W.Z)(function*(t,e,n){const r=H0(t);try{const i=yield function(o,a){const u=ae(o),d=on.now(),p=a.reduce((v,E)=>v.add(E.key),We());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let E=oi(),C=We();return u.ss.getEntries(v,p).next(S=>{E=S,E.forEach((O,R)=>{R.isValidDocument()||(C=C.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,E)).next(S=>{g=S;const O=[];for(const R of a){const j=gW(R,g.get(R.key).overlayedDocument);null!=j&&O.push(new Ro(R.key,j,eV(j.value.mapValue),an.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,O,a)}).next(S=>{_=S;const O=S.applyToLocalDocumentSet(g,C);return u.documentOverlayCache.saveOverlays(v,S.batchId,O)})}).then(()=>({batchId:_.batchId,changes:vV(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Sa[o.currentUser.toKey()];d||(d=new $t(Le)),d=d.insert(a,u),o.Sa[o.currentUser.toKey()]=d}(r,i.batchId,n),yield Mo(r,i.changes),yield Cd(r.remoteStore)}catch(i){const s=Ad(i,"Failed to persist write");n.reject(s)}}),T0.apply(this,arguments)}function rL(t,e){return C0.apply(this,arguments)}function C0(){return C0=(0,W.Z)(function*(t,e){const n=ae(t);try{const r=yield function o7(t,e){const n=ae(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((p,g)=>{const _=i.get(g);if(!_)return;a.push(n.qr.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.qr.addMatchingKeys(s,p.addedDocuments,g)));let v=_.withSequenceNumber(s.currentSequenceNumber);var C,S,O;null!==e.targetMismatches.get(g)?v=v.withResumeToken(Wn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):p.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(p.resumeToken,r)),i=i.insert(g,v),S=v,O=p,(0===(C=_).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8||O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(s,v))});let u=oi(),d=We();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),a.push(kF(s,o,e.documentUpdates).next(p=>{u=p.us,d=p.cs})),!r.isEqual(be.min())){const p=n.qr.getLastRemoteSnapshotVersion(s).next(g=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(p)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.ts=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Ae(o.Ra):i.removedDocuments.size>0&&(Ae(o.Ra),o.Ra=!1))}),yield Mo(n,r,e)}catch(r){yield wa(r)}}),C0.apply(this,arguments)}function iL(t,e,n){const r=ae(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=ae(o);u.onlineState=a;let d=!1;u.queries.forEach((p,g)=>{for(const _ of g.listeners)_.Q_(a)&&(d=!0)}),d&&_0(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function j7(t,e,n){return D0.apply(this,arguments)}function D0(){return D0=(0,W.Z)(function*(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new $t(ce.comparator);o=o.insert(s,Yt.newNoDocument(s,be.min()));const a=We().add(s),u=new Dp(be.min(),new Map,new $t(Le),o,a);yield rL(r,u),r.pa=r.pa.remove(s),r.ya.delete(e),x0(r)}else yield wd(r.localStore,e,!1).then(()=>Rd(r,e,n)).catch(wa)}),D0.apply(this,arguments)}function $7(t,e){return A0.apply(this,arguments)}function A0(){return A0=(0,W.Z)(function*(t,e){const n=ae(t),r=e.batch.batchId;try{const i=yield function s7(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,d,p){const g=d.batch,_=g.keys();let v=x.resolve();return _.forEach(E=>{v=v.next(()=>p.getEntry(u,E)).next(C=>{const S=d.docVersions.get(E);Ae(null!==S),C.version.compareTo(S)<0&&(g.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),p.addEntry(C)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=We();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);P0(n,r,null),R0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Mo(n,i)}catch(i){yield wa(i)}}),A0.apply(this,arguments)}function H7(t,e,n){return b0.apply(this,arguments)}function b0(){return b0=(0,W.Z)(function*(t,e,n){const r=ae(t);try{const i=yield function(o,a){const u=ae(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,a).next(g=>(Ae(null!==g),p=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);P0(r,e,n),R0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Mo(r,i)}catch(i){yield wa(i)}}),b0.apply(this,arguments)}function S0(){return S0=(0,W.Z)(function*(t,e){const n=ae(t);ka(n.remoteStore)||ee("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=ae(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=Ad(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),S0.apply(this,arguments)}function R0(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function P0(t,e,n){const r=ae(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function Rd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||sL(t,r)})}function sL(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(Up(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),x0(t))}function M0(t,e,n){for(const r of n)r instanceof eL?(t.wa.addReference(r.key,e),q7(t,r)):r instanceof tL?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||sL(t,r.key)):ye()}function q7(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.ga.add(r),x0(t))}function x0(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new ce(ht.fromString(e)),r=t.Da.next();t.ya.set(r,new V7(n)),t.pa=t.pa.insert(n,r),wv(t.remoteStore,new Po(Wr(ud(n.path)),r,"TargetPurposeLimboResolution",Ei._e))}}function Mo(t,e,n){return N0.apply(this,arguments)}function N0(){return N0=(0,W.Z)(function*(t,e,n){const r=ae(t),i=[],s=[],o=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{o.push(r.va(u,e,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,d?.fromCache?"not-current":"current"),d){i.push(d);const p=VD.Qi(u.targetId,d);s.push(p)}}))}),yield Promise.all(o),r.Va.a_(i),yield(a=(0,W.Z)(function*(d,p){const g=ae(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>x.forEach(p,v=>x.forEach(v.ki,E=>g.persistence.referenceDelegate.addReference(_,v.targetId,E)).next(()=>x.forEach(v.qi,E=>g.persistence.referenceDelegate.removeReference(_,v.targetId,E)))))}catch(_){if(!Ta(_))throw _;ee("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of p){const v=_.targetId;if(!_.fromCache){const E=g.ts.get(v),S=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);g.ts=g.ts.insert(v,S)}}}),function u(d,p){return a.apply(this,arguments)})(r.localStore,s))}),N0.apply(this,arguments)}function G7(t,e){return O0.apply(this,arguments)}function O0(){return O0=(0,W.Z)(function*(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=yield NF(n.localStore,e);n.currentUser=e,(s=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new J(V.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Mo(n,r._s)}var s}),O0.apply(this,arguments)}function W7(t,e){const n=ae(t),r=n.ya.get(e);if(r&&r.Ra)return We().add(r.key);{let i=We();const s=n.fa.get(e);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function Z7(t,e){return k0.apply(this,arguments)}function k0(){return k0=(0,W.Z)(function*(t,e){const n=ae(t),r=yield _v(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&M0(n,e.targetId,i.Ta),i}),k0.apply(this,arguments)}function K7(t,e){return V0.apply(this,arguments)}function V0(){return V0=(0,W.Z)(function*(t,e){const n=ae(t);return FF(n.localStore,e).then(r=>Mo(n,r))}),V0.apply(this,arguments)}function Q7(t,e,n,r){return F0.apply(this,arguments)}function F0(){return F0=(0,W.Z)(function*(t,e,n,r){const i=ae(t),s=yield function(a,u){const d=ae(a),p=ae(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>p.Cn(g,u).next(_=>_?d.localDocuments.getDocuments(g,_):x.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===n?yield Cd(i.remoteStore):"acknowledged"===n||"rejected"===n?(P0(i,e,r||null),R0(i,e),u=e,ae(ae(i.localStore).mutationQueue).Fn(u)):ye(),yield Mo(i,s)):ee("SyncEngine","Cannot apply mutation batch with id: "+e)}),F0.apply(this,arguments)}function L0(){return L0=(0,W.Z)(function*(t,e){const n=ae(t);if($0(n),H0(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield oL(n,r.toArray());n.Ca=!0,yield l0(n.remoteStore,!0);for(const s of i)wv(n.remoteStore,s)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Rd(n,o),wd(n.localStore,o,!0))),Up(n.remoteStore,o)}),yield i,yield oL(n,r),function(o){const a=ae(o);a.ya.forEach((u,d)=>{Up(a.remoteStore,d)}),a.wa.Vr(),a.ya=new Map,a.pa=new $t(ce.comparator)}(n),n.Ca=!1,yield l0(n.remoteStore,!1)}}),L0.apply(this,arguments)}function oL(t,e,n){return U0.apply(this,arguments)}function U0(){return U0=(0,W.Z)(function*(t,e,n){const r=ae(t),i=[],s=[];for(const o of e){let a;const u=r.fa.get(o);if(u&&0!==u.length){a=yield Ed(r.localStore,Wr(u[0]));for(const d of u){const p=r.ma.get(d),g=yield Z7(r,p);g.snapshot&&s.push(g.snapshot)}}else{const d=yield VF(r.localStore,o);a=yield Ed(r.localStore,d),yield I0(r,aL(d),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}),U0.apply(this,arguments)}function aL(t){return hV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function J7(t){return n=ae(t).localStore,ae(ae(n).persistence).Bi();var n}function X7(t,e,n,r){return B0.apply(this,arguments)}function B0(){return B0=(0,W.Z)(function*(t,e,n,r){const i=ae(t);if(i.Ca)return void ee("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield FF(i.localStore,mV(s[0])),a=Dp.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Wn.EMPTY_BYTE_STRING);yield Mo(i,o,a);break}case"rejected":yield wd(i.localStore,e,!0),Rd(i,e,r);break;default:ye()}}),B0.apply(this,arguments)}function eZ(t,e,n){return j0.apply(this,arguments)}function j0(){return j0=(0,W.Z)(function*(t,e,n){const r=$0(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){ee("SyncEngine","Adding an already active target "+i);continue}const s=yield VF(r.localStore,i),o=yield Ed(r.localStore,s);yield I0(r,aL(s),o.targetId,!1,o.resumeToken),wv(r.remoteStore,o)}for(const i of n)r.fa.has(i)&&(yield wd(r.localStore,i,!1).then(()=>{Up(r.remoteStore,i),Rd(r,i)}).catch(wa))}}),j0.apply(this,arguments)}function $0(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j7.bind(null,e),e.Va.a_=M7.bind(null,e.eventManager),e.Va.Fa=x7.bind(null,e.eventManager),e}function H0(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H7.bind(null,e),e}class Bp{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,W.Z)(function*(){n.serializer=Fp(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return xF(this.persistence,new MF,e.initialUser,this.serializer)}createPersistence(e){return new xD(pv.jr,this.serializer)}createSharedClientState(e){return new jF}terminate(){var e=this;return(0,W.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class z0 extends Bp{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield H0(r.xa.syncEngine),yield Cd(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return xF(this.persistence,new MF,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new wF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new b8(n,this.persistence);return new A8(e.asyncQueue,r)}createPersistence(e){const n=kD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Pr.withCacheSize(this.cacheSizeBytes):Pr.DEFAULT;return new OD(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,HF(),Ev(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new jF}}class uL extends z0{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof zD&&(r.sharedClientState.syncEngine={Ys:Q7.bind(null,i),Zs:X7.bind(null,i),Xs:eZ.bind(null,i),Bi:J7.bind(null,i),Js:K7.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var s=(0,W.Z)(function*(o){yield function Y7(t,e){return L0.apply(this,arguments)}(r.xa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=HF();if(!zD.D(n))throw new J(V.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=kD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zD(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Pd{initialize(e,n){var r=this;return(0,W.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>iL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=G7.bind(null,r.syncEngine),yield l0(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new P7}createDatastore(e){const n=Fp(e.databaseInfo.databaseId),r=new f7(e.databaseInfo);return new m7(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>iL(this.syncEngine,n,0),a=$F.D()?new $F:new l7,new v7(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,d,p){const g=new F7(i,s,o,a,u,d);return p&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,W.Z)(function*(r){const i=ae(r);ee("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield Td(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function cL(t,e=10240){let n=0;return{read:()=>(0,W.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,W.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Cv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):En("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class rZ{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Gn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,W.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,W.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,W.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const s=yield e.Ka(i);return new N7(JSON.parse(s),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,W.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,W.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,W.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class iZ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,W.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new J(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,W.Z)(function*(o,a){const u=ae(o),d=Sp(u.serializer)+"/documents",p={documents:a.map(E=>bp(u.serializer,E))},g=yield u.Co("BatchGetDocuments",d,p,a.length),_=new Map;g.forEach(E=>{const C=function DW(t,e){return"found"in e?function(r,i){Ae(!!i.found);const s=Ws(r,i.found.name),o=wn(i.found.updateTime),a=i.found.createTime?wn(i.found.createTime):be.min(),u=new hr({mapValue:{fields:i.found.fields}});return Yt.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){Ae(!!i.missing),Ae(!!i.readTime);const s=Ws(r,i.missing),o=wn(i.readTime);return Yt.newNoDocument(s,o)}(t,e):ye()}(u.serializer,E);_.set(C.key.toString(),C)});const v=[];return a.forEach(E=>{const C=_.get(E.toString());Ae(!!C),v.push(C)}),v}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new pd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,W.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=ce.fromPath(i);e.mutations.push(new pD(s,e.precondition(s)))}),yield(r=(0,W.Z)(function*(s,o){const a=ae(s),u=Sp(a.serializer)+"/documents",d={writes:o.map(p=>Rp(a.serializer,p))};yield a.wo("Commit",u,d)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ye();n=be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(be.min())?an.exists(!1):an.updateTime(n):an.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(be.min()))throw new J(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return an.updateTime(n)}return an.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class sZ{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new GD(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,W.Z)(function*(){const n=new iZ(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ja(s)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!lp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!OV(n)}return!1}}class oZ{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=er.UNAUTHENTICATED,this.clientId=Pk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,W.Z)(function*(a){ee("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,W.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(V.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Ad(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function Dv(t,e){return q0.apply(this,arguments)}function q0(){return q0=(0,W.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,W.Z)(function*(s){r.isEqual(s)||(yield NF(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),q0.apply(this,arguments)}function G0(t,e){return W0.apply(this,arguments)}function W0(){return W0=(0,W.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield Z0(t);ee("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>QF(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>QF(e.remoteStore,s)),t._onlineComponents=e}),W0.apply(this,arguments)}function lL(t){return"FirebaseError"===t.name?t.code===V.FAILED_PRECONDITION||t.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function Z0(t){return K0.apply(this,arguments)}function K0(){return K0=(0,W.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Dv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!lL(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),yield Dv(t,new Bp)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),yield Dv(t,new Bp);return t._offlineComponents}),K0.apply(this,arguments)}function Av(t){return Q0.apply(this,arguments)}function Q0(){return Q0=(0,W.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),yield G0(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),yield G0(t,new Pd))),t._onlineComponents}),Q0.apply(this,arguments)}function dL(t){return Z0(t).then(e=>e.persistence)}function Md(t){return Z0(t).then(e=>e.localStore)}function hL(t){return Av(t).then(e=>e.remoteStore)}function Y0(t){return Av(t).then(e=>e.syncEngine)}function xd(t){return J0.apply(this,arguments)}function J0(){return J0=(0,W.Z)(function*(t){const e=yield Av(t),n=e.eventManager;return n.onListen=L7.bind(null,e.syncEngine),n.onUnlisten=U7.bind(null,e.syncEngine),n}),J0.apply(this,arguments)}function pL(t,e,n={}){const r=new Gn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(s,o,a,u,d){const p=new Cv({next:_=>{o.enqueueAndForget(()=>g0(s,g));const v=_.docs.has(a);!v&&_.fromCache?d.reject(new J(V.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&u&&"server"===u.source?d.reject(new J(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new y0(ud(a.path),p,{includeMetadataChanges:!0,J_:!0});return f0(s,g)}(yield xd(t),t.asyncQueue,e,n,r)})),r.promise}function gL(t,e,n={}){const r=new Gn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(s,o,a,u,d){const p=new Cv({next:_=>{o.enqueueAndForget(()=>g0(s,g)),_.fromCache&&"server"===u.source?d.reject(new J(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new y0(a,p,{includeMetadataChanges:!0,J_:!0});return f0(s,g)}(yield xd(t),t.asyncQueue,e,n,r)})),r.promise}function mL(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const _L=new Map;function X0(t,e,n){if(!n)throw new J(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yL(t,e,n,r){if(!0===e&&!0===r)throw new J(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function vL(t){if(!ce.isDocumentKey(t))throw new J(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function IL(t){if(ce.isDocumentKey(t))throw new J(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":ye()}function it(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bv(t);throw new J(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function EL(t,e){if(e<=0)throw new J(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class wL{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new J(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new J(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=mL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new J(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new J(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wL(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new p8;switch(r.type){case"firstParty":return new y8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=_L.get(n);r&&(ee("ComponentProvider","Removing Datastore"),_L.delete(n),r.terminate())}(this),Promise.resolve()}}class fr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fr(this.firestore,e,this._query)}}class Jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class Zs extends fr{constructor(e,n,r){super(e,n,ud(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new ce(e))}withConverter(e){return new Zs(this.firestore,e,this._path)}}function CL(t,e,...n){if(t=(0,kt.m9)(t),X0("collection","path",e),t instanceof jp){const r=ht.fromString(e,...n);return IL(r),new Zs(t,null,r)}{if(!(t instanceof Jt||t instanceof Zs))throw new J(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return IL(r),new Zs(t.firestore,null,r)}}function Sv(t,e,...n){if(t=(0,kt.m9)(t),1===arguments.length&&(e=Pk.newId()),X0("doc","path",e),t instanceof jp){const r=ht.fromString(e,...n);return vL(r),new Jt(t,null,new ce(r))}{if(!(t instanceof Jt||t instanceof Zs))throw new J(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return vL(r),new Jt(t.firestore,t instanceof Zs?t.converter:null,new ce(r))}}function DL(t,e){return t=(0,kt.m9)(t),e=(0,kt.m9)(e),(t instanceof Jt||t instanceof Zs)&&(e instanceof Jt||e instanceof Zs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function eA(t,e){return t=(0,kt.m9)(t),e=(0,kt.m9)(e),t instanceof fr&&e instanceof fr&&t.firestore===e.firestore&&yp(t._query,e._query)&&t.converter===e.converter}class yZ{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new GD(this,"async_queue_retry"),this.iu=()=>{const n=Ev();n&&ee("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Ev();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Ev();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Gn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,W.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!Ta(n))throw n;ee("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,En("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=h0.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&ye()}verifyOperationInProgress(){}uu(){var e=this;return(0,W.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function tA(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class vZ{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ht extends jp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new yZ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||AL(this),this._firestoreClient.terminate()}}function gn(t){return t._firestoreClient||AL(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function AL(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Z8(t._databaseId,u,t._persistenceKey,(p=i).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,mL(p.experimentalLongPollingOptions),p.useFetchStreams));var u,p;t._firestoreClient=new oZ(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function bL(t,e,n){const r=new Gn;return t.asyncQueue.enqueue((0,W.Z)(function*(){try{yield Dv(t,n),yield G0(t,e),r.resolve()}catch(i){const s=i;if(!lL(s))throw s;ii("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function SL(t){if(t._initialized||t._terminated)throw new J(V.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ks(Wn.fromBase64String(e))}catch(n){throw new J(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ks(Wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xo{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new J(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class oc{constructor(e){this._methodName=e}}class Rv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}const PZ=/^__.*__$/;class MZ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Ro(e,this.data,this.fieldMask,n,this.fieldTransforms):new fd(e,this.data,n,this.fieldTransforms)}}class RL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ro(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function PL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class Pv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Pv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Nv(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(PL(this.Iu)&&PZ.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class xZ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fp(e)}pu(e,n,r,i=!1){return new Pv({Iu:e,methodName:n,gu:r,path:Qt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ac(t){const e=t._freezeSettings(),n=Fp(t._databaseId);return new xZ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Mv(t,e,n,r,i,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);sA("Data must be an object, but it was:",o,r);const a=NL(r,o);let u,d;if(s.merge)u=new si(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const _=zp(e,g,n);if(!o.contains(_))throw new J(V.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);kL(p,_)||p.push(_)}u=new si(p),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new MZ(new hr(a),u,d)}class Hp extends oc{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hp}}function ML(t,e,n){return new Pv({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class nA extends oc{_toFieldTransform(e){return new wp(e.path,new dd)}isEqual(e){return e instanceof nA}}class NZ extends oc{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=ML(this,e,!0),r=this.yu.map(s=>uc(s,n)),i=new Yu(r);return new wp(e.path,i)}isEqual(e){return this===e}}class OZ extends oc{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=ML(this,e,!0),r=this.yu.map(s=>uc(s,n)),i=new Ju(r);return new wp(e.path,i)}isEqual(e){return this===e}}class kZ extends oc{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new hd(e.serializer,TV(e.serializer,this.wu));return new wp(e.path,n)}isEqual(e){return this===e}}function rA(t,e,n,r){const i=t.pu(1,e,n);sA("Data must be an object, but it was:",i,r);const s=[],o=hr.empty();Ca(r,(u,d)=>{const p=xv(e,u,n);d=(0,kt.m9)(d);const g=i.Ru(p);if(d instanceof Hp)s.push(p);else{const _=uc(d,g);null!=_&&(s.push(p),o.set(p,_))}});const a=new si(s);return new RL(o,a,i.fieldTransforms)}function iA(t,e,n,r,i,s){const o=t.pu(1,e,n),a=[zp(e,r,n)],u=[i];if(s.length%2!=0)throw new J(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(zp(e,s[_])),u.push(s[_+1]);const d=[],p=hr.empty();for(let _=a.length-1;_>=0;--_)if(!kL(d,a[_])){const v=a[_];let E=u[_];E=(0,kt.m9)(E);const C=o.Ru(v);if(E instanceof Hp)d.push(v);else{const S=uc(E,C);null!=S&&(d.push(v),p.set(v,S))}}const g=new si(d);return new RL(p,g,o.fieldTransforms)}function xL(t,e,n,r=!1){return uc(n,t.pu(r?4:3,e))}function uc(t,e){if(OL(t=(0,kt.m9)(t)))return sA("Unsupported field value:",e,t),NL(t,e);if(t instanceof oc)return function(r,i){if(!PL(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=uc(a,i.Vu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,kt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return TV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=on.fromDate(r);return{timestampValue:gd(i.serializer,s)}}if(r instanceof on){const s=new on(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gd(i.serializer,s)}}if(r instanceof Rv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ks)return{bytesValue:zV(i.serializer,r._byteString)};if(r instanceof Jt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ID(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${bv(r)}`)}(t,e)}function NL(t,e){const n={};return qk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ca(t,(r,i)=>{const s=uc(i,e.Eu(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function OL(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof on||t instanceof Rv||t instanceof Ks||t instanceof Jt||t instanceof oc)}function sA(t,e,n){if(!OL(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=bv(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function zp(t,e,n){if((e=(0,kt.m9)(e))instanceof xo)return e._internalPath;if("string"==typeof e)return xv(t,e);throw Nv("Field path arguments must be of type string or ",t,!1,void 0,n)}const VZ=new RegExp("[~\\*/\\[\\]]");function xv(t,e,n){if(e.search(VZ)>=0)throw Nv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xo(...e.split("."))._internalPath}catch{throw Nv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nv(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new J(V.INVALID_ARGUMENT,a+t+u)}function kL(t,e){return t.some(n=>n.isEqual(e))}class qp{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new FZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ov("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class FZ extends qp{data(){return super.data()}}function Ov(t,e){return"string"==typeof e?xv(t,e):e instanceof xo?e._internalPath:e._delegate._internalPath}function VL(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new J(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oA{}class Gp extends oA{}function Fa(t,e,...n){let r=[];e instanceof oA&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Nd).length,a=s.filter(u=>u instanceof Wp).length;if(o>1||o>0&&a>0)throw new J(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Wp extends Gp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wp(e,n,r)}_apply(e){const n=this._parse(e);return BL(e._query,n),new fr(e.firestore,e.converter,hD(e._query,n))}_parse(e){const n=ac(e.firestore);return function(s,o,a,u,d,p,g){let _;if(d.isKeyField()){if("array-contains"===p||"array-contains-any"===p)throw new J(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if("in"===p||"not-in"===p){UL(g,p);const v=[];for(const E of g)v.push(LL(u,s,E));_={arrayValue:{values:v}}}else _=LL(u,s,g)}else"in"!==p&&"not-in"!==p&&"array-contains-any"!==p||UL(g,p),_=xL(a,"where",g,"in"===p||"not-in"===p);return ot.create(d,p,_)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Nd extends oA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Nd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:bt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)BL(o,u),o=hD(o,u)}(e._query,n),new fr(e.firestore,e.converter,hD(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class aA extends Gp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new aA(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new J(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new J(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mp(s,o)}(e._query,this._field,this._direction);return new fr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new bo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class kv extends Gp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new kv(e,n,r)}_apply(e){return new fr(e.firestore,e.converter,tv(e._query,this._limit,this._limitType))}}class Vv extends Gp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Vv(e,n,r)}_apply(e){const n=FL(e,this.type,this._docOrFields,this._inclusive);return new fr(e.firestore,e.converter,(s=n,new bo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Fv extends Gp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Fv(e,n,r)}_apply(e){const n=FL(e,this.type,this._docOrFields,this._inclusive);return new fr(e.firestore,e.converter,(s=n,new bo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function FL(t,e,n,r){if(n[0]=(0,kt.m9)(n[0]),n[0]instanceof qp)return function(s,o,a,u,d){if(!u)throw new J(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const p=[];for(const g of cd(s))if(g.field.isKeyField())p.push(Ku(o,u.key));else{const _=u.data.field(g.field);if(Zy(_))throw new J(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const v=g.field.canonicalString();throw new J(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}p.push(_)}return new Pa(p,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=ac(t.firestore);return function(o,a,u,d,p,g){const _=o.explicitOrderBy;if(p.length>_.length)throw new J(V.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let E=0;E<p.length;E++){const C=p[E];if(_[E].field.isKeyField()){if("string"!=typeof C)throw new J(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof C}`);if(!dD(o)&&-1!==C.indexOf("/"))throw new J(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${C}' contains a slash.`);const S=o.path.child(ht.fromString(C));if(!ce.isDocumentKey(S))throw new J(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const O=new ce(S);v.push(Ku(a,O))}else{const S=xL(u,d,C);v.push(S)}}return new Pa(v,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function LL(t,e,n){if("string"==typeof(n=(0,kt.m9)(n))){if(""===n)throw new J(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dD(e)&&-1!==n.indexOf("/"))throw new J(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ht.fromString(n));if(!ce.isDocumentKey(r))throw new J(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ku(t,new ce(r))}if(n instanceof Jt)return Ku(t,n._key);throw new J(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bv(n)}.`)}function UL(t,e){if(!Array.isArray(t)||0===t.length)throw new J(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BL(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new J(V.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class uA{convertValue(e,n="none"){switch(Sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ye()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ca(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Rv(pn(e.latitude),pn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ky(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hp(e));default:return null}}convertTimestamp(e){const n=Da(e);return new on(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ht.fromString(e);Ae(eF(r));const i=new Aa(r.get(1),r.get(3)),s=new ce(r.popFirst(5));return i.isEqual(n)||En(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function Lv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class GZ extends uA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}class cc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class No extends qp{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ov("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Zp extends No{data(e={}){return super.data(e)}}class La{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new cc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zp(this._firestore,this._userDataWriter,r.key,r,new cc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Zp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new Zp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),p=o.indexOf(a.doc.key)),{type:ZZ(a.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ZZ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}function $L(t,e){return t instanceof No&&e instanceof No?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof La&&e instanceof La&&t._firestore===e._firestore&&eA(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class Ua extends uA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function HL(t,e,n){t=it(t,Jt);const r=it(t.firestore,Ht),i=Lv(t.converter,e,n);return Od(r,[Mv(ac(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,an.none())])}function zL(t,e,n,...r){t=it(t,Jt);const i=it(t.firestore,Ht),s=ac(i);let o;return o="string"==typeof(e=(0,kt.m9)(e))||e instanceof xo?iA(s,"updateDoc",t._key,e,n,r):rA(s,"updateDoc",t._key,e),Od(i,[o.toMutation(t._key,an.exists(!0))])}function qL(t,...e){var n,r,i;t=(0,kt.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||tA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(tA(e[o])){const g=e[o];e[o]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,d,p;if(t instanceof Jt)d=it(t.firestore,Ht),p=ud(t._key.path),u={next:g=>{e[o]&&e[o](cA(d,t,g))},error:e[o+1],complete:e[o+2]};else{const g=it(t,fr);d=it(g.firestore,Ht),p=g._query;const _=new Ua(d);u={next:v=>{e[o]&&e[o](new La(d,_,g,v))},error:e[o+1],complete:e[o+2]},VL(t._query)}return function(_,v,E,C){const S=new Cv(C),O=new y0(v,S,E);return _.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return f0(yield xd(_),O)})),()=>{S.Na(),_.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return g0(yield xd(_),O)}))}}(gn(d),p,a,u)}function Od(t,e){return function(r,i){const s=new Gn;return r.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function B7(t,e,n){return T0.apply(this,arguments)}(yield Y0(r),i,s)})),s.promise}(gn(t),e)}function cA(t,e,n){const r=n.docs.get(e._key),i=new Ua(t);return new No(t,i,e._key,r,new cc(n.hasPendingWrites,n.fromCache),e.converter)}const hK={maxAttempts:5};class GL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ac(e)}set(e,n,r){this._verifyNotCommitted();const i=Ba(e,this._firestore),s=Lv(i.converter,n,r),o=Mv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,an.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ba(e,this._firestore);let o;return o="string"==typeof(n=(0,kt.m9)(n))||n instanceof xo?iA(this._dataReader,"WriteBatch.update",s._key,n,r,i):rA(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,an.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ba(e,this._firestore);return this._mutations=this._mutations.concat(new pd(n._key,an.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ba(t,e){if((t=(0,kt.m9)(t)).firestore!==e)throw new J(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class fK extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ac(n)}get(n){const r=Ba(n,this._firestore),i=new GZ(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return ye();const o=s[0];if(o.isFoundDocument())return new qp(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new qp(this._firestore,i,r._key,null,r.converter);throw ye()})}set(n,r,i){const s=Ba(n,this._firestore),o=Lv(s.converter,r,i),a=Mv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Ba(n,this._firestore);let a;return a="string"==typeof(r=(0,kt.m9)(r))||r instanceof xo?iA(this._dataReader,"Transaction.update",o._key,r,i,s):rA(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Ba(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ba(e,this._firestore),r=new Ua(this._firestore);return super.get(e).then(i=>new No(this._firestore,r,n._key,i._document,new cc(!1,!1),n.converter))}}function dA(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new J("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function QL(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function YL(){if(!function G8(){return typeof atob<"u"}())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){ed=Hl.SDK_VERSION,(0,Hl._registerComponent)(new cO.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ht(new m8(r.getProvider("auth-internal")),new v8(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new J(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Aa(d.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Hl.registerVersion)(bk,"4.4.0",e),(0,Hl.registerVersion)(bk,"4.4.0","esm2017")}();class Kp{constructor(e){this._delegate=e}static fromBase64String(e){return YL(),new Kp(Ks.fromBase64String(e))}static fromUint8Array(e){return QL(),new Kp(Ks.fromUint8Array(e))}toBase64(){return YL(),this._delegate.toBase64()}toUint8Array(){return QL(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function hA(t){return function TK(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class CK{enableIndexedDbPersistence(e,n){return function EZ(t,e){SL(t=it(t,Ht));const n=gn(t);if(n._uninitializedComponentsProvider)throw new J(V.FAILED_PRECONDITION,"SDK cache is already specified.");ii("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Pd;return bL(n,i,new z0(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function wZ(t){SL(t=it(t,Ht));const e=gn(t);if(e._uninitializedComponentsProvider)throw new J(V.FAILED_PRECONDITION,"SDK cache is already specified.");ii("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Pd;return bL(e,r,new uL(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function TZ(t){if(t._initialized&&!t._terminated)throw new J(V.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{yield(n=(0,W.Z)(function*(i){if(!hs.D())return Promise.resolve();const s=i+"main";yield hs.delete(s)}),function r(i){return n.apply(this,arguments)})(kD(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class JL{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Aa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ii("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function TL(t,e,n,r={}){var i;const s=(t=it(t,jp))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=er.MOCK_USER;else{a=(0,kt.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new J(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new er(d)}t._authCredentials=new g8(new Sk(a,u))}}(this._delegate,e,n,r)}enableNetwork(){return function DZ(t){return function aZ(t){return t.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield dL(t),n=yield hL(t);return e.setNetworkEnabled(!0),function(i){const s=ae(i);return s.C_.delete(0),Lp(s)}(n)}))}(gn(t=it(t,Ht)))}(this._delegate)}disableNetwork(){return function AZ(t){return function uZ(t){return t.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield dL(t),n=yield hL(t);return e.setNetworkEnabled(!1),(r=(0,W.Z)(function*(s){const o=ae(s);o.C_.add(0),yield Td(o),o.M_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(gn(t=it(t,Ht)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function CZ(t){return function(n){const r=new Gn;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function z7(t,e){return S0.apply(this,arguments)}(yield Y0(n),r)})),r.promise}(gn(t=it(t,Ht)))}(this._delegate)}onSnapshotsInSync(e){return function rK(t,e){return function dZ(t,e){const n=new Cv(e);return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return i=yield xd(t),s=n,ae(i).q_.add(s),void s.next();var i,s})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return i=yield xd(t),s=n,void ae(i).q_.delete(s);var i,s}))}}(gn(t=it(t,Ht)),tA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new kd(this,CL(this._delegate,e))}catch(n){throw Zr(n,"collection()","Firestore.collection()")}}doc(e){try{return new qi(this,Sv(this._delegate,e))}catch(n){throw Zr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Kr(this,function _Z(t,e){if(t=it(t,jp),X0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(V.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fr(t,null,(r=e,new bo(ht.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw Zr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function pK(t,e,n){t=it(t,Ht);const r=Object.assign(Object.assign({},hK),n);return function(s){if(s.maxAttempts<1)throw new J(V.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Gn;return s.asyncQueue.enqueueAndForget((0,W.Z)(function*(){const d=yield function fL(t){return Av(t).then(e=>e.datastore)}(s);new sZ(s.asyncQueue,d,a,o,u).run()})),u.promise}(gn(t),i=>e(new fK(t,i)),r)}(this._delegate,n=>e(new XL(this,n)))}batch(){return gn(this._delegate),new e2(new GL(this._delegate,e=>Od(this._delegate,e)))}loadBundle(e){return function bZ(t,e){const n=gn(t=it(t,Ht)),r=new vZ;return function hZ(t,e,n,r){const i=function(o,a){let u;return u="string"==typeof o?VV().encode(o):o,p=function(p,g){if(p instanceof Uint8Array)return cL(p,g);if(p instanceof ArrayBuffer)return cL(new Uint8Array(p),g);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new rZ(p,a);var p}(n,Fp(e));t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){!function tZ(t,e,n){const r=ae(t);var i;(i=(0,W.Z)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(E,C){const S=ae(E),O=wn(C.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",R=>S.Kr.getBundleMetadata(R,C.id)).then(R=>!!R&&R.createTime.compareTo(O)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(E=d).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);u._updateProgress(XF(d));const p=new O7(d,o.localStore,a.serializer);let g=yield a.Ma();for(;g;){const v=yield p.ea(g);v&&u._updateProgress(v),g=yield a.Ma()}const _=yield p.complete();return yield Mo(o,_.ra,void 0),yield function(E,C){const S=ae(E);return S.persistence.runTransaction("Save bundle","readwrite",O=>S.Kr.saveBundleMetadata(O,C))}(o.localStore,d),u._completeWith(_.progress),Promise.resolve(_.na)}catch(d){return ii("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var E}),function s(o,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Y0(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function SZ(t,e){return function fZ(t,e){return t.asyncQueue.enqueue((0,W.Z)(function*(){return function(r,i){const s=ae(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield Md(t),e)}))}(gn(t=it(t,Ht)),e).then(n=>n?new fr(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Kr(this,n):null)}}class Bv extends uA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kp(new Ks(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return qi.forKey(n,this.firestore,null)}}class XL{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Bv(e)}get(e){const n=dc(e);return this._delegate.get(n).then(r=>new Qp(this._firestore,new No(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=dc(e);return r?(dA("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=dc(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=dc(e);return this._delegate.delete(n),this}}class e2{constructor(e){this._delegate=e}set(e,n,r){const i=dc(e);return r?(dA("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=dc(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=dc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class lc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Zp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Yp(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=lc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new lc(e,new Bv(e),n),i.set(n,s)),s}}lc.INSTANCES=new WeakMap;class qi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Bv(e)}static forPath(e,n,r){if(e.length%2!=0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new qi(n,new Jt(n._delegate,r,new ce(e)))}static forKey(e,n,r){return new qi(n,new Jt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new kd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new kd(this.firestore,CL(this._delegate,e))}catch(n){throw Zr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,kt.m9)(e))instanceof Jt&&DL(this._delegate,e)}set(e,n){n=dA("DocumentReference.set",n);try{return n?HL(this._delegate,e,n):HL(this._delegate,e)}catch(r){throw Zr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?zL(this._delegate,e):zL(this._delegate,e,n,...r)}catch(i){throw Zr(i,"updateDoc()","DocumentReference.update()")}}delete(){return function tK(t){return Od(it(t.firestore,Ht),[new pd(t._key,an.none())])}(this._delegate)}onSnapshot(...e){const n=t2(e),r=n2(e,i=>new Qp(this.firestore,new No(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return qL(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function QZ(t){t=it(t,Jt);const e=it(t.firestore,Ht),n=gn(e),r=new Ua(e);return function cZ(t,e){const n=new Gn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(s,o,a){try{const u=yield function(p,g){const _=ae(p);return _.persistence.runTransaction("read document","readonly",v=>_.localDocuments.getDocument(v,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new J(V.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=Ad(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Md(t),e,n);var r})),n.promise}(n,t._key).then(i=>new No(e,r,t._key,i,new cc(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function YZ(t){t=it(t,Jt);const e=it(t.firestore,Ht);return pL(gn(e),t._key,{source:"server"}).then(n=>cA(e,t,n))}(this._delegate):function KZ(t){t=it(t,Jt);const e=it(t.firestore,Ht);return pL(gn(e),t._key).then(n=>cA(e,t,n))}(this._delegate),n.then(r=>new Qp(this.firestore,new No(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new qi(this.firestore,this._delegate.withConverter(e?lc.getInstance(this.firestore,e):null))}}function Zr(t,e,n){return t.message=t.message.replace(e,n),t}function t2(t){for(const e of t)if("object"==typeof e&&!hA(e))return e;return{}}function n2(t,e){var n,r;let i;return i=hA(t[0])?t[0]:hA(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Qp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new qi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return $L(this._delegate,e._delegate)}}class Yp extends Qp{data(e){const n=this._delegate.data(e);return this._delegate._converter||function f8(t,e){t||ye()}(void 0!==n),n}}class Kr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Bv(e)}where(e,n,r){try{return new Kr(this.firestore,Fa(this._delegate,function LZ(t,e,n){const r=e,i=Ov("where",t);return Wp._create(i,r,n)}(e,n,r)))}catch(i){throw Zr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Kr(this.firestore,Fa(this._delegate,function UZ(t,e="asc"){const n=e,r=Ov("orderBy",t);return aA._create(r,n)}(e,n)))}catch(r){throw Zr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Kr(this.firestore,Fa(this._delegate,function BZ(t){return EL("limit",t),kv._create("limit",t,"F")}(e)))}catch(n){throw Zr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Kr(this.firestore,Fa(this._delegate,function jZ(t){return EL("limitToLast",t),kv._create("limitToLast",t,"L")}(e)))}catch(n){throw Zr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Kr(this.firestore,Fa(this._delegate,function $Z(...t){return Vv._create("startAt",t,!0)}(...e)))}catch(n){throw Zr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Kr(this.firestore,Fa(this._delegate,function HZ(...t){return Vv._create("startAfter",t,!1)}(...e)))}catch(n){throw Zr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Kr(this.firestore,Fa(this._delegate,function zZ(...t){return Fv._create("endBefore",t,!1)}(...e)))}catch(n){throw Zr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Kr(this.firestore,Fa(this._delegate,function qZ(...t){return Fv._create("endAt",t,!0)}(...e)))}catch(n){throw Zr(n,"endAt()","Query.endAt()")}}isEqual(e){return eA(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function XZ(t){t=it(t,fr);const e=it(t.firestore,Ht),n=gn(e),r=new Ua(e);return function lZ(t,e){const n=new Gn;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(s,o,a){try{const u=yield _v(s,o,!0),d=new nL(o,u.ls),p=d.ca(u.documents),g=d.applyChanges(p,!1);a.resolve(g.snapshot)}catch(u){const d=Ad(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Md(t),e,n);var r})),n.promise}(n,t._query).then(i=>new La(e,r,t,i))}(this._delegate):"server"===e?.source?function eK(t){t=it(t,fr);const e=it(t.firestore,Ht),n=gn(e),r=new Ua(e);return gL(n,t._query,{source:"server"}).then(i=>new La(e,r,t,i))}(this._delegate):function JZ(t){t=it(t,fr);const e=it(t.firestore,Ht),n=gn(e),r=new Ua(e);return VL(t._query),gL(n,t._query).then(i=>new La(e,r,t,i))}(this._delegate),n.then(r=>new fA(this.firestore,new La(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=t2(e),r=n2(e,i=>new fA(this.firestore,new La(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return qL(this._delegate,n,r)}withConverter(e){return new Kr(this.firestore,this._delegate.withConverter(e?lc.getInstance(this.firestore,e):null))}}class AK{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Yp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fA{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Kr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Yp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new AK(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Yp(this._firestore,r))})}isEqual(e){return $L(this._delegate,e._delegate)}}class kd extends Kr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new qi(this.firestore,e):null}doc(e){try{return new qi(this.firestore,void 0===e?Sv(this._delegate):Sv(this._delegate,e))}catch(n){throw Zr(n,"doc()","CollectionReference.doc()")}}add(e){return function nK(t,e){const n=it(t.firestore,Ht),r=Sv(t),i=Lv(t.converter,e);return Od(n,[Mv(ac(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,an.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new qi(this.firestore,n))}isEqual(e){return DL(this._delegate,e._delegate)}withConverter(e){return new kd(this.firestore,this._delegate.withConverter(e?lc.getInstance(this.firestore,e):null))}}function dc(t){return it(t,Jt)}class pA{constructor(...e){this._delegate=new xo(...e)}static documentId(){return new pA(Qt.keyField().canonicalString())}isEqual(e){return(e=(0,kt.m9)(e))instanceof xo&&this._delegate._internalPath.isEqual(e._internalPath)}}class hc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function mK(){return new nA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new hc(e)}static delete(){const e=function gK(){return new Hp("deleteField")}();return e._methodName="FieldValue.delete",new hc(e)}static arrayUnion(...e){const n=function _K(...t){return new NZ("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new hc(n)}static arrayRemove(...e){const n=function yK(...t){return new OZ("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new hc(n)}static increment(e){const n=function vK(t){return new kZ("increment",t)}(e);return n._methodName="FieldValue.increment",new hc(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const bK={Firestore:JL,GeoPoint:Rv,Timestamp:on,Blob:Kp,Transaction:XL,WriteBatch:e2,DocumentReference:qi,DocumentSnapshot:Qp,Query:Kr,QueryDocumentSnapshot:Yp,QuerySnapshot:fA,CollectionReference:kd,FieldPath:pA,FieldValue:hc,setLogLevel:function DK(t){!function h8(t){Ea.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function r2(t,e){return function PK(t,e=q1){return new st(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function gA(t,e){return r2(t,e).pipe(Te(n=>({payload:n,type:"query"})))}!function RK(t){(function SK(t,e){t.INTERNAL.registerComponent(new cO.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},bK)))})(t,(e,n)=>new JL(e,n,new CK)),t.registerVersion("@firebase/firestore-compat","0.3.23")}(To.Z);class i2{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=l2(r,n);return new a2(i,s,this.afs)}snapshotChanges(){return function MK(t,e){return r2(t,e).pipe(_y(void 0),lC(),Te(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yi)}valueChanges(e={}){return this.snapshotChanges().pipe(Te(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return A(this.ref.get(e)).pipe(yi)}}function jv(t,e){return gA(t,e).pipe(_y(void 0),lC(),Te(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(g=>g.doc.ref.isEqual(a.ref)),p=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&p&&JSON.stringify(p.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function s2(t,e,n){return jv(t,n).pipe(yy((r,i)=>function xK(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function NK(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return mA(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return mA(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return mA(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),Wt(),Te(r=>r.map(i=>({type:i.type,payload:i}))))}function mA(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function o2(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class a2{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=jv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(Te(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(_y(void 0),lC(),cs(([r,i])=>i.length>0||!r),Te(([,r])=>r),yi)}auditTrail(e){return this.stateChanges(e).pipe(yy((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=o2(e);return s2(this.query,n,this.afs.schedulers.outsideAngular).pipe(yi)}valueChanges(e={}){return gA(this.query,this.afs.schedulers.outsideAngular).pipe(Te(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),yi)}get(e){return A(this.query.get(e)).pipe(yi)}add(e){return this.ref.add(e)}doc(e){return new i2(this.ref.doc(e),this.afs)}}class OK{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?jv(this.query,this.afs.schedulers.outsideAngular).pipe(Te(n=>n.filter(r=>e.indexOf(r.type)>-1)),cs(n=>n.length>0),yi):jv(this.query,this.afs.schedulers.outsideAngular).pipe(yi)}auditTrail(e){return this.stateChanges(e).pipe(yy((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=o2(e);return s2(this.query,n,this.afs.schedulers.outsideAngular).pipe(yi)}valueChanges(e={}){return gA(this.query,this.afs.schedulers.outsideAngular).pipe(Te(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),yi)}get(e){return A(this.query.get(e)).pipe(yi)}}const u2=new le("angularfire2.enableFirestorePersistence"),c2=new le("angularfire2.firestore.persistenceSettings"),kK=new le("angularfire2.firestore.settings"),VK=new le("angularfire2.firestore.use-emulator");function l2(t,e=(n=>n)){return{query:e(t),ref:t}}let $v=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,d,p,g,_,v,E,C,S,O,R){this.schedulers=u;const j=uC(n,a,r),ne=p;g&&aO(j,a,_,E,C,S,v,O),[this.firestore,this.persistenceEnabled$]=Q1(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{const de=a.runOutsideAngular(()=>j.firestore());if(s&&de.settings(s),ne&&de.useEmulator(...ne),i&&!Z_(o)){const Ue=()=>{try{return A(de.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(It){return typeof console<"u"&&console.warn(It),G(!1)}};return[de,a.runOutsideAngular(Ue)]}return[de,G(!1)]},[s,ne,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=l2(i,r),a=this.schedulers.ngZone.run(()=>s);return new a2(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new OK(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new i2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(oe(fy),oe(py,8),oe(u2,8),oe(kK,8),oe(fo),oe(wt),oe(Z1),oe(c2,8),oe(VK,8),oe(uO,8),oe(tO,8),oe(nO,8),oe(rO,8),oe(iO,8),oe(sO,8),oe(oO,8),oe(G1,8))};static \u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),FK=(()=>{class t{constructor(){To.Z.registerVersion("angularfire",aC.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:u2,useValue:!0},{provide:c2,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=wr({type:t});static \u0275inj=vr({providers:[$v]})}return t})();const LK_firebaseConfig={apiKey:"AIzaSyBodGG0TcxQ-H5RmQEExFOUFj6WarMxV60",authDomain:"blog-website-d1cc1.firebaseapp.com",projectId:"blog-website-d1cc1",storageBucket:"blog-website-d1cc1.appspot.com",messagingSenderId:"684270688239",appId:"1:684270688239:web:61c1729ce93315e2d8c81a"};function _A(...t){const e=ms(t),n=Lo(t),{args:r,keys:i}=FN(t);if(0===r.length)return A([],e);const s=new st(function BK(t,e,n=mn){return r=>{d2(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)d2(e,()=>{const d=A(t[u],e);let p=!1;d.subscribe(pe(r,g=>{s[u]=g,p||(p=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>UN(i,o):mn));return n?s.pipe(LN(n)):s}function d2(t,e,n){t?Qn(n,t,e):e()}function h2(t){return new st(e=>{_n(t()).subscribe(e)})}function Jp(t,e){const n=I(t)?t:()=>t,r=i=>i.error(n());return new st(e?i=>e.schedule(r,0,i):r)}function yA(){return L((t,e)=>{let n=null;t._refCount++;const r=pe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class f2 extends st{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Q(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ct;const n=this.getSubject();e.add(this.source.subscribe(pe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ct.EMPTY)}return e}refCount(){return yA()(this)}}function Xp(t,e){return I(e)?Lt(t,e,1):Lt(t,1)}function fc(t){return L((e,n)=>{let s,r=null,i=!1;r=e.subscribe(pe(n,void 0,void 0,o=>{s=_n(t(o,fc(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function vA(t){return t<=0?()=>Dn:L((e,n)=>{let r=[];e.subscribe(pe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function IA(t){return L((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Ze="primary",eg=Symbol("RouteTitle");class zK{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Vd(t){return new zK(t)}function qK(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Qs(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!p2(t[i],e[i]))return!1;return!0}function p2(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function g2(t){return t.length>0?t[t.length-1]:null}function ja(t){return function UK(t){return!!t&&(t instanceof st||I(t.lift)&&I(t.subscribe))}(t)?t:_f(t)?A(Promise.resolve(t)):G(t)}const WK={exact:function y2(t,e,n){if(!pc(t.segments,e.segments)||!Hv(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!y2(t.children[r],e.children[r],n))return!1;return!0},subset:v2},m2={exact:function ZK(t,e){return Qs(t,e)},subset:function KK(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>p2(t[n],e[n]))},ignored:()=>!0};function _2(t,e,n){return WK[n.paths](t.root,e.root,n.matrixParams)&&m2[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function v2(t,e,n){return I2(t,e,e.segments,n)}function I2(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!pc(i,n)||e.hasChildren()||!Hv(i,n,r))}if(t.segments.length===n.length){if(!pc(t.segments,n)||!Hv(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!v2(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(pc(t.segments,i)&&Hv(t.segments,i,r)&&t.children[Ze])&&I2(t.children[Ze],e,s,r)}}function Hv(t,e,n){return e.every((r,i)=>m2[n](t[i].parameters,r.parameters))}class Fd{constructor(e=new St([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vd(this.queryParams)),this._queryParamMap}toString(){return JK.serialize(this)}}class St{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zv(this)}}class tg{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Vd(this.parameters)),this._parameterMap}toString(){return T2(this)}}function pc(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let ng=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(){return new EA},providedIn:"root"})}return t})();class EA{parse(e){const n=new cQ(e);return new Fd(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${rg(e.root,!0)}`,r=function tQ(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${qv(n)}=${qv(i)}`).join("&"):`${qv(n)}=${qv(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function XK(t){return encodeURI(t)}(e.fragment)}`:"";return`${n}${r}${i}`}}const JK=new EA;function zv(t){return t.segments.map(e=>T2(e)).join("/")}function rg(t,e){if(!t.hasChildren())return zv(t);if(e){const n=t.children[Ze]?rg(t.children[Ze],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Ze&&r.push(`${i}:${rg(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function YK(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ze&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ze&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Ze?[rg(t.children[Ze],!1)]:[`${i}:${rg(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ze]?`${zv(t)}/${n[0]}`:`${zv(t)}/(${n.join("//")})`}}function E2(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qv(t){return E2(t).replace(/%3B/gi,";")}function wA(t){return E2(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gv(t){return decodeURIComponent(t)}function w2(t){return Gv(t.replace(/\+/g,"%20"))}function T2(t){return`${wA(t.path)}${function eQ(t){return Object.keys(t).map(e=>`;${wA(e)}=${wA(t[e])}`).join("")}(t.parameters)}`}const nQ=/^[^\/()?;#]+/;function TA(t){const e=t.match(nQ);return e?e[0]:""}const rQ=/^[^\/()?;=#]+/,sQ=/^[^=?&#]+/,aQ=/^[^&#]+/;class cQ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new St([],{}):new St([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ze]=new St(e,n)),r}parseSegment(){const e=TA(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new tg(Gv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function iQ(t){const e=t.match(rQ);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=TA(this.remaining);i&&(r=i,this.capture(r))}e[Gv(n)]=Gv(r)}parseQueryParam(e){const n=function oQ(t){const e=t.match(sQ);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function uQ(t){const e=t.match(aQ);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=w2(n),s=w2(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=TA(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new B(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ze);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[Ze]:new St([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}}function C2(t){return t.segments.length>0?new St([],{[Ze]:t}):t}function D2(t){const e={};for(const r of Object.keys(t.children)){const s=D2(t.children[r]);if(r===Ze&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function lQ(t){if(1===t.numberOfChildren&&t.children[Ze]){const e=t.children[Ze];return new St(t.segments.concat(e.segments),e.children)}return t}(new St(t.segments,e))}function gc(t){return t instanceof Fd}function A2(t){let e;const i=C2(function n(s){const o={};for(const u of s.children){const d=n(u);o[u.outlet]=d}const a=new St(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function b2(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return CA(i,i,i,n,r);const s=function hQ(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new R2(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new R2(n,e,r)}(e);if(s.toRoot())return CA(i,i,new St([],{}),n,r);const o=function fQ(t,e,n){if(t.isAbsolute)return new Zv(e,!0,0);if(!n)return new Zv(e,!1,NaN);if(null===n.parent)return new Zv(n,!0,0);const r=Wv(t.commands[0])?0:1;return function pQ(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new Zv(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?sg(o.segmentGroup,o.index,s.commands):P2(o.segmentGroup,o.index,s.commands);return CA(i,o.segmentGroup,a,n,r)}function Wv(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ig(t){return"object"==typeof t&&null!=t&&t.outlets}function CA(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`}),o=t===e?n:S2(t,e,n);const a=C2(D2(o));return new Fd(a,s,i)}function S2(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:S2(s,e,n)}),new St(t.segments,r)}class R2{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Wv(r[0]))throw new B(4003,!1);const i=r.find(ig);if(i&&i!==g2(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zv{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function P2(t,e,n){if(t||(t=new St([],{})),0===t.segments.length&&t.hasChildren())return sg(t,e,n);const r=function mQ(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(ig(a))break;const u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!x2(u,d,o))return s;r+=2}else{if(!x2(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new St(t.segments.slice(0,r.pathIndex),{});return s.children[Ze]=new St(t.segments.slice(r.pathIndex),t.children),sg(s,0,i)}return r.match&&0===i.length?new St(t.segments,{}):r.match&&!t.hasChildren()?DA(t,e,n):r.match?sg(t,0,i):DA(t,e,n)}function sg(t,e,n){if(0===n.length)return new St(t.segments,{});{const r=function gQ(t){return ig(t[0])?t[0].outlets:{[Ze]:t}}(n),i={};if(Object.keys(r).some(s=>s!==Ze)&&t.children[Ze]&&1===t.numberOfChildren&&0===t.children[Ze].segments.length){const s=sg(t.children[Ze],e,n);return new St(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=P2(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new St(t.segments,i)}}function DA(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(ig(s)){const u=_Q(s.outlets);return new St(r,u)}if(0===i&&Wv(n[0])){r.push(new tg(t.segments[e].path,M2(n[0]))),i++;continue}const o=ig(s)?s.outlets[Ze]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Wv(a)?(r.push(new tg(o,M2(a))),i+=2):(r.push(new tg(o,{})),i++)}return new St(r,{})}function _Q(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=DA(new St([],{}),0,r))}),e}function M2(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function x2(t,e,n){return t==n.path&&Qs(e,n.parameters)}const og="imperative";class Ys{constructor(e,n){this.id=e,this.url=n}}class Kv extends Ys{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $a extends Ys{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ag extends Ys{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ld extends Ys{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class Qv extends Ys{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class N2 extends Ys{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yQ extends Ys{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vQ extends Ys{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class IQ extends Ys{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EQ extends Ys{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wQ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class TQ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class CQ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DQ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AQ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bQ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class O2{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class AA{}class bA{constructor(e){this.url=e}}class SQ{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ug,this.attachRef=null}}let ug=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new SQ,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class k2{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=SA(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=SA(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=RA(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return RA(e,this._root).map(n=>n.value)}}function SA(t,e){if(t===e.value)return e;for(const n of e.children){const r=SA(t,n);if(r)return r}return null}function RA(t,e){if(t===e.value)return[e];for(const n of e.children){const r=RA(t,n);if(r.length)return r.unshift(e),r}return[]}class Oo{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Ud(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class V2 extends k2{constructor(e,n){super(e),this.snapshot=n,PA(this,e)}toString(){return this.snapshot.toString()}}function F2(t,e){const n=function RQ(t,e){const o=new Yv([],{},{},"",{},Ze,e,null,{});return new U2("",new Oo(o,[]))}(0,e),r=new M([new tg("",{})]),i=new M({}),s=new M({}),o=new M({}),a=new M(""),u=new Ha(r,i,o,a,s,Ze,e,n.root);return u.snapshot=n.root,new V2(new Oo(u,[]),n)}class Ha{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Te(d=>d[eg]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Te(e=>Vd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Te(e=>Vd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function L2(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function PQ(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Yv{get title(){return this.data?.[eg]}constructor(e,n,r,i,s,o,a,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class U2 extends k2{constructor(e,n){super(n),this.url=e,PA(this,n)}toString(){return B2(this._root)}}function PA(t,e){e.value._routerState=t,e.children.forEach(n=>PA(t,n))}function B2(t){const e=t.children.length>0?` { ${t.children.map(B2).join(", ")} } `:"";return`${t.value}${e}`}function MA(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Qs(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Qs(e.params,n.params)||t.paramsSubject.next(n.params),function GK(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Qs(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Qs(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function xA(t,e){const n=Qs(t.params,e.params)&&function QK(t,e){return pc(t,e)&&t.every((n,r)=>Qs(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||xA(t.parent,e.parent))}let NA=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ze,this.activateEvents=new dn,this.deactivateEvents=new dn,this.attachEvents=new dn,this.detachEvents=new dn,this.parentContexts=me(ug),this.location=me(os),this.changeDetector=me(x_),this.environmentInjector=me(Ui),this.inputBinder=me(Jv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new MQ(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Me({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Lr]})}return t})();class MQ{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ha?this.route:e===ug?this.childContexts:this.parent.get(e,n)}}const Jv=new le("");let j2=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=_A([r.queryParams,r.params,r.data]).pipe(mt(([s,o,a],u)=>(a={...s,...o,...a},0===u?G(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function sq(t){const e=tt(t);if(!e)return null;const n=new df(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();function cg(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function NQ(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return cg(t,r,i);return cg(t,r)})}(t,e,n);return new Oo(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>cg(t,a)),o}}const r=function OQ(t){return new Ha(new M(t.url),new M(t.params),new M(t.queryParams),new M(t.fragment),new M(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>cg(t,s));return new Oo(r,i)}}const OA="ngNavigationCancelingError";function $2(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=gc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=H2(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function H2(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[OA]=!0,r.cancellationCode=e,n&&(r.url=n),r}function z2(t){return t&&t[OA]}let q2=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bn({type:t,selectors:[["ng-component"]],standalone:!0,features:[IM],decls:1,vars:0,template:function(r,i){1&r&&Tt(0,"router-outlet")},dependencies:[NA],encapsulation:2})}return t})();function kA(t){const e=t.children&&t.children.map(kA),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ze&&(n.component=q2),n}function fs(t){return t.outlet||Ze}function lg(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class $Q{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),MA(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Ud(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ud(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ud(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Ud(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new bQ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new DQ(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(MA(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),MA(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=lg(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class G2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Xv{constructor(e,n){this.component=e,this.route=n}}function HQ(t,e,n){const r=t._root;return dg(r,e?e._root:null,n,[r.value])}function Bd(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function dI(t){return null!==Ka(t)}(t)?e.get(t):t:r}function dg(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ud(e);return t.children.forEach(o=>{(function qQ(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function GQ(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!pc(t.url,e.url);case"pathParamsOrQueryParamsChange":return!pc(t.url,e.url)||!Qs(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xA(t,e)||!Qs(t.queryParams,e.queryParams);default:return!xA(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new G2(r)):(s.data=o.data,s._resolvedData=o._resolvedData),dg(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Xv(a.outlet.component,o))}else o&&hg(e,a,i),i.canActivateChecks.push(new G2(r)),dg(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>hg(a,n.getContext(o),i)),i}function hg(t,e,n){const r=Ud(t),i=t.value;Object.entries(r).forEach(([s,o])=>{hg(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new Xv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function fg(t){return"function"==typeof t}function W2(t){return t instanceof gy||"EmptyError"===t?.name}const eI=Symbol("INITIAL_VALUE");function jd(){return mt(t=>_A(t.map(e=>e.pipe(Gl(1),_y(eI)))).pipe(Te(e=>{for(const n of e)if(!0!==n){if(n===eI)return eI;if(!1===n||n instanceof Fd)return n}return!0}),cs(e=>e!==eI),Gl(1)))}function Z2(t){return function wi(...t){return Ti(t)}(ur(e=>{if(gc(e))throw $2(0,e)}),Te(e=>!0===e))}class tI{constructor(e){this.segmentGroup=e||null}}class K2{constructor(e){this.urlTree=e}}function $d(t){return Jp(new tI(t))}function Q2(t){return Jp(new K2(t))}class hY{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new B(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return G(r);if(i.numberOfChildren>1||!i.children[Ze])return Jp(new B(4e3,!1));i=i.children[Ze]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new Fd(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new St(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const VA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fY(t,e,n,r,i){const s=FA(t,e,n);return s.matched?(r=function VQ(t,e){return t.providers&&!t._injector&&(t._injector=kw(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function cY(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?G(i.map(o=>{const a=Bd(o,t);return ja(function JQ(t){return t&&fg(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(jd(),Z2()):G(!0)}(r,e,n).pipe(Te(o=>!0===o?s:{...VA}))):G(s)}function FA(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...VA}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||qK)(n,t,e);if(!i)return{...VA};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Y2(t,e,n,r){return n.length>0&&function mY(t,e,n){return n.some(r=>nI(t,e,r)&&fs(r)!==Ze)}(t,n,r)?{segmentGroup:new St(e,gY(r,new St(n,t.children))),slicedSegments:[]}:0===n.length&&function _Y(t,e,n){return n.some(r=>nI(t,e,r))}(t,n,r)?{segmentGroup:new St(t.segments,pY(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new St(t.segments,t.children),slicedSegments:n}}function pY(t,e,n,r,i){const s={};for(const o of r)if(nI(t,n,o)&&!i[fs(o)]){const a=new St([],{});s[fs(o)]=a}return{...i,...s}}function gY(t,e){const n={};n[Ze]=e;for(const r of t)if(""===r.path&&fs(r)!==Ze){const i=new St([],{});n[fs(r)]=i}return n}function nI(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class EY{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new hY(this.urlSerializer,this.urlTree)}noMatchError(e){return new B(4002,!1)}recognize(){const e=Y2(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ze).pipe(fc(n=>{if(n instanceof K2)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof tI?this.noMatchError(n):n}),Te(n=>{const r=new Yv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ze,this.rootComponentType,null,{}),i=new Oo(r,n),s=new U2("",i),o=function dQ(t,e,n=null,r=null){return b2(A2(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ze).pipe(fc(r=>{throw r instanceof tI?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=L2(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return A(i).pipe(Xp(s=>{const o=r.children[s],a=function BQ(t,e){const n=t.filter(r=>fs(r)===e);return n.push(...t.filter(r=>fs(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),yy((s,o)=>(s.push(...o),s)),my(null),function jK(t,e){const n=arguments.length>=2;return r=>r.pipe(t?cs((i,s)=>t(i,s,r)):mn,vA(1),n?my(e):X1(()=>new gy))}(),Lt(s=>{if(null===s)return $d(r);const o=J2(s);return function wY(t){t.sort((e,n)=>e.value.outlet===Ze?-1:n.value.outlet===Ze?1:e.value.outlet.localeCompare(n.value.outlet))}(o),G(o)}))}processSegment(e,n,r,i,s,o){return A(n).pipe(Xp(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(fc(u=>{if(u instanceof tI)return G(null);throw u}))),ya(a=>!!a),fc(a=>{if(W2(a))return function vY(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?G([]):$d(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function yY(t,e,n,r){return!!(fs(t)===r||r!==Ze&&nI(e,n,t))&&("**"===t.path||FA(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):$d(i):$d(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Q2(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Lt(o=>{const a=new St(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:p}=FA(n,i,s);if(!a)return $d(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,p);return i.redirectTo.startsWith("/")?Q2(g):this.applyRedirects.lineralizeSegments(i,g).pipe(Lt(_=>this.processSegment(e,r,n,_.concat(d),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?g2(i).parameters:{};a=G({snapshot:new Yv(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,X2(r),fs(r),r.component??r._loadedComponent??null,r,eU(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=fY(n,r,i,e).pipe(Te(({matched:u,consumedSegments:d,remainingSegments:p,parameters:g})=>u?{snapshot:new Yv(d,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,X2(r),fs(r),r.component??r._loadedComponent??null,r,eU(r)),consumedSegments:d,remainingSegments:p}:null));return a.pipe(mt(u=>null===u?$d(n):this.getChildConfig(e=r._injector??e,r,i).pipe(mt(({routes:d})=>{const p=r._loadedInjector??e,{snapshot:g,consumedSegments:_,remainingSegments:v}=u,{segmentGroup:E,slicedSegments:C}=Y2(n,_,v,d);if(0===C.length&&E.hasChildren())return this.processChildren(p,d,E).pipe(Te(O=>null===O?null:[new Oo(g,O)]));if(0===d.length&&0===C.length)return G([new Oo(g,[])]);const S=fs(r)===s;return this.processSegment(p,d,E,C,S?Ze:s,!0).pipe(Te(O=>[new Oo(g,O)]))}))))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?G({routes:n._loadedRoutes,injector:n._loadedInjector}):function uY(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?G(!0):G(i.map(o=>{const a=Bd(o,t);return ja(function ZQ(t){return t&&fg(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(jd(),Z2())}(e,n,r).pipe(Lt(i=>i?this.configLoader.loadChildren(e,n).pipe(ur(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function dY(t){return Jp(H2(!1,3))}())):G({routes:[],injector:e})}}function TY(t){const e=t.value.routeConfig;return e&&""===e.path}function J2(t){const e=[],n=new Set;for(const r of t){if(!TY(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=J2(r.children);e.push(new Oo(r.value,i))}return e.filter(r=>!n.has(r))}function X2(t){return t.data||{}}function eU(t){return t.resolve||{}}function tU(t){return"string"==typeof t.title||null===t.title}function LA(t){return mt(e=>{const n=t(e);return n?A(n).pipe(Te(()=>e)):G(e)})}const Hd=new le("ROUTES");let UA=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=me(px)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return G(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ja(n.loadComponent()).pipe(Te(nU),ur(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),IA(()=>{this.componentLoaders.delete(n)})),i=new f2(r,()=>new $).pipe(yA());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function PY(t,e,n,r){return ja(t.loadChildren()).pipe(Te(nU),Lt(i=>i instanceof yM||Array.isArray(i)?G(i):A(e.compileModuleAsync(i))),Te(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Hd,[],{optional:!0,self:!0}).flat()),{routes:o.map(kA),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(IA(()=>{this.childrenLoaders.delete(r)})),o=new f2(s,()=>new $).pipe(yA());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nU(t){return function MY(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let rI=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $,this.transitionAbortSubject=new $,this.configLoader=me(UA),this.environmentInjector=me(Ui),this.urlSerializer=me(ng),this.rootContexts=me(ug),this.inputBindingEnabled=null!==me(Jv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new TQ(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new wQ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new M({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:og,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(cs(s=>0!==s.id),Te(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),mt(s=>{this.currentTransition=s;let o=!1,a=!1;return G(s).pipe(ur(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),mt(u=>{const d=u.currentBrowserUrl.toString(),p=!n.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!p&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const _="";return this.events.next(new Ld(u.id,this.urlSerializer.serialize(u.rawUrl),_,0)),u.resolve(null),Dn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return G(u).pipe(mt(_=>{const v=this.transitions?.getValue();return this.events.next(new Kv(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),v!==this.transitions?.getValue()?Dn:Promise.resolve(_)}),function CY(t,e,n,r,i,s){return Lt(o=>function IY(t,e,n,r,i,s,o="emptyOnly"){return new EY(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(Te(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),ur(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const v=new N2(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(v)}));if(p&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:_,extractedUrl:v,source:E,restoredState:C,extras:S}=u,O=new Kv(_,this.urlSerializer.serialize(v),E,C);this.events.next(O);const R=F2(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:R,urlAfterRedirects:v,extras:{...S,skipLocationChange:!1,replaceUrl:!1}},G(s)}{const _="";return this.events.next(new Ld(u.id,this.urlSerializer.serialize(u.extractedUrl),_,1)),u.resolve(null),Dn}}),ur(u=>{const d=new yQ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Te(u=>(this.currentTransition=s={...u,guards:HQ(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function eY(t,e){return Lt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?G({...n,guardsResult:!0}):function tY(t,e,n,r){return A(t).pipe(Lt(i=>function aY(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?G(s.map(a=>{const u=lg(e)??i,d=Bd(a,u);return ja(function YQ(t){return t&&fg(t.canDeactivate)}(d)?d.canDeactivate(t,e,n,r):u.runInContext(()=>d(t,e,n,r))).pipe(ya())})).pipe(jd()):G(!0)}(i.component,i.route,n,e,r)),ya(i=>!0!==i,!0))}(o,r,i,t).pipe(Lt(a=>a&&function WQ(t){return"boolean"==typeof t}(a)?function nY(t,e,n,r){return A(e).pipe(Xp(i=>cC(function iY(t,e){return null!==t&&e&&e(new CQ(t)),G(!0)}(i.route.parent,r),function rY(t,e){return null!==t&&e&&e(new AQ(t)),G(!0)}(i.route,r),function oY(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function zQ(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>h2(()=>G(o.guards.map(u=>{const d=lg(o.node)??n,p=Bd(u,d);return ja(function QQ(t){return t&&fg(t.canActivateChild)}(p)?p.canActivateChild(r,t):d.runInContext(()=>p(r,t))).pipe(ya())})).pipe(jd())));return G(s).pipe(jd())}(t,i.path,n),function sY(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return G(!0);const i=r.map(s=>h2(()=>{const o=lg(e)??n,a=Bd(s,o);return ja(function KQ(t){return t&&fg(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(ya())}));return G(i).pipe(jd())}(t,i.route,n))),ya(i=>!0!==i,!0))}(r,s,t,e):G(a)),Te(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),ur(u=>{if(s.guardsResult=u.guardsResult,gc(u.guardsResult))throw $2(0,u.guardsResult);const d=new vQ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),cs(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),LA(u=>{if(u.guards.canActivateChecks.length)return G(u).pipe(ur(d=>{const p=new IQ(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),mt(d=>{let p=!1;return G(d).pipe(function DY(t,e){return Lt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let s=0;return A(i).pipe(Xp(o=>function AY(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!tU(i)&&(s[eg]=i.title),function bY(t,e,n,r){const i=function SY(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return G({});const s={};return A(i).pipe(Lt(o=>function RY(t,e,n,r){const i=lg(e)??r,s=Bd(t,i);return ja(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(ya(),ur(a=>{s[o]=a}))),vA(1),function $K(t){return Te(()=>t)}(s),fc(o=>W2(o)?Dn:Jp(o)))}(s,t,e,r).pipe(Te(o=>(t._resolvedData=o,t.data=L2(t,n).resolve,i&&tU(i)&&(t.data[eg]=i.title),null)))}(o.route,r,t,e)),ur(()=>s++),vA(1),Lt(o=>s===i.length?G(n):Dn))})}(n.paramsInheritanceStrategy,this.environmentInjector),ur({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(d,"",2)}}))}),ur(d=>{const p=new EQ(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),LA(u=>{const d=p=>{const g=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(p.routeConfig).pipe(ur(_=>{p.component=_}),Te(()=>{})));for(const _ of p.children)g.push(...d(_));return g};return _A(d(u.targetSnapshot.root)).pipe(my(),Gl(1))}),LA(()=>this.afterPreactivation()),Te(u=>{const d=function xQ(t,e,n){const r=cg(t,e._root,n?n._root:void 0);return new V2(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:d},s}),ur(()=>{this.events.next(new AA)}),((t,e,n,r)=>Te(i=>(new $Q(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Gl(1),ur({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new $a(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function HK(t){return L((e,n)=>{_n(t).subscribe(pe(n,()=>n.complete(),Ce)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(ur(u=>{throw u}))),IA(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),fc(u=>{if(a=!0,z2(u))this.events.next(new ag(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function kQ(t){return z2(t)&&gc(t.url)}(u)?this.events.next(new bA(u.url)):s.resolve(!1);else{this.events.next(new Qv(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(d){s.reject(d)}}return Dn}))}))}cancelNavigationTransition(n,r,i){const s=new ag(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function rU(t){return t!==og}let iU=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ze);return r}getResolvedTitleForRoute(n){return n.data[eg]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(){return me(xY)},providedIn:"root"})}return t})(),xY=(()=>{class t extends iU{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(NN))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),NY=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(){return me(kY)},providedIn:"root"})}return t})();class OY{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let kY=(()=>{class t extends OY{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Hn(t)))(i||t)}}();static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const iI=new le("",{providedIn:"root",factory:()=>({})});let VY=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:function(){return me(FY)},providedIn:"root"})}return t})(),FY=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var pg=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(pg||{});function sU(t,e){t.events.pipe(cs(n=>n instanceof $a||n instanceof ag||n instanceof Qv||n instanceof Ld),Te(n=>n instanceof $a||n instanceof Ld?pg.COMPLETE:n instanceof ag&&(0===n.code||1===n.code)?pg.REDIRECTING:pg.FAILED),cs(n=>n!==pg.REDIRECTING),Gl(1)).subscribe(()=>{e()})}function LY(t){throw t}function UY(t,e,n){return e.parse("/")}const BY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Gi=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=me(hx),this.isNgZoneEnabled=!1,this._events=new $,this.options=me(iI,{optional:!0})||{},this.pendingTasks=me(fx),this.errorHandler=this.options.errorHandler||LY,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||UY,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=me(VY),this.routeReuseStrategy=me(NY),this.titleStrategy=me(iU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=me(Hd,{optional:!0})?.flat()??[],this.navigationTransitions=me(rI),this.urlSerializer=me(ng),this.location=me(gT),this.componentInputBindingEnabled=!!me(Jv,{optional:!0}),this.eventsSubscription=new ct,this.isNgZoneEnabled=me(wt)instanceof wt&&wt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Fd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=F2(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(oU(r)&&this._events.next(r));if(r instanceof Kv)rU(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Ld)this.rawUrlTree=i.rawUrl;else if(r instanceof N2){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof AA)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof ag)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof bA){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||rU(i.source)};this.scheduleNavigation(s,og,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Qv&&this.restoreHistory(i,!0),r instanceof $a&&(this.navigated=!0),oU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),og,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(kA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let g,p=null;switch(a){case"merge":p={...this.currentUrlTree.queryParams,...s};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}null!==p&&(p=this.removeEmptyProps(p));try{g=A2(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return b2(g,n,p,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=gc(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,og,null,r)}navigate(n,r={skipLocationChange:!1}){return function $Y(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new B(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...BY}:!1===r?{...jY}:r,gc(n))return _2(this.currentUrlTree,n,i);const s=this.parseUrl(n);return _2(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((g,_)=>{a=g,u=_});const p=this.pendingTasks.add();return sU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oU(t){return!(t instanceof AA||t instanceof bA)}let Js=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new $,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(d=>{d instanceof $a&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function mS(t,e,n){return function wB(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?gS:Zm}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(te(Gi),te(Ha),function nl(t){return function YI(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(Rg(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(vn(),t)}("tabindex"),te(po),te(hi),te(Lu))};static#t=this.\u0275dir=Me({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&mi("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Vs("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Ll],skipLocationChange:["skipLocationChange","skipLocationChange",Ll],replaceUrl:["replaceUrl","replaceUrl",Ll],routerLink:"routerLink"},standalone:!0,features:[MR,Lr]})}return t})();class aU{}let qY=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(cs(n=>n instanceof $a),Xp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=kw(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return A(i).pipe(ui())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):G(null);const s=i.pipe(Lt(o=>null===o?G(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?A([s,this.loader.loadComponent(r)]).pipe(ui()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Gi),oe(px),oe(Ui),oe(aU),oe(UA))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const BA=new le("");let uU=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Kv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof $a?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Ld&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof O2&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new O2(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function iR(){throw new Error("invalid")}()};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac})}return t})();function ko(t,e){return{\u0275kind:t,\u0275providers:e}}function lU(){const t=me(fi);return e=>{const n=t.get(Fl);if(e!==n.components[0])return;const r=t.get(Gi),i=t.get(dU);1===t.get(jA)&&r.initialNavigation(),t.get(hU,null,et.Optional)?.setUpPreloading(),t.get(BA,null,et.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const dU=new le("",{factory:()=>new $}),jA=new le("",{providedIn:"root",factory:()=>1}),hU=new le("");function KY(t){return ko(0,[{provide:hU,useExisting:qY},{provide:aU,useExisting:t}])}const fU=new le("ROUTER_FORROOT_GUARD"),YY=[gT,{provide:ng,useClass:EA},Gi,ug,{provide:Ha,useFactory:function cU(t){return t.routerState.root},deps:[Gi]},UA,[]];function JY(){return new Ex("Router",Gi)}let pU=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[YY,[],{provide:Hd,multi:!0,useValue:n},{provide:fU,useFactory:nJ,deps:[[Gi,new Ru,new ol]]},{provide:iI,useValue:r||{}},r?.useHash?{provide:Lu,useClass:lq}:{provide:Lu,useClass:Jx},{provide:BA,useFactory:()=>{const t=me(SG),e=me(wt),n=me(iI),r=me(rI),i=me(ng);return n.scrollOffset&&t.setOffset(n.scrollOffset),new uU(i,r,t,e,n)}},r?.preloadingStrategy?KY(r.preloadingStrategy).\u0275providers:[],{provide:Ex,multi:!0,useFactory:JY},r?.initialNavigation?rJ(r):[],r?.bindToComponentInputs?ko(8,[j2,{provide:Jv,useExisting:j2}]).\u0275providers:[],[{provide:gU,useFactory:lU},{provide:sT,multi:!0,useExisting:gU}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Hd,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(oe(fU,8))};static#t=this.\u0275mod=wr({type:t});static#n=this.\u0275inj=vr({})}return t})();function nJ(t){return"guarded"}function rJ(t){return["disabled"===t.initialNavigation?ko(3,[{provide:Yw,multi:!0,useFactory:()=>{const e=me(Gi);return()=>{e.setUpLocationChangeListener()}}},{provide:jA,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?ko(2,[{provide:jA,useValue:0},{provide:Yw,multi:!0,deps:[fi],useFactory:e=>{const n=e.get(uq,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(Gi),s=e.get(dU);sU(i,()=>{r(!0)}),e.get(rI).afterPreactivation=()=>(r(!0),s.closed?G(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const gU=new le("");let $A=(()=>{class t{constructor(n){this.afs=n}loadFeatured(){return this.afs.collection("posts",n=>n.where("isFeatured","==",!0).limit(4)).snapshotChanges().pipe(Te(n=>n.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,data:i}})))}loadLatest(){return this.afs.collection("posts",n=>n.orderBy("createdAt")).snapshotChanges().pipe(Te(n=>n.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,data:i}})))}loadCategoryPosts(n){return this.afs.collection("posts",r=>r.where("category.categoryId","==",n).limit(4)).snapshotChanges().pipe(Te(r=>r.map(i=>{const s=i.payload.doc.data();return{id:i.payload.doc.id,data:s}})))}loadOnePost(n){return this.afs.doc(`posts/${n}`).valueChanges()}loadSimilar(n){return this.afs.collection("posts",r=>r.where("category.categoryId","==",n).limit(4)).snapshotChanges().pipe(Te(r=>r.map(i=>{const s=i.payload.doc.data();return{id:i.payload.doc.id,data:s}})))}countViews(n){const r={views:To.Z.firestore.FieldValue.increment(1)};this.afs.doc(`posts/${n})`).update(r).then(()=>{console.log("Views Count Updated..")})}static#e=this.\u0275fac=function(r){return new(r||t)(oe($v))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sJ(t,e){1&t&&(se(0,"small",9),ge(1," Featured "),ie())}const oJ=function(t){return["/post",t]};function aJ(t,e){if(1&t&&(se(0,"div",1),Tt(1,"img",2),se(2,"div",3)(3,"small",4),ge(4),ie(),gi(5,sJ,2,0,"small",5),se(6,"small",6),ge(7),ie(),se(8,"h5",7),ge(9),ie(),se(10,"P"),ge(11),ie(),se(12,"small",8),ge(13),Fw(14,"date"),ie()()()),2&t){const n=tP();rn("routerLink",D_(10,oJ,n.postData.id)),dt(1),__("src",n.postData.data.postImgPath,Zm),dt(3),ss(" ",n.postData.data.category.category," "),dt(1),rn("ngIf",n.postData.data.isFeatured),dt(2),ss(" Views - ",n.postData.data.views,""),dt(2),vf(n.postData.data.title),dt(2),vf(n.postData.data.excerpt),dt(2),ss("LAST UPDATED - ",Lw(14,8,n.postData.data.createdAt.toMillis()),"")}}let HA=(()=>{class t{constructor(){}ngOnInit(){console.log(this.postData)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bn({type:t,selectors:[["app-post-card"]],inputs:{postData:"postData"},decls:1,vars:1,consts:[["class","card shadow-effect",3,"routerLink",4,"ngIf"],[1,"card","shadow-effect",3,"routerLink"],["alt","post-img","height","300px",1,"card-img-top",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-sucess text-center ms-3",4,"ngIf"],[1,"bg-light","text-info","text-center","ms-3"],[1,"mt-1"],[1,"bg-light","text-warning","text-center","ml-3"],[1,"bg-light","text-sucess","text-center","ms-3"]],template:function(r,i){1&r&&gi(0,aJ,15,12,"div",0),2&r&&rn("ngIf",i.postData)},dependencies:[W_,Js,ST],styles:[".card[_ngcontent-%COMP%]{max-width:410px;max-height:450px;overflow:hidden}"]})}return t})();function uJ(t,e){if(1&t&&(se(0,"div",9),Tt(1,"app-post-card",10),ie()),2&t){const n=e.$implicit;dt(1),rn("postData",n)}}function cJ(t,e){if(1&t&&(se(0,"div",11),Tt(1,"app-post-card",10),ie()),2&t){const n=e.$implicit;dt(1),rn("postData",n)}}let lJ=(()=>{class t{constructor(n){this.postServices=n}ngOnInit(){this.postServices.loadFeatured().subscribe(n=>{this.featuredPostsArray=n}),this.postServices.loadLatest().subscribe(n=>{this.latestPostsArray=n})}static#e=this.\u0275fac=function(r){return new(r||t)(te($A))};static#t=this.\u0275cmp=bn({type:t,selectors:[["app-home"]],decls:18,vars:2,consts:[[1,"featured-section"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","text-center","mt-5"],[1,"text-white"],["class","col-lg-3",4,"ngFor","ngForOf"],[1,"container","mt-5"],[1,"col-md-12","text-center"],["class","col-md-4 mt-3",4,"ngFor","ngForOf"],[1,"col-lg-3"],[3,"postData"],[1,"col-md-4","mt-3"]],template:function(r,i){1&r&&(se(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),ge(5," Featured Posts"),ie(),se(6,"p",4),ge(7,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Aperiam, consequuntur!"),ie()()(),se(8,"div",2),gi(9,uJ,2,1,"div",5),ie()()(),se(10,"section",6)(11,"div",7)(12,"h2"),ge(13," Latest Posts "),ie(),se(14,"p"),ge(15,"Lorem ipsum dolor sit amet consectetur adipisicing elit."),ie()(),se(16,"div",2),gi(17,cJ,2,1,"div",8),ie()()),2&r&&(dt(9),rn("ngForOf",i.featuredPostsArray),dt(8),rn("ngForOf",i.latestPostsArray))},dependencies:[xf,HA],styles:[".featured-section[_ngcontent-%COMP%]{padding-left:130px;padding-right:130px;padding-bottom:130px;background-color:var(--primary-color)}"]})}return t})();function dJ(t,e){if(1&t&&(se(0,"div",7),Tt(1,"app-post-card",8),ie()),2&t){const n=e.$implicit;dt(1),rn("postData",n)}}let hJ=(()=>{class t{constructor(n,r){this.route=n,this.postService=r}ngOnInit(){this.route.params.subscribe(n=>{console.log(n),this.categoryObj=n,this.postService.loadCategoryPosts(n.id).subscribe(r=>{this.postsArray=r})})}static#e=this.\u0275fac=function(r){return new(r||t)(te(Ha),te($A))};static#t=this.\u0275cmp=bn({type:t,selectors:[["app-single-category"]],decls:10,vars:2,consts:[[1,"bg-theme","p-5"],[1,"container"],[1,"contain"],[1,"text-white"],[1,"container","mt-5","mb-5"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[3,"postData"]],template:function(r,i){1&r&&(se(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),ge(4),ie(),se(5,"p",3),ge(6,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perferendis, veniam! "),ie()()()(),se(7,"div",4)(8,"div",5),gi(9,dJ,2,1,"div",6),ie()()),2&r&&(dt(4),ss(" ",i.categoryObj.category,""),dt(5),rn("ngForOf",i.postsArray))},dependencies:[xf,HA],styles:[".contain[_ngcontent-%COMP%]{background-color:#000;padding:30px}"]})}return t})(),fJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bn({type:t,selectors:[["app-comment-form"]],decls:17,vars:0,consts:[[1,"card","mt-5","shadow-effect"],[1,"card-body"],[1,"ms-3"],["action",""],[1,"form-group"],["for","",1,"ms-3"],["type","text","placeholder","Enter your name here",1,"form-control","shadow-effect"],["cols","30","rows","10","placeholder","Add your comment here",1,"form-control","shadow-effect"],[1,"btn","btn-info","btn-theme","ms-3"]],template:function(r,i){1&r&&(se(0,"div",0),Tt(1,"div",1),se(2,"h2",2),ge(3,"Leave a comment"),ie(),se(4,"p",2),ge(5," You can leave a comment using this comment form"),ie(),se(6,"form",3)(7,"div",4)(8,"label",5),ge(9,"Name"),ie(),Tt(10,"input",6),ie(),se(11,"div",4)(12,"label",5),ge(13,"Comment"),ie(),Tt(14,"textarea",7),ie(),se(15,"button",8),ge(16,"Add a Comment"),ie()()())},dependencies:[ly,ty,$l],styles:[".card-body[_ngcontent-%COMP%]{font-size:14px}"]})}return t})(),pJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bn({type:t,selectors:[["app-comment-list"]],decls:40,vars:0,consts:[[1,"card","mb-5","mt-5","pb-5","shadow-effect"],[1,"card-body"],[1,"mt-3","mb-4"],[1,"commnet-box","mt-3","mb-3"],[1,"mb-0"],[1,"text-danger"],[1,"mt-3","mb-3"],["href","#",1,"mt-1"],["href","#",1,"mt-1","ms-3"],[1,"commnet-box","mt-3"]],template:function(r,i){1&r&&(se(0,"div",0)(1,"div",1)(2,"h4",2),ge(3,"Comment (15,256)"),ie(),se(4,"div",3)(5,"h6",4),ge(6,"John Doe"),ie(),se(7,"small",5),ge(8,"LAST UPDATED - SEP 20,2023"),ie(),se(9,"div",6),ge(10," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Maiores, dicta. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Maiores, temporibus. "),ie(),se(11,"a",7),ge(12,"Reply"),ie(),se(13,"a",8),ge(14,"View Reply"),ie(),Tt(15,"hr"),ie(),se(16,"div",3)(17,"h6",4),ge(18,"John Doe"),ie(),se(19,"small",5),ge(20,"LAST UPDATED - SEP 20,2023"),ie(),se(21,"div",6),ge(22," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Maiores, dicta. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Maiores, temporibus. "),ie(),se(23,"a",7),ge(24,"Reply"),ie(),se(25,"a",8),ge(26,"View Reply"),ie(),Tt(27,"hr"),ie(),se(28,"div",9)(29,"h6",4),ge(30,"John Doe"),ie(),se(31,"small",5),ge(32,"LAST UPDATED - SEP 20,2023"),ie(),se(33,"div",6),ge(34," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Maiores, dicta. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Maiores, temporibus. "),ie(),se(35,"a",7),ge(36,"Reply"),ie(),se(37,"a",8),ge(38,"View Reply"),ie(),Tt(39,"hr"),ie()()())},styles:[".comment-box[_ngcontent-%COMP%]{padding:15px 35px;background-color:#fff}.card-body[_ngcontent-%COMP%]{background-color:#f1f0f0}"]})}return t})();function gJ(t,e){1&t&&(se(0,"small",14),ge(1,"Featured"),ie())}function mJ(t,e){if(1&t&&(se(0,"div"),Tt(1,"app-post-card",15),ie()),2&t){const n=e.$implicit;dt(1),rn("postData",n)}}const _J=[{path:"",component:lJ},{path:"category/:category/:id",component:hJ},{path:"post/:id",component:(()=>{class t{constructor(n,r){this.route=n,this.postService=r}ngOnInit(){this.route.params.subscribe(n=>{this.postService.countViews(n.id),this.postService.loadOnePost(n.id).subscribe(r=>{this.postData=r,this.loadSimilarPost(this.postData.category.categoryId)})})}loadSimilarPost(n){this.postService.loadSimilar(n).subscribe(r=>{this.SimilarPostArray=r})}static#e=this.\u0275fac=function(r){return new(r||t)(te(Ha),te($A))};static#t=this.\u0275cmp=bn({type:t,selectors:[["app-single-post"]],decls:21,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-md-9"],[1,"card","shadow-effect"],["alt","",1,"card-img-top","img-fluid",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-success text-center ms-2",4,"ngIf"],[1,"bg-light","text-info","text-center","ms-2"],[1,"bg-light","text-warning","text-center","ms-2"],[1,"mt-3","mb-3"],[3,"innerHtml"],[1,"col-md-3"],[4,"ngFor","ngForOf"],[1,"bg-light","text-success","text-center","ms-2"],[3,"postData"]],template:function(r,i){1&r&&(se(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Tt(4,"img",4),se(5,"div",5)(6,"small",6),ge(7),ie(),gi(8,gJ,2,0,"small",7),se(9,"small",8),ge(10),ie(),se(11,"small",9),ge(12),Fw(13,"date"),ie(),se(14,"h1",10),ge(15),ie(),Tt(16,"P",11),ie()(),Tt(17,"app-comment-form")(18,"app-comment-list"),ie(),se(19,"div",12),gi(20,mJ,2,1,"div",13),ie()()()),2&r&&(dt(4),__("src",i.postData.postImgPath,Zm),dt(3),ss(" ",i.postData.category.category,""),dt(1),rn("ngIf",i.postData.isFeatured),dt(2),ss("Views - ",i.postData.views,""),dt(2),ss("Last UPDATED - ",Lw(13,8,i.postData.createdAt.toMillis()),""),dt(3),ss(" ",i.postData.title,""),dt(1),rn("innerHtml",i.postData.content,pS),dt(4),rn("ngForOf",i.SimilarPostArray))},dependencies:[xf,W_,fJ,pJ,HA,ST]})}return t})()},{path:"about",component:(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bn({type:t,selectors:[["app-about-us"]],decls:14,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-center"],[1,"p-5","mt-4","mb-5","bg-secondary-theme","text-theme-primary"],[1,"text-button"],["routerLink","/",1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(r,i){1&r&&(se(0,"section",0)(1,"div",1)(2,"h1",2),ge(3,"About Us"),ie(),se(4,"div",3)(5,"p"),ge(6,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Officiis veniam dolores beatae fugit libero reprehenderit laborum temporibus eaque in voluptas. Laborum obcaecati nostrum et impedit, recusandae minus pariatur ipsam labore."),ie(),se(7,"p"),ge(8,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Officiis veniam dolores beatae fugit libero reprehenderit laborum temporibus eaque in voluptas. Laborum obcaecati nostrum et impedit, recusandae minus pariatur ipsam labore."),ie(),se(9,"p"),ge(10,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Officiis veniam dolores beatae fugit libero reprehenderit laborum temporibus eaque in voluptas. Laborum obcaecati nostrum et impedit, recusandae minus pariatur ipsam labore."),ie(),se(11,"div",4)(12,"button",5),ge(13,"Back to Home"),ie()()()()())},dependencies:[Js]})}return t})()},{path:"term-conditions",component:(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bn({type:t,selectors:[["app-terms-and-condition"]],decls:14,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-center"],[1,"p-5","mt-4","mb-5","bg-secondary-theme","text-theme-primary"],[1,"text-button"],["routerLink","/",1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(r,i){1&r&&(se(0,"section",0)(1,"div",1)(2,"h1",2),ge(3,"Term & Conditions"),ie(),se(4,"div",3)(5,"p"),ge(6,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Officiis veniam dolores beatae fugit libero reprehenderit laborum temporibus eaque in voluptas. Laborum obcaecati nostrum et impedit, recusandae minus pariatur ipsam labore."),ie(),se(7,"p"),ge(8,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Officiis veniam dolores beatae fugit libero reprehenderit laborum temporibus eaque in voluptas. Laborum obcaecati nostrum et impedit, recusandae minus pariatur ipsam labore."),ie(),se(9,"p"),ge(10,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Officiis veniam dolores beatae fugit libero reprehenderit laborum temporibus eaque in voluptas. Laborum obcaecati nostrum et impedit, recusandae minus pariatur ipsam labore."),ie(),se(11,"div",4)(12,"button",5),ge(13,"Back to Home"),ie()()()()())},dependencies:[Js]})}return t})()},{path:"contact",component:(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bn({type:t,selectors:[["app-contact-us"]],decls:44,vars:0,consts:[[1,"container"],[1,"bg"],["src","../../../assets/young-freelancer-boy-with-working-laptop-personal-home-desk-working-from-home_824539-252.jpg","alt",""],[1,"form"],[1,"info"],["src","../../../assets/gmail.jpeg","alt","gmail"],[1,"frm"],["action","back.php","method","post","target","_blank"],["for","text"],["type","text","placeholder","Enter First Name"],["type","text","placeholder","Enter Last Name"],["type","text","placeholder","Enter Email"],["type","textarea"],["routerLink","/"]],template:function(r,i){1&r&&(se(0,"main")(1,"div",0)(2,"div",1),Tt(3,"img",2),ie(),se(4,"div",3)(5,"div",4),Tt(6,"img",5),se(7,"h2"),ge(8,"Contact Me"),ie(),se(9,"h3"),ge(10,"We would love"),ie(),se(11,"h3"),ge(12," to hear form "),ie(),se(13,"h3"),ge(14,"you!"),ie()(),se(15,"div",6)(16,"form",7)(17,"label",8),ge(18,"First Name: "),ie(),Tt(19,"br")(20,"input",9)(21,"br")(22,"br"),se(23,"label",8),ge(24,"Last Name: "),ie(),Tt(25,"br")(26,"input",10)(27,"br")(28,"br"),se(29,"label",8),ge(30,"Email: "),ie(),Tt(31,"br")(32,"input",11)(33,"br")(34,"br"),se(35,"label",8),ge(36,"Comment:"),ie(),Tt(37,"input",12)(38,"br")(39,"br"),se(40,"button"),ge(41,"SUBMIT"),ie(),se(42,"button",13),ge(43,"Back to Home"),ie()()()()()())},dependencies:[Js,ly,ty,$l],styles:[".bg[_ngcontent-%COMP%]{width:83%;margin-top:50px}.bg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:18%}.form[_ngcontent-%COMP%]{display:flex;margin:5% 15% 10%;background-color:#d3d5d8;padding:5%;width:80%}.info[_ngcontent-%COMP%]{background-color:#e18e19;border-right:15px solid #fff;color:#fff;padding:10px}.info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px}.frm[_ngcontent-%COMP%]{width:80%;border-right:15px solid #102534;border-top:15px solid #102534;padding-top:10px}.frm[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:20px}.frm[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:7px;margin-left:20px;width:450px;border-top:2px solid #e18e19}.frm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:20px;padding:10px 30px;background-color:#10293d;color:#fff;border:2px solid white}.frm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.6}"]})}return t})()}];let yJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=wr({type:t});static#n=this.\u0275inj=vr({imports:[pU.forRoot(_J),pU]})}return t})(),vJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bn({type:t,selectors:[["app-header"]],decls:4,vars:0,consts:[[1,"navbar","navbar-expand-lg","fixed-top","bg-white"],[1,"container","justify-content-center"],["href","#","routerLink","/",1,"site-logo","text-red"]],template:function(r,i){1&r&&(se(0,"header",0)(1,"div",1)(2,"a",2),ge(3,"Blogging Website"),ie()()())},dependencies:[Js],styles:["header[_ngcontent-%COMP%]{height:100px}.site-logo[_ngcontent-%COMP%]{padding:5px 20px;border-radius:20px;background-color:var(--secondary-color);color:var(--primary-color);font-size:2em}"]})}return t})(),IJ=(()=>{class t{constructor(n){this.afs=n}loadData(){return this.afs.collection("categories").snapshotChanges().pipe(Te(n=>n.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,data:i}})))}static#e=this.\u0275fac=function(r){return new(r||t)(oe($v))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const EJ=function(t,e){return["/category",t,e]};function wJ(t,e){if(1&t&&(se(0,"ul",4)(1,"li",5)(2,"a",6),ge(3),ie()()()),2&t){const n=e.$implicit;dt(2),rn("routerLink",bM(2,EJ,n.data.category,n.id)),dt(1),vf(n.data.category)}}let TJ=(()=>{class t{constructor(n){this.categoryService=n}ngOnInit(){this.categoryService.loadData().subscribe(n=>{this.categoryArray=n})}static#e=this.\u0275fac=function(r){return new(r||t)(te(IJ))};static#t=this.\u0275cmp=bn({type:t,selectors:[["app-category-navbar"]],decls:4,vars:1,consts:[[1,"navbar","navbar-expand-lg","fixed-top"],[1,"container"],[1,"collapse","navbar-collapse","justify-content-center"],["class","navbar-nav",4,"ngFor","ngForOf"],[1,"navbar-nav"],[1,"nav-item","ml-3"],[1,"nav-link",3,"routerLink"]],template:function(r,i){1&r&&(se(0,"nav",0)(1,"div",1)(2,"div",2),gi(3,wJ,4,5,"ul",3),ie()()()),2&r&&(dt(3),rn("ngForOf",i.categoryArray))},dependencies:[xf,Js],styles:["nav[_ngcontent-%COMP%]{margin-top:100px;height:50px;background-color:var(--navbar-footer-color)}.nav-link[_ngcontent-%COMP%]{text-transform:uppercase}"]})}return t})(),CJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bn({type:t,selectors:[["app-footer"]],decls:22,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-12","text-center"],[1,"site-logo"],[1,"nav","justify-content-center"],[1,"nav-item"],["href","",1,"nav-link"],["href","","routerLink","about",1,"nav-link"],["href","","routerLink","term-conditions",1,"nav-link"],["href","","routerLink","contact",1,"nav-link"],[1,"mb-2","mt-2"]],template:function(r,i){1&r&&(se(0,"footer")(1,"div",0)(2,"div",1),Tt(3,"div",2),se(4,"div",3),ge(5,"ANG-BLOG"),ie(),se(6,"div")(7,"ul",4)(8,"li",5)(9,"a",6),ge(10,"Home"),ie()(),se(11,"li",5)(12,"a",7),ge(13,"About"),ie()(),se(14,"li",5)(15,"a",8),ge(16,"Terms & Conditions"),ie()(),se(17,"li",5)(18,"a",9),ge(19,"Contact"),ie()()()(),se(20,"p",10),ge(21,"copyright @ 2023 Angular Blogsite"),ie()()()())},dependencies:[Js],styles:["footer[_ngcontent-%COMP%]{height:130px;padding:15px;background-color:var(--navbar-footer-color)}.site-logo[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}.nav-link[_ngcontent-%COMP%]{color:var(--primary-color)}"]})}return t})(),DJ=(()=>{class t{constructor(n){this.afs=n}addSubs(n){this.afs.collection("subscribers").add(n).then(()=>{console.log("Subscriber Saved Sucessfully")})}checkSubs(n){return this.afs.collection("subsribesr",r=>r.where("email","==",n)).get()}static#e=this.\u0275fac=function(r){return new(r||t)(oe($v))};static#t=this.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function AJ(t,e){1&t&&(se(0,"div",16),ge(1," Email Already use! "),ie())}function bJ(t,e){1&t&&(se(0,"div",17),ge(1," Thank You for Subscribing "),ie())}function SJ(t,e){1&t&&(se(0,"div",18),ge(1," Name is Required "),ie())}function RJ(t,e){1&t&&(se(0,"div",18),ge(1," Email Cannot be Empty "),ie())}const mU=function(t){return{"is-invalid":t}};let PJ=(()=>{class t{constructor(n){this.subService=n,this.isEmailError=!1,this.isSubscribed=!1}ngOnInit(){}onSubmit(n){const r={name:n.name,email:n.email};this.subService.checkSubs(r.email).subscribe(i=>{console.log(i),i.empty?(this.subService.addSubs(r),this.isSubscribed=!0):this.isEmailError=!0})}static#e=this.\u0275fac=function(r){return new(r||t)(te(DJ))};static#t=this.\u0275cmp=bn({type:t,selectors:[["app-subscription-form"]],decls:22,vars:11,consts:[[1,"card","shadow-effect"],[1,"card-body"],[1,"text-center","mt-3","mb-5"],[1,"m-auto","subs-text"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"form-inline","d-flex","mb-5","mt-5",3,"ngSubmit"],["subForm","ngForm"],[1,"form-group","col-md-5","ps-5","pe-5"],["type","text","placeholder","Enter Your Name","name","name","ngModel","","required","",1,"form-control","shadow-effect",3,"ngClass"],["Name","ngModel"],["class","alert alert-danger",4,"ngIf"],["type","email","placeholder","Email Address","name","email","ngModel","","required","","email","",1,"form-control","shadow-effect",3,"ngClass"],["Email","ngModel"],[1,"col-md-2"],[1,"btn","btn-info","btn-block","btn-theme",3,"disabled"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-info","mt-3"],[1,"alert","alert-danger"]],template:function(r,i){if(1&r){const s=function KR(){return Y()}();se(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),ge(4,"SUBSCRIPTION FORM"),ie(),se(5,"P",3),ge(6,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Expedita, delectus."),ie(),gi(7,AJ,2,0,"div",4),gi(8,bJ,2,0,"div",5),se(9,"form",6,7),mi("ngSubmit",function(){!function om(t){return Pe.lFrame.contextLView=t,t[un]}(s);const a=mf(10);return function am(t){return Pe.lFrame.contextLView=null,t}(i.onSubmit(a.value))}),se(11,"div",8),Tt(12,"input",9,10),gi(14,SJ,2,0,"div",11),ie(),se(15,"div",8),Tt(16,"input",12,13),gi(18,RJ,2,0,"div",11),ie(),se(19,"div",14)(20,"button",15),ge(21,"SUBSCRIBE"),ie()()()()()()}if(2&r){const s=mf(10),o=mf(13),a=mf(17);dt(7),rn("ngIf",i.isEmailError),dt(1),rn("ngIf",i.isSubscribed),dt(4),rn("ngClass",D_(7,mU,o.touched&&o.invalid)),dt(2),rn("ngIf",o.touched&&o.invalid),dt(2),rn("ngClass",D_(9,mU,a.touched&&a.invalid)),dt(2),rn("ngIf",a.touched&&a.invalid),dt(2),rn("disabled",s.invalid)}},dependencies:[cN,W_,ly,J_,d1,ty,dy,sC,XT,$l],styles:[".card[_ngcontent-%COMP%]{background-color:var(--secondary-color)}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%]{height:60px;padding-left:20px;font-size:13px;width:80%}.btn-sub[_ngcontent-%COMP%]{height:58px;padding:0 20px;border:none;font-size:13px;color:#fff;background-color:var(--primary-color)}.subs-text[_ngcontent-%COMP%]{width:500px}"]})}return t})(),MJ=(()=>{class t{constructor(){this.title="Title 1"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bn({type:t,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"app-body"],[1,"container","mt-5","mb-5"],[1,"row","justify-content-center"]],template:function(r,i){1&r&&(Tt(0,"app-header")(1,"app-category-navbar"),se(2,"div",0),Tt(3,"router-outlet"),ie(),se(4,"div",1)(5,"div",2),Tt(6,"app-subscription-form"),ie()(),Tt(7,"app-footer"))},dependencies:[NA,vJ,TJ,CJ,PJ],styles:[".app-body[_ngcontent-%COMP%]{min-height:35vh;margin-top:150px}"]})}return t})(),xJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=wr({type:t,bootstrap:[MJ]});static#n=this.\u0275inj=vr({imports:[w9,yJ,J5.initializeApp(LK_firebaseConfig),FK,x5]})}return t})();I9().bootstrapModule(xJ).catch(t=>console.error(t))},106:(Wi,xn,Be)=>{Be.d(xn,{Z:()=>On});var I=Be(58),xe=Be(537),U=Be(534),Ne=Be(879);class ct{constructor(Ve,ze){this._delegate=Ve,this.firebase=ze,(0,U._addComponent)(Ve,new xe.wA("app-compat",()=>this,"PUBLIC")),this.container=Ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this._delegate.automaticDataCollectionEnabled=Ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ve=>{this._delegate.checkDestroyed(),Ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(Ve,ze=U._DEFAULT_ENTRY_NAME){var kn;this._delegate.checkDestroyed();const Vn=this._delegate.container.getProvider(Ve);return!Vn.isInitialized()&&"EXPLICIT"===(null===(kn=Vn.getComponent())||void 0===kn?void 0:kn.instantiationMode)&&Vn.initialize(),Vn.getImmediate({identifier:ze})}_removeServiceInstance(Ve,ze=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ve).clearInstance(ze)}_addComponent(Ve){(0,U._addComponent)(this._delegate,Ve)}_addOrOverwriteComponent(Ve){(0,U._addOrOverwriteComponent)(this._delegate,Ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Xt=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function Je(){const pt=function Nn(pt){const Ve={},ze={__esModule:!0,initializeApp:function Vt(qe,Tn={}){const Z=U.initializeApp(qe,Tn);if((0,I.r3)(Ve,Z.name))return Ve[Z.name];const qt=new pt(Z,ze);return Ve[Z.name]=qt,qt},app:Vn,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function Rt(qe){const Tn=qe.name,Z=Tn.replace("-compat","");if(U._registerComponent(qe)&&"PUBLIC"===qe.type){const qt=(Ft=Vn())=>{if("function"!=typeof Ft[Z])throw Xt.create("invalid-app-argument",{appName:Tn});return Ft[Z]()};void 0!==qe.serviceProps&&(0,I.ZB)(qt,qe.serviceProps),ze[Z]=qt,pt.prototype[Z]=function(...Ft){return this._getService.bind(this,Tn).apply(this,qe.multipleInstances?Ft:[])}}return"PUBLIC"===qe.type?ze[Z]:null},removeApp:function kn(qe){delete Ve[qe]},useAsService:function pr(qe,Tn){return"serverAuth"===Tn?null:Tn},modularAPIs:U}};function Vn(qe){if(!(0,I.r3)(Ve,qe=qe||U._DEFAULT_ENTRY_NAME))throw Xt.create("no-app",{appName:qe});return Ve[qe]}return ze.default=ze,Object.defineProperty(ze,"apps",{get:function gt(){return Object.keys(Ve).map(qe=>Ve[qe])}}),Vn.App=pt,ze}(ct);return pt.INTERNAL=Object.assign(Object.assign({},pt.INTERNAL),{createFirebaseNamespace:Je,extendNamespace:function Ve(ze){(0,I.ZB)(pt,ze)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),pt}(),re=new Ne.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const pt=self.firebase.SDK_VERSION;pt&&pt.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const On=K;!function lt(pt){(0,U.registerVersion)("@firebase/app-compat","0.2.24",pt)}()},534:(Wi,xn,Be)=>{Be.r(xn),Be.d(xn,{FirebaseError:()=>Ne.ZR,SDK_VERSION:()=>gs,_DEFAULT_ENTRY_NAME:()=>ai,_addComponent:()=>ps,_addOrOverwriteComponent:()=>Qn,_apps:()=>mr,_clearComponents:()=>Dn,_components:()=>Ki,_getProvider:()=>Lt,_registerComponent:()=>eo,_removeServiceInstance:()=>ui,deleteApp:()=>ir,getApp:()=>ms,getApps:()=>Uo,initializeApp:()=>Lo,onLog:()=>Bo,registerVersion:()=>_s,setLogLevel:()=>mc});var I=Be(861),xe=Be(537),U=Be(879),Ne=Be(58);const ct=(N,b)=>b.some(X=>N instanceof X);let zt,Xt;const K=new WeakMap,re=new WeakMap,Ce=new WeakMap,Qe=new WeakMap,lt=new WeakMap;let Ve={get(N,b,X){if(N instanceof IDBTransaction){if("done"===b)return re.get(N);if("objectStoreNames"===b)return N.objectStoreNames||Ce.get(N);if("store"===b)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return Vt(N[b])},set:(N,b,X)=>(N[b]=X,!0),has:(N,b)=>N instanceof IDBTransaction&&("done"===b||"store"===b)||b in N};function Vn(N){return"function"==typeof N?function kn(N){return N!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Je(){return Xt||(Xt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(N)?function(...b){return N.apply(gt(this),b),Vt(K.get(this))}:function(...b){return Vt(N.apply(gt(this),b))}:function(b,...X){const Ie=N.call(gt(this),b,...X);return Ce.set(Ie,b.sort?b.sort():[b]),Vt(Ie)}}(N):(N instanceof IDBTransaction&&function pt(N){if(re.has(N))return;const b=new Promise((X,Ie)=>{const Fe=()=>{N.removeEventListener("complete",Xe),N.removeEventListener("error",B),N.removeEventListener("abort",B)},Xe=()=>{X(),Fe()},B=()=>{Ie(N.error||new DOMException("AbortError","AbortError")),Fe()};N.addEventListener("complete",Xe),N.addEventListener("error",B),N.addEventListener("abort",B)});re.set(N,b)}(N),ct(N,function Nn(){return zt||(zt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(N,Ve):N)}function Vt(N){if(N instanceof IDBRequest)return function On(N){const b=new Promise((X,Ie)=>{const Fe=()=>{N.removeEventListener("success",Xe),N.removeEventListener("error",B)},Xe=()=>{X(Vt(N.result)),Fe()},B=()=>{Ie(N.error),Fe()};N.addEventListener("success",Xe),N.addEventListener("error",B)});return b.then(X=>{X instanceof IDBCursor&&K.set(X,N)}).catch(()=>{}),lt.set(b,N),b}(N);if(Qe.has(N))return Qe.get(N);const b=Vn(N);return b!==N&&(Qe.set(N,b),lt.set(b,N)),b}const gt=N=>lt.get(N),qe=["get","getKey","getAll","getAllKeys","count"],Tn=["put","add","delete","clear"],Z=new Map;function qt(N,b){if(!(N instanceof IDBDatabase)||b in N||"string"!=typeof b)return;if(Z.get(b))return Z.get(b);const X=b.replace(/FromIndex$/,""),Ie=b!==X,Fe=Tn.includes(X);if(!(X in(Ie?IDBIndex:IDBObjectStore).prototype)||!Fe&&!qe.includes(X))return;const Xe=function(){var B=(0,I.Z)(function*(en,...Ee){const Ye=this.transaction(en,Fe?"readwrite":"readonly");let $o=Ye.store;return Ie&&($o=$o.index(Ee.shift())),(yield Promise.all([$o[X](...Ee),Fe&&Ye.done]))[0]});return function(Ee){return B.apply(this,arguments)}}();return Z.set(b,Xe),Xe}!function ze(N){Ve=N(Ve)}(N=>({...N,get:(b,X,Ie)=>qt(b,X)||N.get(b,X,Ie),has:(b,X)=>!!qt(b,X)||N.has(b,X)}));class Ft{constructor(b){this.container=b}getPlatformInfoString(){return this.container.getProviders().map(X=>{if(function mn(N){const b=N.getComponent();return"VERSION"===b?.type}(X)){const Ie=X.getImmediate();return`${Ie.library}/${Ie.version}`}return null}).filter(X=>X).join(" ")}}const wi="@firebase/app",st=new U.Yd("@firebase/app"),ai="[DEFAULT]",Ga={[wi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mr=new Map,Ki=new Map;function ps(N,b){try{N.container.addComponent(b)}catch(X){st.debug(`Component ${b.name} failed to register with FirebaseApp ${N.name}`,X)}}function Qn(N,b){N.container.addOrOverwriteComponent(b)}function eo(N){const b=N.name;if(Ki.has(b))return st.debug(`There were multiple attempts to register component ${b}.`),!1;Ki.set(b,N);for(const X of mr.values())ps(X,N);return!0}function Lt(N,b){const X=N.container.getProvider("heartbeat").getImmediate({optional:!0});return X&&X.triggerHeartbeat(),N.container.getProvider(b)}function ui(N,b,X=ai){Lt(N,b).clearInstance(X)}function Dn(){Ki.clear()}const Qr=new Ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Yr{constructor(b,X,Ie){this._isDeleted=!1,this._options=Object.assign({},b),this._config=Object.assign({},X),this._name=X.name,this._automaticDataCollectionEnabled=X.automaticDataCollectionEnabled,this._container=Ie,this.container.addComponent(new xe.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(b){this.checkDestroyed(),this._automaticDataCollectionEnabled=b}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(b){this._isDeleted=b}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}const gs="10.7.0";function Lo(N,b={}){let X=N;"object"!=typeof b&&(b={name:b});const Ie=Object.assign({name:ai,automaticDataCollectionEnabled:!1},b),Fe=Ie.name;if("string"!=typeof Fe||!Fe)throw Qr.create("bad-app-name",{appName:String(Fe)});if(X||(X=(0,Ne.aH)()),!X)throw Qr.create("no-options");const Xe=mr.get(Fe);if(Xe){if((0,Ne.vZ)(X,Xe.options)&&(0,Ne.vZ)(Ie,Xe.config))return Xe;throw Qr.create("duplicate-app",{appName:Fe})}const B=new xe.H0(Fe);for(const Ee of Ki.values())B.addComponent(Ee);const en=new Yr(X,Ie,B);return mr.set(Fe,en),en}function ms(N=ai){const b=mr.get(N);if(!b&&N===ai&&(0,Ne.aH)())return Lo();if(!b)throw Qr.create("no-app",{appName:N});return b}function Uo(){return Array.from(mr.values())}function ir(N){return _r.apply(this,arguments)}function _r(){return(_r=(0,I.Z)(function*(N){const b=N.name;mr.has(b)&&(mr.delete(b),yield Promise.all(N.container.getProviders().map(X=>X.delete())),N.isDeleted=!0)})).apply(this,arguments)}function _s(N,b,X){var Ie;let Fe=null!==(Ie=Ga[N])&&void 0!==Ie?Ie:N;X&&(Fe+=`-${X}`);const Xe=Fe.match(/\s|\//),B=b.match(/\s|\//);if(Xe||B){const en=[`Unable to register library "${Fe}" with version "${b}":`];return Xe&&en.push(`library name "${Fe}" contains illegal characters (whitespace or "/")`),Xe&&B&&en.push("and"),B&&en.push(`version name "${b}" contains illegal characters (whitespace or "/")`),void st.warn(en.join(" "))}eo(new xe.wA(`${Fe}-version`,()=>({library:Fe,version:b}),"VERSION"))}function Bo(N,b){if(null!==N&&"function"!=typeof N)throw Qr.create("invalid-log-argument");(0,U.Am)(N,b)}function mc(N){(0,U.Ub)(N)}const Wa="firebase-heartbeat-database",jo=1,D="firebase-heartbeat-store";let T=null;function A(){return T||(T=function Rt(N,b,{blocked:X,upgrade:Ie,blocking:Fe,terminated:Xe}={}){const B=indexedDB.open(N,b),en=Vt(B);return Ie&&B.addEventListener("upgradeneeded",Ee=>{Ie(Vt(B.result),Ee.oldVersion,Ee.newVersion,Vt(B.transaction),Ee)}),X&&B.addEventListener("blocked",Ee=>X(Ee.oldVersion,Ee.newVersion,Ee)),en.then(Ee=>{Xe&&Ee.addEventListener("close",()=>Xe()),Fe&&Ee.addEventListener("versionchange",Ye=>Fe(Ye.oldVersion,Ye.newVersion,Ye))}).catch(()=>{}),en}(Wa,jo,{upgrade:(N,b)=>{0===b&&N.createObjectStore(D)}}).catch(N=>{throw Qr.create("idb-open",{originalErrorMessage:N.message})})),T}function M(){return(M=(0,I.Z)(function*(N){try{return yield(yield A()).transaction(D).objectStore(D).get(Ge(N))}catch(b){if(b instanceof Ne.ZR)st.warn(b.message);else{const X=Qr.create("idb-get",{originalErrorMessage:b?.message});st.warn(X.message)}}})).apply(this,arguments)}function G(N,b){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,I.Z)(function*(N,b){try{const Ie=(yield A()).transaction(D,"readwrite");yield Ie.objectStore(D).put(b,Ge(N)),yield Ie.done}catch(X){if(X instanceof Ne.ZR)st.warn(X.message);else{const Ie=Qr.create("idb-set",{originalErrorMessage:X?.message});st.warn(Ie.message)}}})).apply(this,arguments)}function Ge(N){return`${N.name}!${N.options.appId}`}class An{constructor(b){this.container=b,this._heartbeatsCache=null;const X=this.container.getProvider("app").getImmediate();this._storage=new Ct(X),this._heartbeatsCachePromise=this._storage.read().then(Ie=>(this._heartbeatsCache=Ie,Ie))}triggerHeartbeat(){var b=this;return(0,I.Z)(function*(){var X,Ie;const Xe=b.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),B=ve();if((null!=(null===(X=b._heartbeatsCache)||void 0===X?void 0:X.heartbeats)||(b._heartbeatsCache=yield b._heartbeatsCachePromise,null!=(null===(Ie=b._heartbeatsCache)||void 0===Ie?void 0:Ie.heartbeats)))&&b._heartbeatsCache.lastSentHeartbeatDate!==B&&!b._heartbeatsCache.heartbeats.some(en=>en.date===B))return b._heartbeatsCache.heartbeats.push({date:B,agent:Xe}),b._heartbeatsCache.heartbeats=b._heartbeatsCache.heartbeats.filter(en=>{const Ee=new Date(en.date).valueOf();return Date.now()-Ee<=2592e6}),b._storage.overwrite(b._heartbeatsCache)})()}getHeartbeatsHeader(){var b=this;return(0,I.Z)(function*(){var X;if(null===b._heartbeatsCache&&(yield b._heartbeatsCachePromise),null==(null===(X=b._heartbeatsCache)||void 0===X?void 0:X.heartbeats)||0===b._heartbeatsCache.heartbeats.length)return"";const Ie=ve(),{heartbeatsToSend:Fe,unsentEntries:Xe}=function Fn(N,b=1024){const X=[];let Ie=N.slice();for(const Fe of N){const Xe=X.find(B=>B.agent===Fe.agent);if(Xe){if(Xe.dates.push(Fe.date),Di(X)>b){Xe.dates.pop();break}}else if(X.push({agent:Fe.agent,dates:[Fe.date]}),Di(X)>b){X.pop();break}Ie=Ie.slice(1)}return{heartbeatsToSend:X,unsentEntries:Ie}}(b._heartbeatsCache.heartbeats),B=(0,Ne.L)(JSON.stringify({version:2,heartbeats:Fe}));return b._heartbeatsCache.lastSentHeartbeatDate=Ie,Xe.length>0?(b._heartbeatsCache.heartbeats=Xe,yield b._storage.overwrite(b._heartbeatsCache)):(b._heartbeatsCache.heartbeats=[],b._storage.overwrite(b._heartbeatsCache)),B})()}}function ve(){return(new Date).toISOString().substring(0,10)}class Ct{constructor(b){this.app=b,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,Ne.hl)()&&(0,Ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var b=this;return(0,I.Z)(function*(){if(yield b._canUseIndexedDBPromise){const Ie=yield function q(N){return M.apply(this,arguments)}(b.app);return Ie?.heartbeats?Ie:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(b){var X=this;return(0,I.Z)(function*(){var Ie;if(yield X._canUseIndexedDBPromise){const Xe=yield X.read();return G(X.app,{lastSentHeartbeatDate:null!==(Ie=b.lastSentHeartbeatDate)&&void 0!==Ie?Ie:Xe.lastSentHeartbeatDate,heartbeats:b.heartbeats})}})()}add(b){var X=this;return(0,I.Z)(function*(){var Ie;if(yield X._canUseIndexedDBPromise){const Xe=yield X.read();return G(X.app,{lastSentHeartbeatDate:null!==(Ie=b.lastSentHeartbeatDate)&&void 0!==Ie?Ie:Xe.lastSentHeartbeatDate,heartbeats:[...Xe.heartbeats,...b.heartbeats]})}})()}}function Di(N){return(0,Ne.L)(JSON.stringify({version:2,heartbeats:N})).length}!function _c(N){eo(new xe.wA("platform-logger",b=>new Ft(b),"PRIVATE")),eo(new xe.wA("heartbeat",b=>new An(b),"PRIVATE")),_s(wi,"0.9.24",N),_s(wi,"0.9.24","esm2017"),_s("fire-js","")}("")},537:(Wi,xn,Be)=>{Be.d(xn,{H0:()=>Nn,wA:()=>U});var I=Be(861),xe=Be(58);class U{constructor(K,re,Ce){this.name=K,this.instanceFactory=re,this.type=Ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const Ne="[DEFAULT]";class ct{constructor(K,re){this.name=K,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const re=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(re)){const Ce=new xe.BH;if(this.instancesDeferred.set(re,Ce),this.isInitialized(re)||this.shouldAutoInitialize())try{const Qe=this.getOrInitializeService({instanceIdentifier:re});Qe&&Ce.resolve(Qe)}catch{}}return this.instancesDeferred.get(re).promise}getImmediate(K){var re;const Ce=this.normalizeInstanceIdentifier(K?.identifier),Qe=null!==(re=K?.optional)&&void 0!==re&&re;if(!this.isInitialized(Ce)&&!this.shouldAutoInitialize()){if(Qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ce})}catch(lt){if(Qe)return null;throw lt}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function Xt(Je){return"EAGER"===Je.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:Ne})}catch{}for(const[re,Ce]of this.instancesDeferred.entries()){const Qe=this.normalizeInstanceIdentifier(re);try{const lt=this.getOrInitializeService({instanceIdentifier:Qe});Ce.resolve(lt)}catch{}}}}clearInstance(K=Ne){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,I.Z)(function*(){const re=Array.from(K.instances.values());yield Promise.all([...re.filter(Ce=>"INTERNAL"in Ce).map(Ce=>Ce.INTERNAL.delete()),...re.filter(Ce=>"_delete"in Ce).map(Ce=>Ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=Ne){return this.instances.has(K)}getOptions(K=Ne){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:re={}}=K,Ce=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(Ce))throw Error(`${this.name}(${Ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Qe=this.getOrInitializeService({instanceIdentifier:Ce,options:re});for(const[lt,On]of this.instancesDeferred.entries())Ce===this.normalizeInstanceIdentifier(lt)&&On.resolve(Qe);return Qe}onInit(K,re){var Ce;const Qe=this.normalizeInstanceIdentifier(re),lt=null!==(Ce=this.onInitCallbacks.get(Qe))&&void 0!==Ce?Ce:new Set;lt.add(K),this.onInitCallbacks.set(Qe,lt);const On=this.instances.get(Qe);return On&&K(On,Qe),()=>{lt.delete(K)}}invokeOnInitCallbacks(K,re){const Ce=this.onInitCallbacks.get(re);if(Ce)for(const Qe of Ce)try{Qe(K,re)}catch{}}getOrInitializeService({instanceIdentifier:K,options:re={}}){let Ce=this.instances.get(K);if(!Ce&&this.component&&(Ce=this.component.instanceFactory(this.container,{instanceIdentifier:(Je=K,Je===Ne?void 0:Je),options:re}),this.instances.set(K,Ce),this.instancesOptions.set(K,re),this.invokeOnInitCallbacks(Ce,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,Ce)}catch{}var Je;return Ce||null}normalizeInstanceIdentifier(K=Ne){return this.component?this.component.multipleInstances?K:Ne:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Nn{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const re=this.getProvider(K.name);if(re.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);re.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const re=new ct(K,this);return this.providers.set(K,re),re}getProviders(){return Array.from(this.providers.values())}}},879:(Wi,xn,Be)=>{Be.d(xn,{Am:()=>Je,Ub:()=>Nn,Yd:()=>Xt,in:()=>xe});const I=[];var xe=function(K){return K[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",K}(xe||{});const U={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},Ne=xe.INFO,ct={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},zt=(K,re,...Ce)=>{if(re<K.logLevel)return;const Qe=(new Date).toISOString(),lt=ct[re];if(!lt)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[lt](`[${Qe}]  ${K.name}:`,...Ce)};class Xt{constructor(re){this.name=re,this._logLevel=Ne,this._logHandler=zt,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in xe))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?U[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...re),this._logHandler(this,xe.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...re),this._logHandler(this,xe.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...re),this._logHandler(this,xe.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...re),this._logHandler(this,xe.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...re),this._logHandler(this,xe.ERROR,...re)}}function Nn(K){I.forEach(re=>{re.setLogLevel(K)})}function Je(K,re){for(const Ce of I){let Qe=null;re&&re.level&&(Qe=U[re.level]),Ce.userLogHandler=null===K?null:(lt,On,...pt)=>{const Ve=pt.map(ze=>{if(null==ze)return null;if("string"==typeof ze)return ze;if("number"==typeof ze||"boolean"==typeof ze)return ze.toString();if(ze instanceof Error)return ze.message;try{return JSON.stringify(ze)}catch{return null}}).filter(ze=>ze).join(" ");On>=(Qe??lt.logLevel)&&K({level:xe[On].toLowerCase(),message:Ve,args:pt,type:lt.name})}}}},377:(Wi,xn,Be)=>{Be.r(xn);var I=Be(861),xe=Be(106),U=Be(58),Ne=Be(534),ct=Be(879),zt=Be(582),Xt=Be(537);const Je={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const On=function Qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},pt=function lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ve=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),kn=new ct.Yd("@firebase/auth");function Vt(h,...c){kn.logLevel<=ct.in.ERROR&&kn.error(`Auth (${Ne.SDK_VERSION}): ${h}`,...c)}function gt(h,...c){throw Tn(h,...c)}function Rt(h,...c){return Tn(h,...c)}function pr(h,c,l){const f=Object.assign(Object.assign({},pt()),{[c]:l});return new U.LL("auth","Firebase",f).create(c,{appName:h.name})}function qe(h,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&gt(h,"argument-error"),pr(h,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tn(h,...c){if("string"!=typeof h){const l=c[0],f=[...c.slice(1)];return f[0]&&(f[0].appName=h.name),h._errorFactory.create(l,...f)}return Ve.create(h,...c)}function Z(h,c,...l){if(!h)throw Tn(c,...l)}function qt(h){const c="INTERNAL ASSERTION FAILED: "+h;throw Vt(c),new Error(c)}function Ft(h,c){h||qt(c)}function mn(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function wi(){return"http:"===Ti()||"https:"===Ti()}function Ti(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class Ci{constructor(c,l){this.shortDelay=c,this.longDelay=l,Ft(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function st(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(wi()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function k(h,c){Ft(h.emulator,"Emulator should always be set here");const{url:l}=h.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class F{static initialize(c,l,f){this.fetchImpl=c,l&&(this.headersImpl=l),f&&(this.responseImpl=f)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void qt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void qt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void qt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},H=new Ci(3e4,6e4);function Q(h,c){return h.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:h.tenantId}):c}function L(h,c,l,f){return pe.apply(this,arguments)}function pe(){return(pe=(0,I.Z)(function*(h,c,l,f,m={}){return rt(h,m,(0,I.Z)(function*(){let y={},w={};f&&("GET"===c?w=f:y={body:JSON.stringify(f)});const P=(0,U.xO)(Object.assign({key:h.config.apiKey},w)).slice(1),z=yield h._getAdditionalHeaders();return z["Content-Type"]="application/json",h.languageCode&&(z["X-Firebase-Locale"]=h.languageCode),F.fetch()(Gt(h,h.config.apiHost,l,P),Object.assign({method:c,headers:z,referrerPolicy:"no-referrer"},y))}))})).apply(this,arguments)}function rt(h,c,l){return Te.apply(this,arguments)}function Te(){return(Te=(0,I.Z)(function*(h,c,l){h._canInitEmulator=!1;const f=Object.assign(Object.assign({},$),c);try{const m=new Kn(h),y=yield Promise.race([l(),m.promise]);m.clearNetworkTimeout();const w=yield y.json();if("needConfirmation"in w)throw Cn(h,"account-exists-with-different-credential",w);if(y.ok&&!("errorMessage"in w))return w;{const P=y.ok?w.errorMessage:w.error.message,[z,ue]=P.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===z)throw Cn(h,"credential-already-in-use",w);if("EMAIL_EXISTS"===z)throw Cn(h,"email-already-in-use",w);if("USER_DISABLED"===z)throw Cn(h,"user-disabled",w);const _e=f[z]||z.toLowerCase().replace(/[_\s]+/g,"-");if(ue)throw pr(h,_e,ue);gt(h,_e)}}catch(m){if(m instanceof U.ZR)throw m;gt(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function De(h,c,l,f){return at.apply(this,arguments)}function at(){return(at=(0,I.Z)(function*(h,c,l,f,m={}){const y=yield L(h,c,l,f,m);return"mfaPendingCredential"in y&&gt(h,"multi-factor-auth-required",{_serverResponse:y}),y})).apply(this,arguments)}function Gt(h,c,l,f){const m=`${c}${l}?${f}`;return h.config.emulator?k(h.config,m):`${h.config.apiScheme}://${m}`}function xt(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Kn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,f)=>{this.timer=setTimeout(()=>f(Rt(this.auth,"network-request-failed")),H.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cn(h,c,l){const f={appName:h.name};l.email&&(f.email=l.email),l.phoneNumber&&(f.phoneNumber=l.phoneNumber);const m=Rt(h,c,f);return m.customData._tokenResponse=l,m}function rr(h){return void 0!==h&&void 0!==h.getResponse}function gr(h){return void 0!==h&&void 0!==h.enterprise}class xr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return xt(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Zi(){return(Zi=(0,I.Z)(function*(h){return(yield L(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _n(h,c){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,I.Z)(function*(h,c){return L(h,"GET","/v2/recaptchaConfig",Q(h,c))})).apply(this,arguments)}function ai(){return(ai=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function mr(){return(mr=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ps(){return(ps=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Qn(h){if(h)try{const c=new Date(Number(h));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function ui(){return(ui=(0,I.Z)(function*(h,c=!1){const l=(0,U.m9)(h),f=yield l.getIdToken(c),m=Fo(f);Z(m&&m.exp&&m.auth_time&&m.iat,l.auth,"internal-error");const y="object"==typeof m.firebase?m.firebase:void 0,w=y?.sign_in_provider;return{claims:m,token:f,authTime:Qn(Dn(m.auth_time)),issuedAtTime:Qn(Dn(m.iat)),expirationTime:Qn(Dn(m.exp)),signInProvider:w||null,signInSecondFactor:y?.sign_in_second_factor||null}})).apply(this,arguments)}function Dn(h){return 1e3*Number(h)}function Fo(h){const[c,l,f]=h.split(".");if(void 0===c||void 0===l||void 0===f)return Vt("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,U.tV)(l);return m?JSON.parse(m):(Vt("Failed to decode base64 JWT payload"),null)}catch(m){return Vt("Caught error parsing JWT payload as JSON",m?.toString()),null}}function Yr(h,c){return gs.apply(this,arguments)}function gs(){return(gs=(0,I.Z)(function*(h,c,l=!1){if(l)return c;try{return yield c}catch(f){throw f instanceof U.ZR&&function Lo({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(f)&&h.auth.currentUser===h&&(yield h.auth.signOut()),f}})).apply(this,arguments)}class ms{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const f=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),f}{this.errorBackoff=3e4;const m=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const f=this.getInterval(c);this.timerId=setTimeout((0,I.Z)(function*(){yield l.iteration()}),f)}iteration(){var c=this;return(0,I.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class Uo{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qn(this.lastLoginAt),this.creationTime=Qn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ir(h){return _r.apply(this,arguments)}function _r(){return _r=(0,I.Z)(function*(h){var c;const l=h.auth,f=yield h.getIdToken(),m=yield Yr(h,function Ki(h,c){return ps.apply(this,arguments)}(l,{idToken:f}));Z(m?.users.length,l,"internal-error");const y=m.users[0];h._notifyReloadListener(y);const w=null!==(c=y.providerUserInfo)&&void 0!==c&&c.length?function Wa(h){return h.map(c=>{var{providerId:l}=c,f=(0,zt._T)(c,["providerId"]);return{providerId:l,uid:f.rawId||"",displayName:f.displayName||null,email:f.email||null,phoneNumber:f.phoneNumber||null,photoURL:f.photoUrl||null}})}(y.providerUserInfo):[],P=function mc(h,c){return[...h.filter(f=>!c.some(m=>m.providerId===f.providerId)),...c]}(h.providerData,w),_e=!!h.isAnonymous&&!(h.email&&y.passwordHash||P?.length),we={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:P,metadata:new Uo(y.createdAt,y.lastLoginAt),isAnonymous:_e};Object.assign(h,we)}),_r.apply(this,arguments)}function Bo(){return(Bo=(0,I.Z)(function*(h){const c=(0,U.m9)(h);yield ir(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function D(){return(D=(0,I.Z)(function*(h,c){const l=yield rt(h,{},(0,I.Z)(function*(){const f=(0,U.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:m,apiKey:y}=h.config,w=Gt(h,m,"/v1/token",`key=${y}`),P=yield h._getAdditionalHeaders();return P["Content-Type"]="application/x-www-form-urlencoded",F.fetch()(w,{method:"POST",headers:P,body:f})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function A(){return(A=(0,I.Z)(function*(h,c){return L(h,"POST","/v2/accounts:revokeToken",Q(h,c))})).apply(this,arguments)}class q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){Z(c.idToken,"internal-error"),Z(typeof c.idToken<"u","internal-error"),Z(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Qr(h){const c=Fo(h);return Z(c,"internal-error"),Z(typeof c.exp<"u","internal-error"),Z(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}getToken(c,l=!1){var f=this;return(0,I.Z)(function*(){return Z(!f.accessToken||f.refreshToken,c,"user-token-expired"),l||!f.accessToken||f.isExpired?f.refreshToken?(yield f.refresh(c,f.refreshToken),f.accessToken):null:f.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var f=this;return(0,I.Z)(function*(){const{accessToken:m,refreshToken:y,expiresIn:w}=yield function jo(h,c){return D.apply(this,arguments)}(c,l);f.updateTokensAndExpiration(m,y,Number(w))})()}updateTokensAndExpiration(c,l,f){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*f}static fromJSON(c,l){const{refreshToken:f,accessToken:m,expirationTime:y}=l,w=new q;return f&&(Z("string"==typeof f,"internal-error",{appName:c}),w.refreshToken=f),m&&(Z("string"==typeof m,"internal-error",{appName:c}),w.accessToken=m),y&&(Z("number"==typeof y,"internal-error",{appName:c}),w.expirationTime=y),w}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new q,this.toJSON())}_performRefresh(){return qt("not implemented")}}function M(h,c){Z("string"==typeof h||typeof h>"u","internal-error",{appName:c})}class G{constructor(c){var{uid:l,auth:f,stsTokenManager:m}=c,y=(0,zt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ms(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=f,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=y.displayName||null,this.email=y.email||null,this.emailVerified=y.emailVerified||!1,this.phoneNumber=y.phoneNumber||null,this.photoURL=y.photoURL||null,this.isAnonymous=y.isAnonymous||!1,this.tenantId=y.tenantId||null,this.providerData=y.providerData?[...y.providerData]:[],this.metadata=new Uo(y.createdAt||void 0,y.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,I.Z)(function*(){const f=yield Yr(l,l.stsTokenManager.getToken(l.auth,c));return Z(f,l.auth,"internal-error"),l.accessToken!==f&&(l.accessToken=f,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),f})()}getIdTokenResult(c){return function Lt(h){return ui.apply(this,arguments)}(this,c)}reload(){return function _s(h){return Bo.apply(this,arguments)}(this)}_assign(c){this!==c&&(Z(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new G(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var f=this;return(0,I.Z)(function*(){let m=!1;c.idToken&&c.idToken!==f.stsTokenManager.accessToken&&(f.stsTokenManager.updateFromServerResponse(c),m=!0),l&&(yield ir(f)),yield f.auth._persistUserIfCurrent(f),m&&f.auth._notifyListenersIfCurrent(f)})()}delete(){var c=this;return(0,I.Z)(function*(){const l=yield c.getIdToken();return yield Yr(c,function qa(h,c){return ai.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var f,m,y,w,P,z,ue,_e;const we=null!==(f=l.displayName)&&void 0!==f?f:void 0,nn=null!==(m=l.email)&&void 0!==m?m:void 0,di=null!==(y=l.phoneNumber)&&void 0!==y?y:void 0,al=null!==(w=l.photoURL)&&void 0!==w?w:void 0,Mm=null!==(P=l.tenantId)&&void 0!==P?P:void 0,ua=null!==(z=l._redirectEventId)&&void 0!==z?z:void 0,Wh=null!==(ue=l.createdAt)&&void 0!==ue?ue:void 0,xm=null!==(_e=l.lastLoginAt)&&void 0!==_e?_e:void 0,{uid:ul,emailVerified:cE,isAnonymous:Zh,providerData:Nm,stsTokenManager:Om}=l;Z(ul&&Om,c,"internal-error");const lE=q.fromJSON(this.name,Om);Z("string"==typeof ul,c,"internal-error"),M(we,c.name),M(nn,c.name),Z("boolean"==typeof cE,c,"internal-error"),Z("boolean"==typeof Zh,c,"internal-error"),M(di,c.name),M(al,c.name),M(Mm,c.name),M(ua,c.name),M(Wh,c.name),M(xm,c.name);const Pu=new G({uid:ul,auth:c,email:nn,emailVerified:cE,displayName:we,isAnonymous:Zh,photoURL:al,phoneNumber:di,tenantId:Mm,stsTokenManager:lE,createdAt:Wh,lastLoginAt:xm});return Nm&&Array.isArray(Nm)&&(Pu.providerData=Nm.map(bb=>Object.assign({},bb))),ua&&(Pu._redirectEventId=ua),Pu}static _fromIdTokenResponse(c,l,f=!1){return(0,I.Z)(function*(){const m=new q;m.updateFromServerResponse(l);const y=new G({uid:l.localId,auth:c,stsTokenManager:m,isAnonymous:f});return yield ir(y),y})()}}const Oe=new Map;function Ge(h){Ft(h instanceof Function,"Expected a class definition");let c=Oe.get(h);return c?(Ft(c instanceof h,"Instance stored in cache mismatched with class"),c):(c=new h,Oe.set(h,c),c)}const Wt=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(l,f){var m=this;return(0,I.Z)(function*(){m.storage[l]=f})()}_get(l){var f=this;return(0,I.Z)(function*(){const m=f.storage[l];return void 0===m?null:m})()}_remove(l){var f=this;return(0,I.Z)(function*(){delete f.storage[l]})()}_addListener(l,f){}_removeListener(l,f){}}return h.type="NONE",h})();function An(h,c,l){return`firebase:${h}:${c}:${l}`}class ve{constructor(c,l,f){this.persistence=c,this.auth=l,this.userKey=f;const{config:m,name:y}=this.auth;this.fullUserKey=An(this.userKey,m.apiKey,y),this.fullPersistenceKey=An("persistence",m.apiKey,y),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,I.Z)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?G._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,I.Z)(function*(){if(l.persistence===c)return;const f=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,f?l.setCurrentUser(f):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,f="authUser"){return(0,I.Z)(function*(){if(!l.length)return new ve(Ge(Wt),c,f);const m=(yield Promise.all(l.map(function(){var ue=(0,I.Z)(function*(_e){if(yield _e._isAvailable())return _e});return function(_e){return ue.apply(this,arguments)}}()))).filter(ue=>ue);let y=m[0]||Ge(Wt);const w=An(f,c.config.apiKey,c.name);let P=null;for(const ue of l)try{const _e=yield ue._get(w);if(_e){const we=G._fromJSON(c,_e);ue!==y&&(P=we),y=ue;break}}catch{}const z=m.filter(ue=>ue._shouldAllowMigration);return y._shouldAllowMigration&&z.length?(y=z[0],P&&(yield y._set(w,P.toJSON())),yield Promise.all(l.map(function(){var ue=(0,I.Z)(function*(_e){if(_e!==y)try{yield _e._remove(w)}catch{}});return function(_e){return ue.apply(this,arguments)}}())),new ve(y,c,f)):new ve(y,c,f)})()}}function Fn(h){const c=h.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(N(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Ct(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(X(c))return"Blackberry";if(Ie(c))return"Webos";if(Di(c))return"Safari";if((c.includes("chrome/")||_c(c))&&!c.includes("edge/"))return"Chrome";if(b(c))return"Android";{const f=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===f?.length)return f[1]}return"Other"}function Ct(h=(0,U.z$)()){return/firefox\//i.test(h)}function Di(h=(0,U.z$)()){const c=h.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function _c(h=(0,U.z$)()){return/crios\//i.test(h)}function N(h=(0,U.z$)()){return/iemobile/i.test(h)}function b(h=(0,U.z$)()){return/android/i.test(h)}function X(h=(0,U.z$)()){return/blackberry/i.test(h)}function Ie(h=(0,U.z$)()){return/webos/i.test(h)}function Fe(h=(0,U.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function Ee(h=(0,U.z$)()){return Fe(h)||b(h)||Ie(h)||X(h)||/windows phone/i.test(h)||N(h)}function $o(h,c=[]){let l;switch(h){case"Browser":l=Fn((0,U.z$)());break;case"Worker":l=`${Fn((0,U.z$)())}-${h}`;break;default:l=h}const f=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Ne.SDK_VERSION}/${f}`}class zA{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const f=y=>new Promise((w,P)=>{try{w(c(y))}catch(z){P(z)}});f.onAbort=l,this.queue.push(f);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,I.Z)(function*(){if(l.auth.currentUser===c)return;const f=[];try{for(const m of l.queue)yield m(c),m.onAbort&&f.push(m.onAbort)}catch(m){f.reverse();for(const y of f)try{y()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function Za(){return(Za=(0,I.Z)(function*(h,c={}){return L(h,"GET","/v2/passwordPolicy",Q(h,c))})).apply(this,arguments)}class qA{constructor(c){var l,f,m,y;const w=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=w.minPasswordLength)&&void 0!==l?l:6,w.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=w.maxPasswordLength),void 0!==w.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=w.containsLowercaseCharacter),void 0!==w.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=w.containsUppercaseCharacter),void 0!==w.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=w.containsNumericCharacter),void 0!==w.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=w.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(f=c.allowedNonAlphanumericCharacters)||void 0===f?void 0:f.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(y=c.forceUpgradeOnSignin)&&void 0!==y&&y,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,f,m,y,w,P;const z={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,z),this.validatePasswordCharacterOptions(c,z),z.isValid&&(z.isValid=null===(l=z.meetsMinPasswordLength)||void 0===l||l),z.isValid&&(z.isValid=null===(f=z.meetsMaxPasswordLength)||void 0===f||f),z.isValid&&(z.isValid=null===(m=z.containsLowercaseLetter)||void 0===m||m),z.isValid&&(z.isValid=null===(y=z.containsUppercaseLetter)||void 0===y||y),z.isValid&&(z.isValid=null===(w=z.containsNumericCharacter)||void 0===w||w),z.isValid&&(z.isValid=null===(P=z.containsNonAlphanumericCharacter)||void 0===P||P),z}validatePasswordLengthOptions(c,l){const f=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;f&&(l.meetsMinPasswordLength=c.length>=f),m&&(l.meetsMaxPasswordLength=c.length<=m)}validatePasswordCharacterOptions(c,l){let f;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let m=0;m<c.length;m++)f=c.charAt(m),this.updatePasswordCharacterOptionsStatuses(l,f>="a"&&f<="z",f>="A"&&f<="Z",f>="0"&&f<="9",this.allowedNonAlphanumericCharacters.includes(f))}updatePasswordCharacterOptionsStatuses(c,l,f,m,y){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=f)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=y))}}class aI{constructor(c,l,f,m){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=f,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ys(this),this.idTokenSubscription=new ys(this),this.beforeStateQueue=new zA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ve,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(c,l){var f=this;return l&&(this._popupRedirectResolver=Ge(l)),this._initializationPromise=this.queue((0,I.Z)(function*(){var m,y;if(!f._deleted&&(f.persistenceManager=yield ve.create(f,c),!f._deleted)){if(null!==(m=f._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield f._popupRedirectResolver._initialize(f)}catch{}yield f.initializeCurrentUser(l),f.lastNotifiedUid=(null===(y=f.currentUser)||void 0===y?void 0:y.uid)||null,!f._deleted&&(f._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,I.Z)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUser(c){var l=this;return(0,I.Z)(function*(){var f;const m=yield l.assertedPersistence.getCurrentUser();let y=m,w=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const P=null===(f=l.redirectUser)||void 0===f?void 0:f._redirectEventId,z=y?._redirectEventId,ue=yield l.tryRedirectSignIn(c);(!P||P===z)&&ue?.user&&(y=ue.user,w=!0)}if(!y)return l.directlySetCurrentUser(null);if(!y._redirectEventId){if(w)try{yield l.beforeStateQueue.runMiddleware(y)}catch(P){y=m,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(P))}return y?l.reloadAndSetCurrentUserOrClear(y):l.directlySetCurrentUser(null)}return Z(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===y._redirectEventId?l.directlySetCurrentUser(y):l.reloadAndSetCurrentUserOrClear(y)})()}tryRedirectSignIn(c){var l=this;return(0,I.Z)(function*(){let f=null;try{f=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return f})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,I.Z)(function*(){try{yield ir(c)}catch(f){if("auth/network-request-failed"!==f?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Xs(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var c=this;return(0,I.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,I.Z)(function*(){const f=c?(0,U.m9)(c):null;return f&&Z(f.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(f&&f._clone(l))})()}_updateCurrentUser(c,l=!1){var f=this;return(0,I.Z)(function*(){if(!f._deleted)return c&&Z(f.tenantId===c.tenantId,f,"tenant-id-mismatch"),l||(yield f.beforeStateQueue.runMiddleware(c)),f.queue((0,I.Z)(function*(){yield f.directlySetCurrentUser(c),f.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,I.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var l=this;return this.queue((0,I.Z)(function*(){yield l.assertedPersistence.setPersistence(Ge(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,I.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const f=l._getPasswordPolicyInternal();return f.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):f.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,I.Z)(function*(){const l=yield function oI(h){return Za.apply(this,arguments)}(c),f=new qA(l);null===c.tenantId?c._projectPasswordPolicy=f:c._tenantPasswordPolicies[c.tenantId]=f})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new U.LL("auth","Firebase",c())}onAuthStateChanged(c,l,f){return this.registerStateListener(this.authStateSubscription,c,l,f)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,f){return this.registerStateListener(this.idTokenSubscription,c,l,f)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const f=this.onAuthStateChanged(()=>{f(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,I.Z)(function*(){if(l.currentUser){const f=yield l.currentUser.getIdToken(),m={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:f};null!=l.tenantId&&(m.tenantId=l.tenantId),yield function T(h,c){return A.apply(this,arguments)}(l,m)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var f=this;return(0,I.Z)(function*(){const m=yield f.getOrInitRedirectPersistenceManager(l);return null===c?m.removeCurrentUser():m.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,I.Z)(function*(){if(!l.redirectPersistenceManager){const f=c&&Ge(c)||l._popupRedirectResolver;Z(f,l,"argument-error"),l.redirectPersistenceManager=yield ve.create(l,[Ge(f._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,I.Z)(function*(){var f,m;return l._isInitialized&&(yield l.queue((0,I.Z)(function*(){}))),(null===(f=l._currentUser)||void 0===f?void 0:f._redirectEventId)===c?l._currentUser:(null===(m=l.redirectUser)||void 0===m?void 0:m._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,I.Z)(function*(){if(c===l.currentUser)return l.queue((0,I.Z)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const f=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==f&&(this.lastNotifiedUid=f,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,f,m){if(this._deleted)return()=>{};const y="function"==typeof l?l:l.next.bind(l);let w=!1;const P=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(P,this,"internal-error"),P.then(()=>{w||y(this.currentUser)}),"function"==typeof l){const z=c.addObserver(l,f,m);return()=>{w=!0,z()}}{const z=c.addObserver(l);return()=>{w=!0,z()}}}directlySetCurrentUser(c){var l=this;return(0,I.Z)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=$o(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,I.Z)(function*(){var l;const f={"X-Client-Version":c.clientVersion};c.app.options.appId&&(f["X-Firebase-gmpid"]=c.app.options.appId);const m=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();m&&(f["X-Firebase-Client"]=m);const y=yield c._getAppCheckToken();return y&&(f["X-Firebase-AppCheck"]=y),f})()}_getAppCheckToken(){var c=this;return(0,I.Z)(function*(){var l;const f=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return f?.error&&function Vn(h,...c){kn.logLevel<=ct.in.WARN&&kn.warn(`Auth (${Ne.SDK_VERSION}): ${h}`,...c)}(`Error while retrieving App Check token: ${f.error}`),f?.token})()}}function Ut(h){return(0,U.m9)(h)}class ys{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,U.ne)(l=>this.observer=l)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mg(h){return new Promise((c,l)=>{const f=document.createElement("script");f.setAttribute("src",h),f.onload=c,f.onerror=m=>{const y=Rt("internal-error");y.customData=m,l(y)},f.type="text/javascript",f.charset="UTF-8",function GA(){var h,c;return null!==(c=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==c?c:document}().appendChild(f)})}function uI(h){return`__${h}${Math.floor(1e6*Math.random())}`}class _g{constructor(c){this.type="recaptcha-enterprise",this.auth=Ut(c)}verify(c="verify",l=!1){var f=this;return(0,I.Z)(function*(){function y(){return y=(0,I.Z)(function*(P){if(!l){if(null==P.tenantId&&null!=P._agentRecaptchaConfig)return P._agentRecaptchaConfig.siteKey;if(null!=P.tenantId&&void 0!==P._tenantRecaptchaConfigs[P.tenantId])return P._tenantRecaptchaConfigs[P.tenantId].siteKey}return new Promise(function(){var z=(0,I.Z)(function*(ue,_e){_n(P,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(we=>{if(void 0!==we.recaptchaKey){const nn=new xr(we);return null==P.tenantId?P._agentRecaptchaConfig=nn:P._tenantRecaptchaConfigs[P.tenantId]=nn,ue(nn.siteKey)}_e(new Error("recaptcha Enterprise site key undefined"))}).catch(we=>{_e(we)})});return function(ue,_e){return z.apply(this,arguments)}}())}),y.apply(this,arguments)}function w(P,z,ue){const _e=window.grecaptcha;gr(_e)?_e.enterprise.ready(()=>{_e.enterprise.execute(P,{action:c}).then(we=>{z(we)}).catch(()=>{z("NO_RECAPTCHA")})}):ue(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((P,z)=>{(function m(P){return y.apply(this,arguments)})(f.auth).then(ue=>{if(!l&&gr(window.grecaptcha))w(ue,P,z);else{if(typeof window>"u")return void z(new Error("RecaptchaVerifier is only supported in browser"));mg("https://www.google.com/recaptcha/enterprise.js?render="+ue).then(()=>{w(ue,P,z)}).catch(_e=>{z(_e)})}}).catch(ue=>{z(ue)})})})()}}function lI(h,c,l){return yr.apply(this,arguments)}function yr(){return(yr=(0,I.Z)(function*(h,c,l,f=!1){const m=new _g(h);let y;try{y=yield m.verify(l)}catch{y=yield m.verify(l,!0)}const w=Object.assign({},c);return Object.assign(w,f?{captchaResp:y}:{captchaResponse:y}),Object.assign(w,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(w,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),w})).apply(this,arguments)}function Re(h,c,l,f){return yg.apply(this,arguments)}function yg(){return yg=(0,I.Z)(function*(h,c,l,f){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const y=yield lI(h,c,l,"getOobCode"===l);return f(h,y)}return f(h,c).catch(function(){var y=(0,I.Z)(function*(w){if("auth/missing-recaptcha-token"===w.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const P=yield lI(h,c,l,"getOobCode"===l);return f(h,P)}return Promise.reject(w)});return function(w){return y.apply(this,arguments)}}())}),yg.apply(this,arguments)}function Ka(h){const c=h.indexOf(":");return c<0?"":h.substr(0,c+1)}function zd(h){if(!h)return null;const c=Number(h);return isNaN(c)?null:c}class Qi{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return qt("not implemented")}_getIdTokenResponse(c){return qt("not implemented")}_linkToIdToken(c,l){return qt("not implemented")}_getReauthenticationResolver(c){return qt("not implemented")}}function Qa(h,c){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:resetPassword",Q(h,c))})).apply(this,arguments)}function qd(){return(qd=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function et(h,c){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Yn(){return(Yn=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:update",Q(h,c))})).apply(this,arguments)}function wg(h,c){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,I.Z)(function*(h,c){return De(h,"POST","/v1/accounts:signInWithPassword",Q(h,c))})).apply(this,arguments)}function _t(h,c){return Cg.apply(this,arguments)}function Cg(){return(Cg=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:sendOobCode",Q(h,c))})).apply(this,arguments)}function le(){return(le=(0,I.Z)(function*(h,c){return _t(h,c)})).apply(this,arguments)}function Gd(h,c){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,I.Z)(function*(h,c){return _t(h,c)})).apply(this,arguments)}function Dg(h,c){return eu.apply(this,arguments)}function eu(){return(eu=(0,I.Z)(function*(h,c){return _t(h,c)})).apply(this,arguments)}function tu(){return(tu=(0,I.Z)(function*(h,c){return _t(h,c)})).apply(this,arguments)}function Ag(){return(Ag=(0,I.Z)(function*(h,c){return De(h,"POST","/v1/accounts:signInWithEmailLink",Q(h,c))})).apply(this,arguments)}function bg(){return(bg=(0,I.Z)(function*(h,c){return De(h,"POST","/v1/accounts:signInWithEmailLink",Q(h,c))})).apply(this,arguments)}class yc extends Qi{constructor(c,l,f,m=null){super("password",f),this._email=c,this._password=l,this._tenantId=m}static _fromEmailAndPassword(c,l){return new yc(c,l,"password")}static _fromEmailAndCode(c,l,f=null){return new yc(c,l,"emailLink",f)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,I.Z)(function*(){switch(l.signInMethod){case"password":return Re(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",wg);case"emailLink":return function JA(h,c){return Ag.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:gt(c,"internal-error")}})()}_linkToIdToken(c,l){var f=this;return(0,I.Z)(function*(){switch(f.signInMethod){case"password":return Re(c,{idToken:l,returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",et);case"emailLink":return function XA(h,c){return bg.apply(this,arguments)}(c,{idToken:l,email:f._email,oobCode:f._password});default:gt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Or(h,c){return nu.apply(this,arguments)}function nu(){return(nu=(0,I.Z)(function*(h,c){return De(h,"POST","/v1/accounts:signInWithIdp",Q(h,c))})).apply(this,arguments)}class Ai extends Qi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Ai(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):gt("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:f,signInMethod:m}=l,y=(0,zt._T)(l,["providerId","signInMethod"]);if(!f||!m)return null;const w=new Ai(f,m);return w.idToken=y.idToken||void 0,w.accessToken=y.accessToken||void 0,w.secret=y.secret,w.nonce=y.nonce,w.pendingToken=y.pendingToken||null,w}_getIdTokenResponse(c){return Or(c,this.buildRequest())}_linkToIdToken(c,l){const f=this.buildRequest();return f.idToken=l,Or(c,f)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Or(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,U.xO)(l)}return c}}function Wd(){return(Wd=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:sendVerificationCode",Q(h,c))})).apply(this,arguments)}function vs(){return(vs=(0,I.Z)(function*(h,c){return De(h,"POST","/v1/accounts:signInWithPhoneNumber",Q(h,c))})).apply(this,arguments)}function bi(){return(bi=(0,I.Z)(function*(h,c){const l=yield De(h,"POST","/v1/accounts:signInWithPhoneNumber",Q(h,c));if(l.temporaryProof)throw Cn(h,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const mI={USER_NOT_FOUND:"user-not-found"};function Ic(){return(Ic=(0,I.Z)(function*(h,c){return De(h,"POST","/v1/accounts:signInWithPhoneNumber",Q(h,Object.assign(Object.assign({},c),{operation:"REAUTH"})),mI)})).apply(this,arguments)}class me extends Qi{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new me({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new me({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function Sg(h,c){return vs.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function gI(h,c){return bi.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function oe(h,c){return Ic.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:f,verificationCode:m}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:f,code:m}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:f,phoneNumber:m,temporaryProof:y}=c;return f||l||m||y?new me({verificationId:l,verificationCode:f,phoneNumber:m,temporaryProof:y}):null}}class Yi{constructor(c){var l,f,m,y,w,P;const z=(0,U.zd)((0,U.pd)(c)),ue=null!==(l=z.apiKey)&&void 0!==l?l:null,_e=null!==(f=z.oobCode)&&void 0!==f?f:null,we=function Ec(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=z.mode)&&void 0!==m?m:null);Z(ue&&_e&&we,"argument-error"),this.apiKey=ue,this.operation=we,this.code=_e,this.continueUrl=null!==(y=z.continueUrl)&&void 0!==y?y:null,this.languageCode=null!==(w=z.languageCode)&&void 0!==w?w:null,this.tenantId=null!==(P=z.tenantId)&&void 0!==P?P:null}static parseLink(c){const l=function Zd(h){const c=(0,U.zd)((0,U.pd)(h)).link,l=c?(0,U.zd)((0,U.pd)(c)).deep_link_id:null,f=(0,U.zd)((0,U.pd)(h)).deep_link_id;return(f?(0,U.zd)((0,U.pd)(f)).link:null)||f||l||c||h}(c);try{return new Yi(l)}catch{return null}}}let Kd=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(l,f){return yc._fromEmailAndPassword(l,f)}static credentialWithLink(l,f){const m=Yi.parseLink(f);return Z(m,"argument-error"),yc._fromEmailAndCode(l,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class Ji{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Ir extends Ji{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Xi extends Ir{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return Z("providerId"in l&&"signInMethod"in l,"argument-error"),Ai._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return Z(c.idToken||c.accessToken,"argument-error"),Ai._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Xi.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Xi.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:f,oauthTokenSecret:m,pendingToken:y,nonce:w,providerId:P}=c;if(!f&&!m&&!l&&!y||!P)return null;try{return new Xi(P)._credential({idToken:l,accessToken:f,nonce:w,pendingToken:y})}catch{return null}}}let Jr=(()=>{class h extends Ir{constructor(){super("facebook.com")}static credential(l){return Ai._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),ci=(()=>{class h extends Ir{constructor(){super("google.com"),this.addScope("profile")}static credential(l,f){return Ai._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:f})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:f,oauthAccessToken:m}=l;if(!f&&!m)return null;try{return h.credential(f,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),ut=(()=>{class h extends Ir{constructor(){super("github.com")}static credential(l){return Ai._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class Is extends Qi{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return Or(c,this.buildRequest())}_linkToIdToken(c,l){const f=this.buildRequest();return f.idToken=l,Or(c,f)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Or(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:f,signInMethod:m,pendingToken:y}=l;return f&&m&&y&&f===m?new Is(f,y):null}static _create(c,l){return new Is(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ru extends Ji{constructor(c){Z(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return ru.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return ru.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=Is.fromJSON(c);return Z(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:f}=c;if(!l||!f)return null;try{return Is._create(f,l)}catch{return null}}}let Si=(()=>{class h extends Ir{constructor(){super("twitter.com")}static credential(l,f){return Ai._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:f})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:f,oauthTokenSecret:m}=l;if(!f||!m)return null;try{return h.credential(f,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function Ho(h,c){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,I.Z)(function*(h,c){return De(h,"POST","/v1/accounts:signUp",Q(h,c))})).apply(this,arguments)}class kr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,f,m=!1){return(0,I.Z)(function*(){const y=yield G._fromIdTokenResponse(c,f,m),w=Cc(f);return new kr({user:y,providerId:w,_tokenResponse:f,operationType:l})})()}static _forOperation(c,l,f){return(0,I.Z)(function*(){yield c._updateTokensIfNecessary(f,!0);const m=Cc(f);return new kr({user:c,providerId:m,_tokenResponse:f,operationType:l})})()}}function Cc(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function Dc(){return(Dc=(0,I.Z)(function*(h){var c;const l=Ut(h);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new kr({user:l.currentUser,providerId:null,operationType:"signIn"});const f=yield Ho(l,{returnSecureToken:!0}),m=yield kr._fromIdTokenResponse(l,"signIn",f,!0);return yield l._updateCurrentUser(m.user),m})).apply(this,arguments)}class Es extends U.ZR{constructor(c,l,f,m){var y;super(l.code,l.message),this.operationType=f,this.user=m,Object.setPrototypeOf(this,Es.prototype),this.customData={appName:c.name,tenantId:null!==(y=c.tenantId)&&void 0!==y?y:void 0,_serverResponse:l.customData._serverResponse,operationType:f}}static _fromErrorAndOperation(c,l,f,m){return new Es(c,l,f,m)}}function Yd(h,c,l,f){return("reauthenticate"===c?l._getReauthenticationResolver(h):l._getIdTokenResponse(h)).catch(y=>{throw"auth/multi-factor-auth-required"===y.code?Es._fromErrorAndOperation(h,y,c,f):y})}function Jd(h){return new Set(h.map(({providerId:c})=>c).filter(c=>!!c))}function Ac(){return Ac=(0,I.Z)(function*(h,c){const l=(0,U.m9)(h);yield Er(!0,l,c);const{providerUserInfo:f}=yield function Ga(h,c){return mr.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),m=Jd(f||[]);return l.providerData=l.providerData.filter(y=>m.has(y.providerId)),m.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),Ac.apply(this,arguments)}function Xd(h,c){return eh.apply(this,arguments)}function eh(){return(eh=(0,I.Z)(function*(h,c,l=!1){const f=yield Yr(h,c._linkToIdToken(h.auth,yield h.getIdToken()),l);return kr._forOperation(h,"link",f)})).apply(this,arguments)}function Er(h,c,l){return th.apply(this,arguments)}function th(){return(th=(0,I.Z)(function*(h,c,l){yield ir(c);const m=!1===h?"provider-already-linked":"no-such-provider";Z(Jd(c.providerData).has(l)===h,c.auth,m)})).apply(this,arguments)}function nh(h,c){return rh.apply(this,arguments)}function rh(){return(rh=(0,I.Z)(function*(h,c,l=!1){const{auth:f}=h,m="reauthenticate";try{const y=yield Yr(h,Yd(f,m,c,h),l);Z(y.idToken,f,"internal-error");const w=Fo(y.idToken);Z(w,f,"internal-error");const{sub:P}=w;return Z(h.uid===P,f,"user-mismatch"),kr._forOperation(h,m,y)}catch(y){throw"auth/user-not-found"===y?.code&&gt(f,"user-mismatch"),y}})).apply(this,arguments)}function Pg(h,c){return ih.apply(this,arguments)}function ih(){return(ih=(0,I.Z)(function*(h,c,l=!1){const f="signIn",m=yield Yd(h,f,c),y=yield kr._fromIdTokenResponse(h,f,m);return l||(yield h._updateCurrentUser(y.user)),y})).apply(this,arguments)}function bc(h,c){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,I.Z)(function*(h,c){return Pg(Ut(h),c)})).apply(this,arguments)}function Mg(h,c){return sh.apply(this,arguments)}function sh(){return(sh=(0,I.Z)(function*(h,c){const l=(0,U.m9)(h);return yield Er(!1,l,c.providerId),Xd(l,c)})).apply(this,arguments)}function xg(h,c){return bn.apply(this,arguments)}function bn(){return(bn=(0,I.Z)(function*(h,c){return nh((0,U.m9)(h),c)})).apply(this,arguments)}function oh(){return(oh=(0,I.Z)(function*(h,c){return De(h,"POST","/v1/accounts:signInWithCustomToken",Q(h,c))})).apply(this,arguments)}function wr(){return wr=(0,I.Z)(function*(h,c){const l=Ut(h),f=yield function yI(h,c){return oh.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),m=yield kr._fromIdTokenResponse(l,"signIn",f);return yield l._updateCurrentUser(m.user),m}),wr.apply(this,arguments)}class iu{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?Rc._fromServerResponse(c,l):"totpInfo"in l?Me._fromServerResponse(c,l):gt(c,"internal-error")}}class Rc extends iu{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new Rc(l)}}class Me extends iu{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new Me(l)}}function Ln(h,c,l){var f;Z((null===(f=l.url)||void 0===f?void 0:f.length)>0,h,"invalid-continue-uri"),Z(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(Z(l.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(Z(l.android.packageName.length>0,h,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function tt(h){return yn.apply(this,arguments)}function yn(){return(yn=(0,I.Z)(function*(h){const c=Ut(h);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function ws(){return(ws=(0,I.Z)(function*(h,c,l){const f=Ut(h),m={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&Ln(f,m,l),yield Re(f,m,"getOobCode",Gd)})).apply(this,arguments)}function Pc(){return Pc=(0,I.Z)(function*(h,c,l){yield Qa((0,U.m9)(h),{oobCode:c,newPassword:l}).catch(function(){var f=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&tt(h),m});return function(m){return f.apply(this,arguments)}}())}),Pc.apply(this,arguments)}function zo(){return zo=(0,I.Z)(function*(h,c){yield function Eg(h,c){return Yn.apply(this,arguments)}((0,U.m9)(h),{oobCode:c})}),zo.apply(this,arguments)}function Og(h,c){return ah.apply(this,arguments)}function ah(){return(ah=(0,I.Z)(function*(h,c){const l=(0,U.m9)(h),f=yield Qa(l,{oobCode:c}),m=f.requestType;switch(Z(m,l,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Z(f.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Z(f.mfaInfo,l,"internal-error");default:Z(f.email,l,"internal-error")}let y=null;return f.mfaInfo&&(y=iu._fromServerResponse(Ut(l),f.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===f.requestType?f.newEmail:f.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===f.requestType?f.email:f.newEmail)||null,multiFactorInfo:y},operation:m}})).apply(this,arguments)}function he(){return(he=(0,I.Z)(function*(h,c){const{data:l}=yield Og((0,U.m9)(h),c);return l.email})).apply(this,arguments)}function Pt(){return(Pt=(0,I.Z)(function*(h,c,l){const f=Ut(h),w=yield Re(f,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ho).catch(z=>{throw"auth/password-does-not-meet-requirements"===z.code&&tt(h),z}),P=yield kr._fromIdTokenResponse(f,"signIn",w);return yield f._updateCurrentUser(P.user),P})).apply(this,arguments)}function Sn(){return(Sn=(0,I.Z)(function*(h,c,l){const f=Ut(h),m={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function y(w,P){Z(P.handleCodeInApp,f,"argument-error"),P&&Ln(f,w,P)})(m,l),yield Re(f,m,"getOobCode",Dg)})).apply(this,arguments)}function Ri(){return(Ri=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h),m=Kd.credentialWithLink(c,l||mn());return Z(m._tenantId===(f.tenantId||null),f,"tenant-id-mismatch"),bc(f,m)})).apply(this,arguments)}function ke(){return(ke=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:createAuthUri",Q(h,c))})).apply(this,arguments)}function Mc(){return Mc=(0,I.Z)(function*(h,c){const f={identifier:c,continueUri:wi()?mn():"http://localhost"},{signinMethods:m}=yield function Go(h,c){return ke.apply(this,arguments)}((0,U.m9)(h),f);return m||[]}),Mc.apply(this,arguments)}function Zt(){return Zt=(0,I.Z)(function*(h,c){const l=(0,U.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};c&&Ln(l.auth,m,c);const{email:y}=yield function YA(h,c){return le.apply(this,arguments)}(l.auth,m);y!==h.email&&(yield h.reload())}),Zt.apply(this,arguments)}function Ts(){return Ts=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h),y={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:c};l&&Ln(f.auth,y,l);const{email:w}=yield function fI(h,c){return tu.apply(this,arguments)}(f.auth,y);w!==h.email&&(yield h.reload())}),Ts.apply(this,arguments)}function to(){return(to=(0,I.Z)(function*(h,c){return L(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Mi(){return Mi=(0,I.Z)(function*(h,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const f=(0,U.m9)(h),y={idToken:yield f.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},w=yield Yr(f,function Pi(h,c){return to.apply(this,arguments)}(f.auth,y));f.displayName=w.displayName||null,f.photoURL=w.photoUrl||null;const P=f.providerData.find(({providerId:z})=>"password"===z);P&&(P.displayName=f.displayName,P.photoURL=f.photoURL),yield f._updateTokensIfNecessary(w)}),Mi.apply(this,arguments)}function Zo(h,c,l){return Ke.apply(this,arguments)}function Ke(){return Ke=(0,I.Z)(function*(h,c,l){const{auth:f}=h,y={idToken:yield h.getIdToken(),returnSecureToken:!0};c&&(y.email=c),l&&(y.password=l);const w=yield Yr(h,function Ig(h,c){return qd.apply(this,arguments)}(f,y));yield h._updateTokensIfNecessary(w,!0)}),Ke.apply(this,arguments)}class Cs{constructor(c,l,f={}){this.isNewUser=c,this.providerId=l,this.profile=f}}class uh extends Cs{constructor(c,l,f,m){super(c,l,f),this.username=m}}class xi extends Cs{constructor(c,l){super(c,"facebook.com",l)}}class xc extends uh{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class Ko extends Cs{constructor(c,l){super(c,"google.com",l)}}class cu extends uh{constructor(c,l,f){super(c,"twitter.com",l,f)}}function Un(h){const{user:c,_tokenResponse:l}=h;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function tb(h){var c,l;if(!h)return null;const{providerId:f}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},y=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!f&&h?.idToken){const w=null===(l=null===(c=Fo(h.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(w)return new Cs(y,"anonymous"!==w&&"custom"!==w?w:null)}if(!f)return null;switch(f){case"facebook.com":return new xi(y,m);case"github.com":return new xc(y,m);case"google.com":return new Ko(y,m);case"twitter.com":return new cu(y,m,h.screenName||null);case"custom":case"anonymous":return new Cs(y,null);default:return new Cs(y,f,m)}}(l)}class Qo{constructor(c,l,f){this.type=c,this.credential=l,this.user=f}static _fromIdtoken(c,l){return new Qo("enroll",c,l)}static _fromMfaPendingCredential(c){return new Qo("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,f;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return Qo._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.idToken)return Qo._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Fg{constructor(c,l,f){this.session=c,this.hints=l,this.signInResolver=f}static _fromError(c,l){const f=Ut(c),m=l.customData._serverResponse,y=(m.mfaInfo||[]).map(P=>iu._fromServerResponse(f,P));Z(m.mfaPendingCredential,f,"internal-error");const w=Qo._fromMfaPendingCredential(m.mfaPendingCredential);return new Fg(w,y,function(){var P=(0,I.Z)(function*(z){const ue=yield z._process(f,w);delete m.mfaInfo,delete m.mfaPendingCredential;const _e=Object.assign(Object.assign({},m),{idToken:ue.idToken,refreshToken:ue.refreshToken});switch(l.operationType){case"signIn":const we=yield kr._fromIdTokenResponse(f,l.operationType,_e);return yield f._updateCurrentUser(we.user),we;case"reauthenticate":return Z(l.user,f,"internal-error"),kr._forOperation(l.user,l.operationType,_e);default:gt(f,"internal-error")}});return function(z){return P.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,I.Z)(function*(){return l.signInResolver(c)})()}}class Lg{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(f=>iu._fromServerResponse(c.auth,f)))})}static _fromUser(c){return new Lg(c)}getSession(){var c=this;return(0,I.Z)(function*(){return Qo._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var f=this;return(0,I.Z)(function*(){const m=c,y=yield f.getSession(),w=yield Yr(f.user,m._process(f.user.auth,y,l));return yield f.user._updateTokensIfNecessary(w),f.user.reload()})()}unenroll(c){var l=this;return(0,I.Z)(function*(){const f="string"==typeof c?c:c.uid,m=yield l.user.getIdToken();try{const y=yield Yr(l.user,function cb(h,c){return L(h,"POST","/v2/accounts/mfaEnrollment:withdraw",Q(h,c))}(l.user.auth,{idToken:m,mfaEnrollmentId:f}));l.enrolledFactors=l.enrolledFactors.filter(({uid:w})=>w!==f),yield l.user._updateTokensIfNecessary(y),yield l.user.reload()}catch(y){throw y}})()}}const Ug=new WeakMap,lh="__sak";class dh{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(lh,"1"),this.storage.removeItem(lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Oi=(()=>{class h extends dh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,f)=>this.onStorageEvent(l,f),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Bg(){const h=(0,U.z$)();return Di(h)||Fe(h)}()&&function Ye(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ee(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const f of Object.keys(this.listeners)){const m=this.storage.getItem(f),y=this.localCache[f];m!==y&&l(f,y,m)}}onStorageEvent(l,f=!1){if(!l.key)return void this.forAllChangedKeys((P,z,ue)=>{this.notifyListeners(P,ue)});const m=l.key;if(f?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const P=this.storage.getItem(m);if(l.newValue!==P)null!==l.newValue?this.storage.setItem(m,l.newValue):this.storage.removeItem(m);else if(this.localCache[m]===l.newValue&&!f)return}const y=()=>{const P=this.storage.getItem(m);!f&&this.localCache[m]===P||this.notifyListeners(m,P)},w=this.storage.getItem(m);!function en(){return(0,U.w1)()&&10===document.documentMode}()||w===l.newValue||l.newValue===l.oldValue?y():setTimeout(y,10)}notifyListeners(l,f){this.localCache[l]=f;const m=this.listeners[l];if(m)for(const y of Array.from(m))y(f&&JSON.parse(f))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,f,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:f,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,f){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(f)}_removeListener(l,f){this.listeners[l]&&(this.listeners[l].delete(f),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,f){var m=()=>super._set,y=this;return(0,I.Z)(function*(){yield m().call(y,l,f),y.localCache[l]=JSON.stringify(f)})()}_get(l){var f=()=>super._get,m=this;return(0,I.Z)(function*(){const y=yield f().call(m,l);return m.localCache[l]=JSON.stringify(y),y})()}_remove(l){var f=()=>super._remove,m=this;return(0,I.Z)(function*(){yield f().call(m,l),delete m.localCache[l]})()}}return h.type="LOCAL",h})(),io=(()=>{class h extends dh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,f){}_removeListener(l,f){}}return h.type="SESSION",h})();let Bn=(()=>{class h{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const f=this.receivers.find(y=>y.isListeningto(l));if(f)return f;const m=new h(l);return this.receivers.push(m),m}isListeningto(l){return this.eventTarget===l}handleEvent(l){var f=this;return(0,I.Z)(function*(){const m=l,{eventId:y,eventType:w,data:P}=m.data,z=f.handlersMap[w];if(!z?.size)return;m.ports[0].postMessage({status:"ack",eventId:y,eventType:w});const ue=Array.from(z).map(function(){var we=(0,I.Z)(function*(nn){return nn(m.origin,P)});return function(nn){return we.apply(this,arguments)}}()),_e=yield function fb(h){return Promise.all(h.map(function(){var c=(0,I.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(f){return{fulfilled:!1,reason:f}}});return function(l){return c.apply(this,arguments)}}()))}(ue);m.ports[0].postMessage({status:"done",eventId:y,eventType:w,response:_e})})()}_subscribe(l,f){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(f)}_unsubscribe(l,f){this.handlersMap[l]&&f&&this.handlersMap[l].delete(f),(!f||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function Ds(h="",c=10){let l="";for(let f=0;f<c;f++)l+=Math.floor(10*Math.random());return h+l}class Xr{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,f=50){var m=this;return(0,I.Z)(function*(){const y=typeof MessageChannel<"u"?new MessageChannel:null;if(!y)throw new Error("connection_unavailable");let w,P;return new Promise((z,ue)=>{const _e=Ds("",20);y.port1.start();const we=setTimeout(()=>{ue(new Error("unsupported_event"))},f);P={messageChannel:y,onMessage(nn){const di=nn;if(di.data.eventId===_e)switch(di.data.status){case"ack":clearTimeout(we),w=setTimeout(()=>{ue(new Error("timeout"))},3e3);break;case"done":clearTimeout(w),z(di.data.response);break;default:clearTimeout(we),clearTimeout(w),ue(new Error("invalid_response"))}}},m.handlers.add(P),y.port1.addEventListener("message",P.onMessage),m.target.postMessage({eventType:c,eventId:_e,data:l},[y.port2])}).finally(()=>{P&&m.removeMessageHandler(P)})})()}}function cn(){return window}function Oc(){return typeof cn().WorkerGlobalScope<"u"&&"function"==typeof cn().importScripts}function du(){return(du=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const kc="firebaseLocalStorageDb",hu="firebaseLocalStorage",fh="fbase_key";class As{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function bs(h,c){return h.transaction([hu],c?"readwrite":"readonly").objectStore(hu)}function Vc(){const h=indexedDB.open(kc,1);return new Promise((c,l)=>{h.addEventListener("error",()=>{l(h.error)}),h.addEventListener("upgradeneeded",()=>{const f=h.result;try{f.createObjectStore(hu,{keyPath:fh})}catch(m){l(m)}}),h.addEventListener("success",(0,I.Z)(function*(){const f=h.result;f.objectStoreNames.contains(hu)?c(f):(f.close(),yield function Yo(){const h=indexedDB.deleteDatabase(kc);return new As(h).toPromise()}(),c(yield Vc()))}))})}function II(h,c,l){return qg.apply(this,arguments)}function qg(){return(qg=(0,I.Z)(function*(h,c,l){const f=bs(h,!0).put({[fh]:c,value:l});return new As(f).toPromise()})).apply(this,arguments)}function ph(){return(ph=(0,I.Z)(function*(h,c){const l=bs(h,!1).get(c),f=yield new As(l).toPromise();return void 0===f?null:f.value})).apply(this,arguments)}function Gg(h,c){const l=bs(h,!0).delete(c);return new As(l).toPromise()}const Jo=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,I.Z)(function*(){return l.db||(l.db=yield Vc()),l.db})()}_withRetries(l){var f=this;return(0,I.Z)(function*(){let m=0;for(;;)try{const y=yield f._openDb();return yield l(y)}catch(y){if(m++>3)throw y;f.db&&(f.db.close(),f.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,I.Z)(function*(){return Oc()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,I.Z)(function*(){l.receiver=Bn._getInstance(function hh(){return Oc()?self:null}()),l.receiver._subscribe("keyChanged",function(){var f=(0,I.Z)(function*(m,y){return{keyProcessed:(yield l._poll()).includes(y.key)}});return function(m,y){return f.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var f=(0,I.Z)(function*(m,y){return["keyChanged"]});return function(m,y){return f.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,I.Z)(function*(){var f,m;if(l.activeServiceWorker=yield function $g(){return du.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new Xr(l.activeServiceWorker);const y=yield l.sender._send("ping",{},800);y&&null!==(f=y[0])&&void 0!==f&&f.fulfilled&&null!==(m=y[0])&&void 0!==m&&m.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var f=this;return(0,I.Z)(function*(){if(f.sender&&f.activeServiceWorker&&function Hg(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===f.activeServiceWorker)try{yield f.sender._send("keyChanged",{key:l},f.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const l=yield Vc();return yield II(l,lh,"1"),yield Gg(l,lh),!0}catch{}return!1})()}_withPendingWrite(l){var f=this;return(0,I.Z)(function*(){f.pendingWrites++;try{yield l()}finally{f.pendingWrites--}})()}_set(l,f){var m=this;return(0,I.Z)(function*(){return m._withPendingWrite((0,I.Z)(function*(){return yield m._withRetries(y=>II(y,l,f)),m.localCache[l]=f,m.notifyServiceWorker(l)}))})()}_get(l){var f=this;return(0,I.Z)(function*(){const m=yield f._withRetries(y=>function pb(h,c){return ph.apply(this,arguments)}(y,l));return f.localCache[l]=m,m})()}_remove(l){var f=this;return(0,I.Z)(function*(){return f._withPendingWrite((0,I.Z)(function*(){return yield f._withRetries(m=>Gg(m,l)),delete f.localCache[l],f.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,I.Z)(function*(){const f=yield l._withRetries(w=>{const P=bs(w,!1).getAll();return new As(P).toPromise()});if(!f)return[];if(0!==l.pendingWrites)return[];const m=[],y=new Set;for(const{fbase_key:w,value:P}of f)y.add(w),JSON.stringify(l.localCache[w])!==JSON.stringify(P)&&(l.notifyListeners(w,P),m.push(w));for(const w of Object.keys(l.localCache))l.localCache[w]&&!y.has(w)&&(l.notifyListeners(w,null),m.push(w));return m})()}notifyListeners(l,f){this.localCache[l]=f;const m=this.listeners[l];if(m)for(const y of Array.from(m))y(f)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,f){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(f)}_removeListener(l,f){this.listeners[l]&&(this.listeners[l].delete(f),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),fu=1e12;class wI{constructor(c){this.auth=c,this.counter=fu,this._widgets=new Map}render(c,l){const f=this.counter;return this._widgets.set(f,new TI(c,this.auth.name,l||{})),this.counter++,f}reset(c){var l;const f=c||fu;null===(l=this._widgets.get(f))||void 0===l||l.delete(),this._widgets.delete(f)}getResponse(c){var l;return(null===(l=this._widgets.get(c||fu))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,I.Z)(function*(){var f;return null===(f=l._widgets.get(c||fu))||void 0===f||f.execute(),""})()}}class TI{constructor(c,l,f){this.params=f,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof c?document.getElementById(c):c;Z(m,"argument-error",{appName:l}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function CI(h){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<h;f++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fc=uI("rcb"),DI=new Ci(3e4,6e4);class AI{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=cn().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return Z(function yb(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&rr(cn().grecaptcha)?Promise.resolve(cn().grecaptcha):new Promise((f,m)=>{const y=cn().setTimeout(()=>{m(Rt(c,"network-request-failed"))},DI.get());cn()[Fc]=()=>{cn().clearTimeout(y),delete cn()[Fc];const P=cn().grecaptcha;if(!P||!rr(P))return void m(Rt(c,"internal-error"));const z=P.render;P.render=(ue,_e)=>{const we=z(ue,_e);return this.counter++,we},this.hostLanguage=l,f(P)},mg(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:Fc,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(y),m(Rt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=cn().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bI{load(c){return(0,I.Z)(function*(){return new wI(c)})()}clearedOneInstance(){}}const Lr="recaptcha",Yg={theme:"light",type:"image"};class SI{constructor(c,l,f=Object.assign({},Yg)){this.parameters=f,this.type=Lr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ut(c),this.isInvisible="invisible"===this.parameters.size,Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof l?document.getElementById(l):l;Z(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bI:new AI,this.validateStartingState()}verify(){var c=this;return(0,I.Z)(function*(){c.assertNotDestroyed();const l=yield c.render(),f=c.getAssertedRecaptcha();return f.getResponse(l)||new Promise(y=>{const w=P=>{P&&(c.tokenChangeListeners.delete(w),y(P))};c.tokenChangeListeners.add(w),c.isInvisible&&f.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){Z(!this.parameters.sitekey,this.auth,"argument-error"),Z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(f=>f(l)),"function"==typeof c)c(l);else if("string"==typeof c){const f=cn()[c];"function"==typeof f&&f(l)}}}assertNotDestroyed(){Z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,I.Z)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const f=document.createElement("div");l.appendChild(f),l=f}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,I.Z)(function*(){Z(wi()&&!Oc(),c.auth,"internal-error"),yield function RI(){let h=null;return new Promise(c=>{"complete"!==document.readyState?(h=()=>c(),window.addEventListener("load",h)):c()}).catch(c=>{throw h&&window.removeEventListener("load",h),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function za(h){return Zi.apply(this,arguments)}(c.auth);Z(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return Z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Lc{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=me._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function mh(){return(mh=(0,I.Z)(function*(h,c,l){const f=Ut(h),m=yield pu(f,c,(0,U.m9)(l));return new Lc(m,y=>bc(f,y))})).apply(this,arguments)}function yh(){return(yh=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h);yield Er(!1,f,"phone");const m=yield pu(f.auth,c,(0,U.m9)(l));return new Lc(m,y=>Mg(f,y))})).apply(this,arguments)}function Uc(){return(Uc=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h),m=yield pu(f.auth,c,(0,U.m9)(l));return new Lc(m,y=>xg(f,y))})).apply(this,arguments)}function pu(h,c,l){return Et.apply(this,arguments)}function Et(){return Et=(0,I.Z)(function*(h,c,l){var f;const m=yield l.verify();try{let y;if(Z("string"==typeof m,h,"argument-error"),Z(l.type===Lr,h,"argument-error"),y="string"==typeof c?{phoneNumber:c}:c,"session"in y){const w=y.session;if("phoneNumber"in y)return Z("enroll"===w.type,h,"internal-error"),(yield function ob(h,c){return L(h,"POST","/v2/accounts/mfaEnrollment:start",Q(h,c))}(h,{idToken:w.credential,phoneEnrollmentInfo:{phoneNumber:y.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{Z("signin"===w.type,h,"internal-error");const P=(null===(f=y.multiFactorHint)||void 0===f?void 0:f.uid)||y.multiFactorUid;return Z(P,h,"missing-multi-factor-info"),(yield function gh(h,c){return L(h,"POST","/v2/accounts/mfaSignIn:start",Q(h,c))}(h,{mfaPendingCredential:w.credential,mfaEnrollmentId:P,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:w}=yield function pI(h,c){return Wd.apply(this,arguments)}(h,{phoneNumber:y.phoneNumber,recaptchaToken:m});return w}}finally{l._reset()}}),Et.apply(this,arguments)}function Xo(){return(Xo=(0,I.Z)(function*(h,c){yield Xd((0,U.m9)(h),c)})).apply(this,arguments)}let Rn=(()=>{class h{constructor(l){this.providerId=h.PROVIDER_ID,this.auth=Ut(l)}verifyPhoneNumber(l,f){return pu(this.auth,l,(0,U.m9)(f))}static credential(l,f){return me._fromVerification(l,f)}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:f,temporaryProof:m}=l;return f&&m?me._fromTokenResponse(f,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function so(h,c){return c?Ge(c):(Z(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class Bc extends Qi{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Or(c,this._buildIdpRequest())}_linkToIdToken(c,l){return Or(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return Or(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function ea(h){return Pg(h.auth,new Bc(h),h.bypassAuthState)}function Ur(h){const{auth:c,user:l}=h;return Z(l,c,"internal-error"),nh(l,new Bc(h),h.bypassAuthState)}function PI(h){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,I.Z)(function*(h){const{auth:c,user:l}=h;return Z(l,c,"internal-error"),Xd(l,new Bc(h),h.bypassAuthState)})).apply(this,arguments)}class Xg{constructor(c,l,f,m,y=!1){this.auth=c,this.resolver=f,this.user=m,this.bypassAuthState=y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,I.Z)(function*(f,m){c.pendingPromise={resolve:f,reject:m};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(y){c.reject(y)}});return function(f,m){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,I.Z)(function*(){const{urlResponse:f,sessionId:m,postBody:y,tenantId:w,error:P,type:z}=c;if(P)return void l.reject(P);const ue={auth:l.auth,requestUri:f,sessionId:m,tenantId:w||void 0,postBody:y||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(z)(ue))}catch(_e){l.reject(_e)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return ea;case"linkViaPopup":case"linkViaRedirect":return PI;case"reauthViaPopup":case"reauthViaRedirect":return Ur;default:gt(this.auth,"internal-error")}}resolve(c){Ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ss=new Ci(2e3,1e4);function Eh(){return(Eh=(0,I.Z)(function*(h,c,l){const f=Ut(h);qe(h,c,Ji);const m=so(f,l);return new Pe(f,"signInViaPopup",c,m).executeNotNull()})).apply(this,arguments)}function jc(){return(jc=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h);qe(f.auth,c,Ji);const m=so(f.auth,l);return new Pe(f.auth,"reauthViaPopup",c,m,f).executeNotNull()})).apply(this,arguments)}function wh(){return(wh=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h);qe(f.auth,c,Ji);const m=so(f.auth,l);return new Pe(f.auth,"linkViaPopup",c,m,f).executeNotNull()})).apply(this,arguments)}let Pe=(()=>{class h extends Xg{constructor(l,f,m,y,w){super(l,f,y,w),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var l=this;return(0,I.Z)(function*(){const f=yield l.execute();return Z(f,l.auth,"internal-error"),f})()}onExecution(){var l=this;return(0,I.Z)(function*(){Ft(1===l.filter.length,"Popup operations only handle one event");const f=Ds();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],f),l.authWindow.associatedEvent=f,l.resolver._originValidation(l.auth).catch(m=>{l.reject(m)}),l.resolver._isIframeWebStorageSupported(l.auth,m=>{m||l.reject(Rt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(Rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const l=()=>{var f,m;this.pollId=null!==(m=null===(f=this.authWindow)||void 0===f?void 0:f.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Rt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,Ss.get())};l()}}return h.currentPopupAction=null,h})();const rm="pendingRedirect",$c=new Map;class MI extends Xg{constructor(c,l,f=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,f),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,I.Z)(function*(){let f=$c.get(l.auth._key());if(!f){try{const y=(yield function xI(h,c){return Th.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;f=()=>Promise.resolve(y)}catch(m){f=()=>Promise.reject(m)}$c.set(l.auth._key(),f)}return l.bypassAuthState||$c.set(l.auth._key(),()=>Promise.resolve(null)),f()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,f=this;return(0,I.Z)(function*(){if("signInViaRedirect"===c.type)return l().call(f,c);if("unknown"!==c.type){if(c.eventId){const m=yield f.auth._redirectUserForId(c.eventId);if(m)return f.user=m,l().call(f,c);f.resolve(null)}}else f.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function Th(){return(Th=(0,I.Z)(function*(h,c){const l=sm(c),f=im(h);if(!(yield f._isAvailable()))return!1;const m="true"===(yield f._get(l));return yield f._remove(l),m})).apply(this,arguments)}function Hc(h,c){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,I.Z)(function*(h,c){return im(h)._set(sm(c),"true")})).apply(this,arguments)}function Ch(h,c){$c.set(h._key(),c)}function im(h){return Ge(h._redirectPersistence)}function sm(h){return An(rm,h.config.apiKey,h.name)}function OI(h,c,l){return function Y(h,c,l){return nt.apply(this,arguments)}(h,c,l)}function nt(){return(nt=(0,I.Z)(function*(h,c,l){const f=Ut(h);qe(h,c,Ji),yield f._initializationPromise;const m=so(f,l);return yield Hc(m,f),m._openRedirect(f,c,"signInViaRedirect")})).apply(this,arguments)}function om(h,c,l){return function am(h,c,l){return vn.apply(this,arguments)}(h,c,l)}function vn(){return(vn=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h);qe(f.auth,c,Ji),yield f.auth._initializationPromise;const m=so(f.auth,l);yield Hc(m,f.auth);const y=yield Ah(f);return m._openRedirect(f.auth,c,"reauthViaRedirect",y)})).apply(this,arguments)}function um(h,c,l){return function gu(h,c,l){return ei.apply(this,arguments)}(h,c,l)}function ei(){return(ei=(0,I.Z)(function*(h,c,l){const f=(0,U.m9)(h);qe(f.auth,c,Ji),yield f.auth._initializationPromise;const m=so(f.auth,l);yield Er(!1,f,c.providerId),yield Hc(m,f.auth);const y=yield Ah(f);return m._openRedirect(f.auth,c,"linkViaRedirect",y)})).apply(this,arguments)}function mu(){return(mu=(0,I.Z)(function*(h,c){return yield Ut(h)._initializationPromise,zc(h,c,!1)})).apply(this,arguments)}function zc(h,c){return cm.apply(this,arguments)}function cm(){return(cm=(0,I.Z)(function*(h,c,l=!1){const f=Ut(h),m=so(f,c),w=yield new MI(f,m,l).execute();return w&&!l&&(delete w.user._redirectEventId,yield f._persistUserIfCurrent(w.user),yield f._setRedirectUser(null,c)),w})).apply(this,arguments)}function Ah(h){return jn.apply(this,arguments)}function jn(){return(jn=(0,I.Z)(function*(h){const c=Ds(`${h.uid}:::`);return h._redirectEventId=c,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),c})).apply(this,arguments)}class bh{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(f=>{this.isEventForConsumer(c,f)&&(l=!0,this.sendToConsumer(c,f),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function kI(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vi(h);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var f;if(c.error&&!Vi(c)){const m=(null===(f=c.error.code)||void 0===f?void 0:f.split("auth/")[1])||"internal-error";l.onError(Rt(this.auth,m))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const f=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&f}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(oo(c))}saveEventToCache(c){this.cachedEventUids.add(oo(c)),this.lastProcessedEventTime=Date.now()}}function oo(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(c=>c).join("-")}function Vi({type:h,error:c}){return"unknown"===h&&"auth/no-auth-event"===c?.code}function Sh(h){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,I.Z)(function*(h,c={}){return L(h,"GET","/v1/projects",c)})).apply(this,arguments)}const VI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ph=/^https?/;function qc(){return(qc=(0,I.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:c}=yield Sh(h);for(const l of c)try{if(xh(l))return}catch{}gt(h,"unauthorized-domain")})).apply(this,arguments)}function xh(h){const c=mn(),{protocol:l,hostname:f}=new URL(c);if(h.startsWith("chrome-extension://")){const w=new URL(h);return""===w.hostname&&""===f?"chrome-extension:"===l&&h.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&w.hostname===f}if(!Ph.test(l))return!1;if(VI.test(h))return f===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(f)}const FI=new Ci(3e4,6e4);function Nh(){const h=cn().___jsl;if(h?.H)for(const c of Object.keys(h.H))if(h.H[c].r=h.H[c].r||[],h.H[c].L=h.H[c].L||[],h.H[c].r=[...h.H[c].L],h.CP)for(let l=0;l<h.CP.length;l++)h.CP[l]=null}let _u=null;const dm=new Ci(5e3,15e3),hm="__/auth/iframe",kh="emulator/auth/iframe",LI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function or(h){const c=h.config;Z(c.authDomain,h,"auth-domain-config-required");const l=c.emulator?k(c,kh):`https://${h.config.authDomain}/${hm}`,f={apiKey:c.apiKey,appName:h.name,v:Ne.SDK_VERSION},m=UI.get(h.config.apiHost);m&&(f.eid=m);const y=h._getFrameworks();return y.length&&(f.fw=y.join(",")),`${l}?${(0,U.xO)(f).slice(1)}`}function Nt(){return Nt=(0,I.Z)(function*(h){const c=yield function lm(h){return _u=_u||function Oh(h){return new Promise((c,l)=>{var f,m,y;function w(){Nh(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Nh(),l(Rt(h,"network-request-failed"))},timeout:FI.get()})}if(null!==(m=null===(f=cn().gapi)||void 0===f?void 0:f.iframes)&&void 0!==m&&m.Iframe)c(gapi.iframes.getContext());else{if(null===(y=cn().gapi)||void 0===y||!y.load){const P=uI("iframefcb");return cn()[P]=()=>{gapi.load?w():l(Rt(h,"network-request-failed"))},mg(`https://apis.google.com/js/api.js?onload=${P}`).catch(z=>l(z))}w()}}).catch(c=>{throw _u=null,c})}(h),_u}(h),l=cn().gapi;return Z(l,h,"internal-error"),c.open({where:document.body,url:or(h),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LI,dontclear:!0},f=>new Promise(function(){var m=(0,I.Z)(function*(y,w){yield f.restyle({setHideOnLeave:!1});const P=Rt(h,"network-request-failed"),z=cn().setTimeout(()=>{w(P)},dm.get());function ue(){cn().clearTimeout(z),y(f)}f.ping(ue).then(ue,()=>{w(P)})});return function(y,w){return m.apply(this,arguments)}}()))}),Nt.apply(this,arguments)}const BI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vh{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const zI="__/auth/handler",Wc="emulator/auth/handler",Zc=encodeURIComponent("fac");function ta(h,c,l,f,m,y){return yu.apply(this,arguments)}function yu(){return(yu=(0,I.Z)(function*(h,c,l,f,m,y){Z(h.config.authDomain,h,"auth-domain-config-required"),Z(h.config.apiKey,h,"invalid-api-key");const w={apiKey:h.config.apiKey,appName:h.name,authType:l,redirectUrl:f,v:Ne.SDK_VERSION,eventId:m};if(c instanceof Ji){c.setDefaultLanguage(h.languageCode),w.providerId=c.providerId||"",(0,U.xb)(c.getCustomParameters())||(w.customParameters=JSON.stringify(c.getCustomParameters()));for(const[_e,we]of Object.entries(y||{}))w[_e]=we}if(c instanceof Ir){const _e=c.getScopes().filter(we=>""!==we);_e.length>0&&(w.scopes=_e.join(","))}h.tenantId&&(w.tid=h.tenantId);const P=w;for(const _e of Object.keys(P))void 0===P[_e]&&delete P[_e];const z=yield h._getAppCheckToken(),ue=z?`#${Zc}=${encodeURIComponent(z)}`:"";return`${function pm({config:h}){return h.emulator?k(h,Wc):`https://${h.authDomain}/${zI}`}(h)}?${(0,U.xO)(P).slice(1)}${ue}`})).apply(this,arguments)}const Kc="webStorageSupport",uo=class qI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=io,this._completeRedirectFn=zc,this._overrideRedirectResult=Ch}_openPopup(c,l,f,m){var y=this;return(0,I.Z)(function*(){var w;Ft(null===(w=y.eventManagers[c._key()])||void 0===w?void 0:w.manager,"_initialize() not called before _openPopup()");const P=yield ta(c,l,f,mn(),m);return function Gc(h,c,l,f=500,m=600){const y=Math.max((window.screen.availHeight-m)/2,0).toString(),w=Math.max((window.screen.availWidth-f)/2,0).toString();let P="";const z=Object.assign(Object.assign({},BI),{width:f.toString(),height:m.toString(),top:y,left:w}),ue=(0,U.z$)().toLowerCase();l&&(P=_c(ue)?"_blank":l),Ct(ue)&&(c=c||"http://localhost",z.scrollbars="yes");const _e=Object.entries(z).reduce((nn,[di,al])=>`${nn}${di}=${al},`,"");if(function B(h=(0,U.z$)()){var c;return Fe(h)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ue)&&"_self"!==P)return function Ps(h,c){const l=document.createElement("a");l.href=h,l.target=c;const f=document.createEvent("MouseEvent");f.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(f)}(c||"",P),new Vh(null);const we=window.open(c||"",P,_e);Z(we,h,"popup-blocked");try{we.focus()}catch{}return new Vh(we)}(c,P,Ds())})()}_openRedirect(c,l,f,m){var y=this;return(0,I.Z)(function*(){return yield y._originValidation(c),function jg(h){cn().location.href=h}(yield ta(c,l,f,mn(),m)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:m,promise:y}=this.eventManagers[l];return m?Promise.resolve(m):(Ft(y,"If manager is not set, promise should be"),y)}const f=this.initAndGetManager(c);return this.eventManagers[l]={promise:f},f.catch(()=>{delete this.eventManagers[l]}),f}initAndGetManager(c){var l=this;return(0,I.Z)(function*(){const f=yield function ao(h){return Nt.apply(this,arguments)}(c),m=new bh(c);return f.register("authEvent",y=>(Z(y?.authEvent,c,"invalid-auth-event"),{status:m.onEvent(y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:m},l.iframes[c._key()]=f,m})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(Kc,{type:Kc},m=>{var y;const w=null===(y=m?.[0])||void 0===y?void 0:y[Kc];void 0!==w&&l(!!w),gt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Mh(h){return qc.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return Ee()||Di()||Fe()}};class vu{constructor(c){this.factorId=c}_process(c,l,f){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,f);case"signin":return this._finalizeSignIn(c,l.credential);default:return qt("unexpected MultiFactorSessionType")}}}class Fh extends vu{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Fh(c)}_finalizeEnroll(c,l,f){return function ab(h,c){return L(h,"POST","/v2/accounts/mfaEnrollment:finalize",Q(h,c))}(c,{idToken:l,displayName:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function mb(h,c){return L(h,"POST","/v2/accounts/mfaSignIn:finalize",Q(h,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let vb=(()=>{class h{constructor(){}static assertion(l){return Fh._fromCredential(l)}}return h.FACTOR_ID="phone",h})();var GI="@firebase/auth";class Lh{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,I.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(f=>{c(f?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ms(){return window}(0,U.Pz)("authIdTokenMaxAge"),function ZI(h){(0,Ne._registerComponent)(new Xt.wA("auth",(c,{options:l})=>{const f=c.getProvider("app").getImmediate(),m=c.getProvider("heartbeat"),y=c.getProvider("app-check-internal"),{apiKey:w,authDomain:P}=f.options;Z(w&&!w.includes(":"),"invalid-api-key",{appName:f.name});const z={apiKey:w,authDomain:P,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$o(h)},ue=new aI(f,m,y,z);return function QA(h,c){const l=c?.persistence||[],f=(Array.isArray(l)?l:[l]).map(Ge);c?.errorMap&&h._updateErrorMap(c.errorMap),h._initializeWithPersistence(f,c?.popupRedirectResolver)}(ue,l),ue},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,f)=>{c.getProvider("auth-internal").initialize()})),(0,Ne._registerComponent)(new Xt.wA("auth-internal",c=>{const l=Ut(c.getProvider("auth").getImmediate());return new Lh(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)(GI,"1.5.0",function Iu(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(h)),(0,Ne.registerVersion)(GI,"1.5.0","esm2017")}("Browser");function Bh(){return Bh=(0,I.Z)(function*(h,c,l){var f;const{BuildInfo:m}=Ms();Ft(c.sessionId,"AuthEvent did not contain a session ID");const y=yield function vm(h){return Xc.apply(this,arguments)}(c.sessionId),w={};return Fe()?w.ibi=m.packageName:b()?w.apn=m.packageName:gt(h,"operation-not-supported-in-this-environment"),m.displayName&&(w.appDisplayName=m.displayName),w.sessionId=y,ta(h,l,c.type,void 0,null!==(f=c.eventId)&&void 0!==f?f:void 0,w)}),Bh.apply(this,arguments)}function Tu(){return(Tu=(0,I.Z)(function*(h){const{BuildInfo:c}=Ms(),l={};Fe()?l.iosBundleId=c.packageName:b()?l.androidPackageName=c.packageName:gt(h,"operation-not-supported-in-this-environment"),yield Sh(h,l)})).apply(this,arguments)}function Cu(){return(Cu=(0,I.Z)(function*(h,c,l){const{cordova:f}=Ms();let m=()=>{};try{yield new Promise((y,w)=>{let P=null;function z(){var we;y();const nn=null===(we=f.plugins.browsertab)||void 0===we?void 0:we.close;"function"==typeof nn&&nn(),"function"==typeof l?.close&&l.close()}function ue(){P||(P=window.setTimeout(()=>{w(Rt(h,"redirect-cancelled-by-user"))},2e3))}function _e(){"visible"===document?.visibilityState&&ue()}c.addPassiveListener(z),document.addEventListener("resume",ue,!1),b()&&document.addEventListener("visibilitychange",_e,!1),m=()=>{c.removePassiveListener(z),document.removeEventListener("resume",ue,!1),document.removeEventListener("visibilitychange",_e,!1),P&&window.clearTimeout(P)}})}finally{m()}})).apply(this,arguments)}function Xc(){return(Xc=(0,I.Z)(function*(h){const c=function Im(h){if(Ft(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const c=new ArrayBuffer(h.length),l=new Uint8Array(c);for(let f=0;f<h.length;f++)l[f]=h.charCodeAt(f);return l}(h),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class JI extends bh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,I.Z)(function*(){yield c.initPromise})()}}function wm(h){return tl.apply(this,arguments)}function tl(){return(tl=(0,I.Z)(function*(h){const c=yield jh()._get($n(h));return c&&(yield jh()._remove($n(h))),c})).apply(this,arguments)}function Du(){const h=[];for(let l=0;l<20;l++){const f=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(f))}return h.join("")}function jh(){return Ge(Oi)}function $n(h){return An("authEvent",h.config.apiKey,h.name)}function na(h){if(!h?.includes("?"))return{};const[c,...l]=h.split("?");return(0,U.zd)(l.join("?"))}const nl=class Cm{constructor(){this._redirectPersistence=io,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=zc,this._overrideRedirectResult=Ch}_initialize(c){var l=this;return(0,I.Z)(function*(){const f=c._key();let m=l.eventManagers.get(f);return m||(m=new JI(c),l.eventManagers.set(f,m),l.attachCallbackListeners(c,m)),m})()}_openPopup(c){gt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,f,m){var y=this;return(0,I.Z)(function*(){!function YI(h){var c,l,f,m,y,w,P,z,ue,_e;const we=Ms();Z("function"==typeof(null===(c=we?.universalLinks)||void 0===c?void 0:c.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Z(typeof(null===(l=we?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Z("function"==typeof(null===(y=null===(m=null===(f=we?.cordova)||void 0===f?void 0:f.plugins)||void 0===m?void 0:m.browsertab)||void 0===y?void 0:y.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Z("function"==typeof(null===(z=null===(P=null===(w=we?.cordova)||void 0===w?void 0:w.plugins)||void 0===P?void 0:P.browsertab)||void 0===z?void 0:z.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Z("function"==typeof(null===(_e=null===(ue=we?.cordova)||void 0===ue?void 0:ue.InAppBrowser)||void 0===_e?void 0:_e.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const w=yield y._initialize(c);yield w.initialized(),w.resetRedirect(),function NI(){$c.clear()}(),yield y._originValidation(c);const P=function el(h,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:Du(),postBody:null,tenantId:h.tenantId,error:Rt(h,"no-auth-event")}}(c,f,m);yield function co(h,c){return jh()._set($n(h),c)}(c,P);const z=yield function Fi(h,c,l){return Bh.apply(this,arguments)}(c,P,l),ue=yield function ym(h){const{cordova:c}=Ms();return new Promise(l=>{c.plugins.browsertab.isAvailable(f=>{let m=null;f?c.plugins.browsertab.openUrl(h):m=c.InAppBrowser.open(h,function Xe(h=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),l(m)})})}(z);return function Jc(h,c,l){return Cu.apply(this,arguments)}(c,w,ue)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Yc(h){return Tu.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:f,handleOpenURL:m,BuildInfo:y}=Ms(),w=setTimeout((0,I.Z)(function*(){yield wm(c),l.onEvent(lo())}),500),P=function(){var _e=(0,I.Z)(function*(we){clearTimeout(w);const nn=yield wm(c);let di=null;nn&&we?.url&&(di=function Tm(h,c){var l,f;const m=function Hn(h){const c=na(h),l=c.link?decodeURIComponent(c.link):void 0,f=na(l).link,m=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return na(m).link||m||f||l||h}(c);if(m.includes("/__/auth/callback")){const y=na(m),w=y.firebaseError?function XI(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(y.firebaseError)):null,P=null===(f=null===(l=w?.code)||void 0===l?void 0:l.split("auth/"))||void 0===f?void 0:f[1],z=P?Rt(P):null;return z?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:z,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:m,postBody:null}}return null}(nn,we.url)),l.onEvent(di||lo())});return function(nn){return _e.apply(this,arguments)}}();typeof f<"u"&&"function"==typeof f.subscribe&&f.subscribe(null,P);const z=m,ue=`${y.packageName.toLowerCase()}://`;Ms().handleOpenURL=function(){var _e=(0,I.Z)(function*(we){if(we.toLowerCase().startsWith(ue)&&P({url:we}),"function"==typeof z)try{z(we)}catch(nn){console.error(nn)}});return function(we){return _e.apply(this,arguments)}}()}};function lo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Rt("no-auth-event")}}function Li(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function Am(h=(0,U.z$)()){return!("file:"!==Li()&&"ionic:"!==Li()&&"capacitor:"!==Li()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function tE(){try{const h=self.localStorage,c=Ds();if(h)return h.setItem(c,"1"),h.removeItem(c),!function Db(h=(0,U.z$)()){return function Tb(){return(0,U.w1)()&&11===document?.documentMode}()||function Cb(h=(0,U.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,U.hl)()}catch{return bm()&&(0,U.hl)()}return!1}function bm(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function xs(){return(function Eb(){return"http:"===Li()||"https:"===Li()}()||(0,U.ru)()||Am())&&!function wb(){return(0,U.b$)()||(0,U.UG)()}()&&tE()&&!bm()}function Sm(){return Am()&&typeof document<"u"}function ln(){return(ln=(0,I.Z)(function*(){return!!Sm()&&new Promise(h=>{const c=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),h(!0)})})})).apply(this,arguments)}const zn={LOCAL:"local",NONE:"none",SESSION:"session"},Au=Z,Br="persistence";function rl(h){return oa.apply(this,arguments)}function oa(){return(oa=(0,I.Z)(function*(h){yield h._initializationPromise;const c=Rm(),l=An(Br,h.config.apiKey,h.name);c&&c.setItem(l,h._getPersistence())})).apply(this,arguments)}function Rm(){var h;try{return(null===(h=function rE(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const Ab=Z;class Ns{constructor(){this.browserResolver=Ge(uo),this.cordovaResolver=Ge(nl),this.underlyingResolver=null,this._redirectPersistence=io,this._completeRedirectFn=zc,this._overrideRedirectResult=Ch}_initialize(c){var l=this;return(0,I.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,f,m){var y=this;return(0,I.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._openPopup(c,l,f,m)})()}_openRedirect(c,l,f,m){var y=this;return(0,I.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._openRedirect(c,l,f,m)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return Sm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ab(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,I.Z)(function*(){if(c.underlyingResolver)return;const l=yield function nE(){return ln.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function iE(h){return h.unwrap()}function Hh(h){return sE(h)}function sE(h){const{_tokenResponse:c}=h instanceof U.ZR?h.customData:h;if(!c)return null;if(!(h instanceof U.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Rn.credentialFromResult(h);const l=c.providerId;if(!l||l===Je.PASSWORD)return null;let f;switch(l){case Je.GOOGLE:f=ci;break;case Je.FACEBOOK:f=Jr;break;case Je.GITHUB:f=ut;break;case Je.TWITTER:f=Si;break;default:const{oauthIdToken:m,oauthAccessToken:y,oauthTokenSecret:w,pendingToken:P,nonce:z}=c;return y||w||m||P?P?l.startsWith("saml.")?Is._create(l,P):Ai._fromParams({providerId:l,signInMethod:l,pendingToken:P,idToken:m,accessToken:y}):new Xi(l).credential({idToken:m,accessToken:y,rawNonce:z}):null}return h instanceof U.ZR?f.credentialFromError(h):f.credentialFromResult(h)}function ar(h,c){return c.catch(l=>{throw l instanceof U.ZR&&function aa(h,c){var l;const f=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new oE(h,function sb(h,c){var l;const f=(0,U.m9)(h),m=c;return Z(c.customData.operationType,f,"argument-error"),Z(null===(l=m.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,f,"argument-error"),Fg._fromError(f,m)}(h,c));else if(f){const m=sE(c),y=c;m&&(y.credential=m,y.tenantId=f.tenantId||void 0,y.email=f.email||void 0,y.phoneNumber=f.phoneNumber||void 0)}}(h,l),l}).then(l=>{const m=l.user;return{operationType:l.operationType,credential:Hh(l),additionalUserInfo:Un(l),user:ns.getOrCreate(m)}})}function zh(h,c){return qh.apply(this,arguments)}function qh(){return(qh=(0,I.Z)(function*(h,c){const l=yield c;return{verificationId:l.verificationId,confirm:f=>ar(h,l.confirm(f))}})).apply(this,arguments)}class oE{constructor(c,l){this.resolver=l,this.auth=function jr(h){return h.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return ar(iE(this.auth),this.resolver.resolveSignIn(c))}}class ns{constructor(c){this._delegate=c,this.multiFactor=function lb(h){const c=(0,U.m9)(h);return Ug.has(c)||Ug.set(c,Lg._fromUser(c)),Ug.get(c)}(c)}static getOrCreate(c){return ns.USER_MAP.has(c)||ns.USER_MAP.set(c,new ns(c)),ns.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,I.Z)(function*(){return ar(l.auth,Mg(l._delegate,c))})()}linkWithPhoneNumber(c,l){var f=this;return(0,I.Z)(function*(){return zh(f.auth,function _h(h,c,l){return yh.apply(this,arguments)}(f._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,I.Z)(function*(){return ar(l.auth,function nm(h,c,l){return wh.apply(this,arguments)}(l._delegate,c,Ns))})()}linkWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield rl(Ut(l.auth)),um(l._delegate,c,Ns)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,I.Z)(function*(){return ar(l.auth,xg(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return zh(this.auth,function ki(h,c,l){return Uc.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return ar(this.auth,function tm(h,c,l){return jc.apply(this,arguments)}(this._delegate,c,Ns))}reauthenticateWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield rl(Ut(l.auth)),om(l._delegate,c,Ns)})()}sendEmailVerification(c){return function Wo(h,c){return Zt.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,I.Z)(function*(){return yield function _I(h,c){return Ac.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function es(h,c){return Zo((0,U.m9)(h),c,null)}(this._delegate,c)}updatePassword(c){return function uu(h,c){return Zo((0,U.m9)(h),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function vh(h,c){return Xo.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function kg(h,c){return Mi.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function au(h,c,l){return Ts.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ns.USER_MAP=new WeakMap;const Su=Z;let Pm=(()=>{class h{constructor(l,f){if(this.app=l,f.isInitialized())return this._delegate=f.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m}=l.options;Su(m,"invalid-api-key",{appName:l.name}),Su(m,"invalid-api-key",{appName:l.name});const y=typeof window<"u"?Ns:void 0;this._delegate=f.initialize({options:{persistence:sl(m,l.name),popupRedirectResolver:y}}),this._delegate._updateErrorMap(On),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ns.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,f){!function vr(h,c,l){const f=Ut(h);Z(f._canInitEmulator,f,"emulator-config-failed"),Z(/^https?:\/\//.test(c),f,"invalid-emulator-scheme");const m=!!l?.disableWarnings,y=Ka(c),{host:w,port:P}=function dI(h){const c=Ka(h),l=/(\/\/)?([^?#/]+)/.exec(h.substr(c.length));if(!l)return{host:"",port:null};const f=l[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(f);if(m){const y=m[1];return{host:y,port:zd(f.substr(y.length+1))}}{const[y,w]=f.split(":");return{host:y,port:zd(w)}}}(c);f.config.emulator={url:`${y}//${w}${null===P?"":`:${P}`}/`},f.settings.appVerificationDisabledForTesting=!0,f.emulatorConfig=Object.freeze({host:w,port:P,protocol:y.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function hI(){function h(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,l,f)}applyActionCode(l){return function Ng(h,c){return zo.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return Og(this._delegate,l)}confirmPasswordReset(l,f){return function Vr(h,c,l){return Pc.apply(this,arguments)}(this._delegate,l,f)}createUserWithEmailAndPassword(l,f){var m=this;return(0,I.Z)(function*(){return ar(m._delegate,function je(h,c,l){return Pt.apply(this,arguments)}(m._delegate,l,f))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function ou(h,c){return Mc.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function qo(h,c){const l=Yi.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,I.Z)(function*(){Su(xs(),l._delegate,"operation-not-supported-in-this-environment");const f=yield function Dh(h,c){return mu.apply(this,arguments)}(l._delegate,Ns);return f?ar(l._delegate,Promise.resolve(f)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function ra(h,c){Ut(h)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,f,m){const{next:y,error:w,complete:P}=il(l,f,m);return this._delegate.onAuthStateChanged(y,w,P)}onIdTokenChanged(l,f,m){const{next:y,error:w,complete:P}=il(l,f,m);return this._delegate.onIdTokenChanged(y,w,P)}sendSignInLinkToEmail(l,f){return function su(h,c,l){return Sn.apply(this,arguments)}(this._delegate,l,f)}sendPasswordResetEmail(l,f){return function sr(h,c,l){return ws.apply(this,arguments)}(this._delegate,l,f||void 0)}setPersistence(l){var f=this;return(0,I.Z)(function*(){let m;switch(function sa(h,c){Au(Object.values(zn).includes(c),h,"invalid-persistence-type"),(0,U.b$)()?Au(c!==zn.SESSION,h,"unsupported-persistence-type"):(0,U.UG)()?Au(c===zn.NONE,h,"unsupported-persistence-type"):bm()?Au(c===zn.NONE||c===zn.LOCAL&&(0,U.hl)(),h,"unsupported-persistence-type"):Au(c===zn.NONE||tE(),h,"unsupported-persistence-type")}(f._delegate,l),l){case zn.SESSION:m=io;break;case zn.LOCAL:m=(yield Ge(Jo)._isAvailable())?Jo:Oi;break;case zn.NONE:m=Wt;break;default:return gt("argument-error",{appName:f._delegate.name})}return f._delegate.setPersistence(m)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return ar(this._delegate,function Rg(h){return Dc.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return ar(this._delegate,bc(this._delegate,l))}signInWithCustomToken(l){return ar(this._delegate,function vI(h,c){return wr.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,f){return ar(this._delegate,function li(h,c,l){return bc((0,U.m9)(h),Kd.credential(c,l)).catch(function(){var f=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&tt(h),m});return function(m){return f.apply(this,arguments)}}())}(this._delegate,l,f))}signInWithEmailLink(l,f){return ar(this._delegate,function un(h,c,l){return Ri.apply(this,arguments)}(this._delegate,l,f))}signInWithPhoneNumber(l,f){return zh(this._delegate,function Jg(h,c,l){return mh.apply(this,arguments)}(this._delegate,l,f))}signInWithPopup(l){var f=this;return(0,I.Z)(function*(){return Su(xs(),f._delegate,"operation-not-supported-in-this-environment"),ar(f._delegate,function em(h,c,l){return Eh.apply(this,arguments)}(f._delegate,l,Ns))})()}signInWithRedirect(l){var f=this;return(0,I.Z)(function*(){return Su(xs(),f._delegate,"operation-not-supported-in-this-environment"),yield rl(f._delegate),OI(f._delegate,l,Ns)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function tn(h,c){return he.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=zn,h})();function il(h,c,l){let f=h;"function"!=typeof h&&({next:f,error:c,complete:l}=h);const m=f;return{next:w=>m(w&&ns.getOrCreate(w)),error:c,complete:l}}function sl(h,c){const l=function bu(h,c){const l=Rm();if(!l)return[];const f=An(Br,h,c);switch(l.getItem(f)){case zn.NONE:return[Wt];case zn.LOCAL:return[Jo,io];case zn.SESSION:return[io];default:return[]}}(h,c);if(typeof self<"u"&&!l.includes(Jo)&&l.push(Jo),typeof window<"u")for(const f of[Oi,io])l.includes(f)||l.push(f);return l.includes(Wt)||l.push(Wt),l}class Gh{constructor(){this.providerId="phone",this._delegate=new Rn(iE(xe.Z.auth()))}static credential(c,l){return Rn.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}Gh.PHONE_SIGN_IN_METHOD=Rn.PHONE_SIGN_IN_METHOD,Gh.PROVIDER_ID=Rn.PROVIDER_ID;const Ru=Z;class aE{constructor(c,l,f=xe.Z.app()){var m;Ru(null===(m=f.options)||void 0===m?void 0:m.apiKey,"invalid-api-key",{appName:f.name}),this._delegate=new SI(f.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function uE(h){h.INTERNAL.registerComponent(new Xt.wA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),f=c.getProvider("auth");return new Pm(l,f)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Kd,FacebookAuthProvider:Jr,GithubAuthProvider:ut,GoogleAuthProvider:ci,OAuthProvider:Xi,SAMLAuthProvider:ru,PhoneAuthProvider:Gh,PhoneMultiFactorGenerator:vb,RecaptchaVerifier:aE,TwitterAuthProvider:Si,Auth:Pm,AuthCredential:Qi,Error:U.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.5.0")}(xe.Z)},861:(Wi,xn,Be)=>{function I(U,Ne,ct,zt,Xt,Nn,Je){try{var K=U[Nn](Je),re=K.value}catch(Ce){return void ct(Ce)}K.done?Ne(re):Promise.resolve(re).then(zt,Xt)}function xe(U){return function(){var Ne=this,ct=arguments;return new Promise(function(zt,Xt){var Nn=U.apply(Ne,ct);function Je(re){I(Nn,zt,Xt,Je,K,"next",re)}function K(re){I(Nn,zt,Xt,Je,K,"throw",re)}Je(void 0)})}}Be.d(xn,{Z:()=>xe})},582:(Wi,xn,Be)=>{function Ne(k,F){var $={};for(var H in k)Object.prototype.hasOwnProperty.call(k,H)&&F.indexOf(H)<0&&($[H]=k[H]);if(null!=k&&"function"==typeof Object.getOwnPropertySymbols){var Q=0;for(H=Object.getOwnPropertySymbols(k);Q<H.length;Q++)F.indexOf(H[Q])<0&&Object.prototype.propertyIsEnumerable.call(k,H[Q])&&($[H[Q]]=k[H[Q]])}return $}function Ce(k,F,$,H){return new($||($=Promise))(function(L,pe){function rt(at){try{De(H.next(at))}catch(Gt){pe(Gt)}}function Te(at){try{De(H.throw(at))}catch(Gt){pe(Gt)}}function De(at){at.done?L(at.value):function Q(L){return L instanceof $?L:new $(function(pe){pe(L)})}(at.value).then(rt,Te)}De((H=H.apply(k,F||[])).next())})}function Vt(k){return this instanceof Vt?(this.v=k,this):new Vt(k)}function gt(k,F,$){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,H=$.apply(k,F||[]),L=[];return Q={},pe("next"),pe("throw"),pe("return"),Q[Symbol.asyncIterator]=function(){return this},Q;function pe(xt){H[xt]&&(Q[xt]=function(Kn){return new Promise(function(Cn,rr){L.push([xt,Kn,Cn,rr])>1||rt(xt,Kn)})})}function rt(xt,Kn){try{!function Te(xt){xt.value instanceof Vt?Promise.resolve(xt.value.v).then(De,at):Gt(L[0][2],xt)}(H[xt](Kn))}catch(Cn){Gt(L[0][3],Cn)}}function De(xt){rt("next",xt)}function at(xt){rt("throw",xt)}function Gt(xt,Kn){xt(Kn),L.shift(),L.length&&rt(L[0][0],L[0][1])}}function pr(k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $,F=k[Symbol.asyncIterator];return F?F.call(k):(k=function pt(k){var F="function"==typeof Symbol&&Symbol.iterator,$=F&&k[F],H=0;if($)return $.call(k);if(k&&"number"==typeof k.length)return{next:function(){return k&&H>=k.length&&(k=void 0),{value:k&&k[H++],done:!k}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}(k),$={},H("next"),H("throw"),H("return"),$[Symbol.asyncIterator]=function(){return this},$);function H(L){$[L]=k[L]&&function(pe){return new Promise(function(rt,Te){!function Q(L,pe,rt,Te){Promise.resolve(Te).then(function(De){L({value:De,done:rt})},pe)}(rt,Te,(pe=k[L](pe)).done,pe.value)})}}}Be.d(xn,{FC:()=>gt,KL:()=>pr,_T:()=>Ne,mG:()=>Ce,qq:()=>Vt}),"function"==typeof SuppressedError&&SuppressedError}},Wi=>{Wi(Wi.s=32)}]);